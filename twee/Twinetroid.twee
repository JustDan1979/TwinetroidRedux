:: StoryTitle
Twinetroid


:: StoryData
{
	"ifid": "641E7208-0EFE-4BB0-9DF7-5B94469C6031",
	"format": "SugarCube",
	"format-version": "2.36.1",
	"start": "Start",
	"zoom": 1
}


:: Story Stylesheet [stylesheet]
#ui-bar-history {
  display: none;
}

:root {
  --room-bg: #111;
  --ui-bar-width: 16rem;
}

body {
  background: var(--room-bg);
  background-attachment: fixed;
  background-size: cover;
  position: relative;
  overflow-x: hidden;
  display: flex;
  align-items: flex-start;
}

#ui-bar,
#story {
  position: relative;
  z-index: 1;
}

body::before,
body::after {
  content: "";
  position: fixed;
  inset: -20%;
  z-index: 0;
  pointer-events: none;
}

body::before {
  background: var(--room-fx-1, transparent);
  opacity: 0.7;
  animation: room-drift 60s linear infinite;
}

body::after {
  inset: 0;
  background: var(--room-fx-2, transparent);
  opacity: 0.45;
  animation: room-pulse 18s ease-in-out infinite;
  mix-blend-mode: screen;
}

body[data-room-theme="Norfair"]::before {
  animation-duration: 35s;
}

body[data-room-theme="Tourian"]::after {
  animation: room-scan 8s linear infinite;
  opacity: 0.35;
  mix-blend-mode: overlay;
}

@keyframes room-drift {
  0% { transform: translate3d(0, 0, 0) scale(1); }
  50% { transform: translate3d(-4%, 3%, 0) scale(1.02); }
  100% { transform: translate3d(0, 0, 0) scale(1); }
}

@keyframes room-pulse {
  0%, 100% { opacity: 0.35; }
  50% { opacity: 0.6; }
}

@keyframes room-scan {
  0% { background-position: 0 0; }
  100% { background-position: 0 200px; }
}

#story {
  background: transparent;
  margin: 0 !important;
  padding-top: 0 !important;
  display: flex;
  flex-direction: column;
  justify-content: center;
  min-height: 100vh;
  flex: 1 1 auto;
  min-width: 0;
}

.ui-bar-hidden #story {
  margin-left: 0 !important;
}

#ui-bar {
  width: var(--ui-bar-width);
  position: sticky !important;
  top: 0;
  left: 0;
  height: 100vh;
  flex: 0 0 var(--ui-bar-width);
  margin: 0 !important;
}

#ui-bar.stowed {
  left: 0 !important;
}

#ui-bar-body {
  margin: 0 !important;
  height: 100%;
}

#ui-bar-body {
  padding: 0.6rem 0.6rem 0.8rem;
}

#hud {
  margin-top: 0.4rem;
  font-size: 0.82em;
  --map-cell-size: 11px;
  --map-gap: 2px;
  --map-font-size: 8.5px;
}

#hud .hud-section + .hud-section {
  margin-top: 0.55rem;
}

#hud .hud-label {
  margin-top: 0.3rem;
  font-weight: bold;
}

#samus-items {
  line-height: 1.4;
}

#hud-combat {
  display: none;
  margin-top: 0.75rem;
}

#hud-combat .combat-hud {
  margin: 0;
}

#hud-combat .combat-hud img {
  width: 110px;
  max-width: 42vw;
}

.passage .combat-scene {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.passage .combat-top {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  gap: 1rem;
  flex-wrap: nowrap;
}

.passage .combat-vs {
  font-size: 2rem;
  font-weight: 700;
  opacity: 0.65;
  align-self: center;
}

.passage .combat-top .combat-actor {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.35rem;
}

.passage .combat-top .combat-name {
  font-weight: 700;
}

.passage .combat-top img {
  width: 140px;
  max-width: 28vw;
  height: auto;
  display: block;
  object-fit: contain;
}

.combat-enemy[src*="Zebs.webp"],
.combat-enemy[src*="Sidehopper.webp"],
.combat-enemy[src*="Rinka.webp"],
.combat-enemy[src*="Multiviola.webp"] {
  filter: grayscale(100%);
}

.passage .combat-hp {
  font-size: 0.9rem;
  color: #cfcfcf;
}

.passage .combat-panels {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1.5rem;
}

.passage .combat-panel {
  background: #111;
  border: 1px solid #2a2a2a;
  padding: 1rem;
  min-height: 360px;
  height: 360px;
  max-height: 360px;
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  overflow: hidden;
}

.passage .combat-panel-title {
  font-weight: 700;
  margin-bottom: 0.5rem;
}

.passage .combat-log {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  min-height: 0;
  flex: 1;
  overflow-y: auto;
  padding-right: 0.35rem;
}

.passage .combat-log .log-entry {
  transition: opacity 0.25s ease;
}

.passage .combat-log .log-old {
  opacity: 0.45;
}

.passage .combat-log .log-label {
  font-weight: 600;
  margin-right: 0.35rem;
  color: #cfcfcf;
}

.passage .combat-actions {
  margin-top: 0.75rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 0.6rem;
}

.passage .combat-actions a.combat-action {
  display: block;
  padding: 0.6rem 0.85rem;
  border: 1px solid #3b3b3b;
  background: #151515;
  text-align: center;
  text-decoration: none;
}

.passage .combat-actions a.combat-action:hover {
  background: #202020;
  border-color: #5a5a5a;
}

.passage .combat-hidden-actions {
  display: none;
}

.passage .combat-source {
  position: absolute;
  left: -9999px;
  width: 1px;
  height: 1px;
  overflow: hidden;
  visibility: hidden;
}

.passage .room-panel {
  background: #111;
  border: 1px solid #2a2a2a;
  padding: 1rem;
  min-height: 360px;
  height: 360px;
  max-height: 360px;
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  overflow: hidden;
}

.passage .room-text {
  flex: 1;
  overflow-y: auto;
}

.passage .room-actions {
  margin-top: 0.75rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 0.6rem;
}

.passage .room-actions a {
  display: block;
  padding: 0.6rem 0.85rem;
  border: 1px solid #3b3b3b;
  background: #151515;
  text-align: center;
  text-decoration: none;
}

.passage .room-actions a:hover {
  background: #202020;
  border-color: #5a5a5a;
}

#passages {
  max-width: 960px;
  margin: 0 auto;
  padding: 0 1.5rem 3rem;
  margin-top: 0 !important;
  padding-top: 0 !important;
}

.passage {
  background: rgba(0, 0, 0, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.5);
  padding: 2rem 2.5rem;
  color: #fff;
  margin-top: 0 !important;
  text-shadow: 0 0 2px rgba(0, 0, 0, 0.9),
    1px 1px 0 rgba(0, 0, 0, 0.9),
    -1px -1px 0 rgba(0, 0, 0, 0.9),
    1px -1px 0 rgba(0, 0, 0, 0.9),
    -1px 1px 0 rgba(0, 0, 0, 0.9);
}

.passage a {
  text-shadow: inherit;
}

.passage a.story-action {
  display: inline-block;
  padding: 0.5rem 0.85rem;
  border: 1px solid #3b3b3b;
  background: #151515;
  text-decoration: none;
}

.passage a.story-action:hover {
  background: #202020;
  border-color: #5a5a5a;
}

#music-toggle {
  position: fixed;
  top: 0.75rem;
  right: 0.75rem;
  z-index: 1000;
  width: 2.25rem;
  height: 2.25rem;
  border-radius: 999px;
  border: 1px solid #3b3b3b;
  background: rgba(20, 20, 20, 0.85);
  color: #e6e6e6;
  font-size: 1rem;
  line-height: 2.15rem;
  text-align: center;
  text-decoration: none;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.45);
}

#music-toggle:hover {
  background: rgba(32, 32, 32, 0.95);
  border-color: #5a5a5a;
}

#music-toggle.off {
  opacity: 0.6;
}

@media (max-width: 900px) {
  .passage .combat-top {
    flex-direction: column;
    align-items: center;
    flex-wrap: wrap;
  }

  .passage .combat-panels {
    grid-template-columns: 1fr;
  }

  #passages {
    padding: 0 1rem 2.5rem;
  }

  .passage {
    padding: 1.5rem;
  }
}

#hud-map {
  overflow-x: auto;
}

#samus-map {
  margin-top: 0.4rem;
  display: inline-block;
  min-width: max-content;
}

.map-frame {
  display: inline-block;
  --map-frame-pad: 0.35rem;
  --map-cell-width: var(--map-cell-size);
  --map-cell-height: var(--map-cell-size);
  padding: var(--map-frame-pad);
  border: 1px solid #e6e6e6;
}

.map-frame-image {
  background-size: cover;
  background-position: top left;
  background-repeat: no-repeat;
  background-origin: content-box;
  background-clip: content-box;
  background-size: calc(var(--map-cols) * var(--map-cell-width) + (var(--map-cols) - 1) * var(--map-gap))
    calc(var(--map-rows) * var(--map-cell-height) + (var(--map-rows) - 1) * var(--map-gap));
  border-color: rgba(255, 255, 255, 0.25);
}

.map-frame-image .map-grid {
  background: transparent;
}

.map-frame-image .map-cell {
  border-color: rgba(255, 255, 255, 0.1);
}

.map-frame-image .map-cell-empty,
.map-frame-image .map-cell-unknown {
  background: transparent;
  color: transparent;
}

.map-frame-image .map-cell-visited {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 255, 255, 0.3);
  color: transparent;
}

.map-frame-image .map-cell-current {
  border-color: #3a7dff;
  background: rgba(58, 125, 255, 0.25);
  color: #e6f0ff;
}


.map-grid {
  display: grid;
  gap: var(--map-gap);
  grid-auto-rows: var(--map-cell-height);
}

.map-cell {
  width: var(--map-cell-width);
  height: var(--map-cell-height);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  font-family: "Cascadia Mono", "Consolas", "Courier New", monospace;
  font-size: var(--map-font-size);
  line-height: 1;
  box-sizing: border-box;
}

.map-cell-empty {
  color: #666;
  border: 1px solid #555;
  background: transparent;
}

.map-cell-unknown {
  color: transparent;
  border: 1px solid #444;
  background: #111;
}

.map-cell-visited {
  color: #111;
  border: 1px solid #111;
  background: #f0f0f0;
}

.map-cell-current {
  color: #3a7dff;
  border: 2px solid #3a7dff;
  background: #f0f0f0;
  font-weight: 700;
}

.map-cell-marked {
  --marker-color: #ffd166;
  border-color: var(--marker-color);
  box-shadow: 0 0 0 2px var(--marker-color);
}

.map-cell-marked-0 { --marker-color: #ffd166; }
.map-cell-marked-1 { --marker-color: #4ecdc4; }
.map-cell-marked-2 { --marker-color: #ff6b6b; }
.map-cell-marked-3 { --marker-color: #6c63ff; }

.map-cell-hidden {
  border: 1px solid transparent;
  background: transparent;
  color: transparent;
}

#map-marker-toggle {
  display: inline-block;
  padding: 0.2rem 0.5rem;
  border: 1px solid #3b3b3b;
  background: #151515;
  text-decoration: none;
  font-size: 0.75em;
}

#map-marker-toggle:hover {
  background: #202020;
  border-color: #5a5a5a;
}

#map-marker-toggle.active {
  border-color: #ffd166;
  color: #ffd166;
}

#map-marker-list {
  margin-top: 0.25rem;
  font-size: 0.75em;
  color: #c0c0c0;
  line-height: 1.3;
}

#map-marker-list .marker-item {
  display: inline-block;
  margin-right: 0.35rem;
  position: relative;
  padding-left: 0.7rem;
}

#map-marker-list .map-marker-remove {
  margin-left: 0.2rem;
  color: #ff6b6b;
  text-decoration: none;
}

#map-marker-list .marker-item::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0.35em;
  width: 0.45em;
  height: 0.45em;
  background: var(--marker-color, #ffd166);
  border: 1px solid #111;
  border-radius: 2px;
}

.marker-color-0 { --marker-color: #ffd166; }
.marker-color-1 { --marker-color: #4ecdc4; }
.marker-color-2 { --marker-color: #ff6b6b; }
.marker-color-3 { --marker-color: #6c63ff; }

#map-view-toggle {
  display: inline-block;
  padding: 0.2rem 0.5rem;
  border: 1px solid #3b3b3b;
  background: #151515;
  text-decoration: none;
  font-size: 0.75em;
  margin-left: 0.35rem;
}

#map-view-toggle:hover {
  background: #202020;
  border-color: #5a5a5a;
}

#map-modal {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.75);
  z-index: 1200;
  padding: 2rem;
  box-sizing: border-box;
}

#map-modal.open {
  display: flex;
}

#map-modal .map-modal-content {
  background: #0f0f0f;
  border: 1px solid #2a2a2a;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.6);
  padding: 1rem 1.2rem 1.25rem;
  max-width: min(95vw, 900px);
  max-height: 90vh;
  overflow: auto;
  box-sizing: border-box;
}

#map-modal .map-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0.75rem;
}

#map-modal .map-modal-title {
  font-weight: 700;
  font-size: 1.05rem;
}

#map-modal .map-modal-close {
  border: 1px solid #3b3b3b;
  background: #151515;
  color: #e6e6e6;
  padding: 0.35rem 0.6rem;
  text-decoration: none;
}

#map-modal .map-modal-close:hover {
  background: #202020;
  border-color: #5a5a5a;
}

#map-modal .map-frame {
  padding: 0;
  box-sizing: border-box;
  --map-width: 380px;
  --map-height: 605px;
  --map-gap: 4px;
  --map-cell-width: calc((var(--map-width) - (var(--map-cols) - 1) * var(--map-gap)) / var(--map-cols));
  --map-cell-height: calc((var(--map-height) - (var(--map-rows) - 1) * var(--map-gap)) / var(--map-rows));
  --map-font-size: calc(var(--map-cell-height) * 0.45);
  width: var(--map-width);
  height: var(--map-height);
}

#map-modal .map-grid {
  width: 100%;
  height: 100%;
}

.combat-hud {
  display: flex;
  gap: 1rem;
  align-items: flex-start;
  justify-content: center;
  margin: 0 0 1rem;
}

.combat-hud .combat-actor {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
}

.combat-hud .combat-name {
  font-weight: bold;
}

.combat-hud img {
  width: 160px;
  max-width: 40vw;
  height: auto;
  display: block;
  object-fit: contain;
}

@media (max-width: 800px) {
  .combat-hud {
    flex-direction: column;
    align-items: center;
  }
}


:: Story JavaScript [script]
Config.history.controls = false;
Config.ui.stowBarInitially = false;

setup.assetPath = "assets/images/";

setup.enemyDefs = [
  { key: "Zebetite", name: "Zebetite", image: "Zebetite.webp" },
  { key: "Mother Brain", name: "Mother Brain", image: "MotherBrain.webp" },
  { key: "Metroid Mutant", name: "Metroid Mutant", image: "MetroidMutant.webp" },
  { key: "Metroid", name: "Metroid", image: "MetroidTrapped.webp" },
  { key: "Ridley", name: "Ridley", image: "Ridley.webp" },
  { key: "Kraid", name: "Kraid", image: "Kraid.webp" },
  { key: "Doublehopper", name: "Doublehopper", image: "Doublehopper.webp" },
  { key: "Sidehopper", name: "Sidehopper", image: "Sidehopper.webp" },
  { key: "Dessgeega", name: "Dessgeega", image: "Dessgeega.webp" },
  { key: "Geruda", name: "Geruda", image: "GerudaScrewAttack.webp" },
  { key: "Holtz", name: "Holtz", image: "Holtz.webp" },
  { key: "Geemer", name: "Geemer", image: "Geemer.webp" },
  { key: "Rio", name: "Rio", image: "Rio.webp" },
  { key: "Zeb", name: "Zeb", image: "Zebs.webp" },
  { key: "Rinka", name: "Rinka", image: "Rinka.webp" },
  { key: "Multiviola", name: "Multiviola", image: "Multiviola.webp" }
];

setup.itemDefs = [
  { key: "Normal Beam ", label: "Normal Beam" },
  { key: "Ice Beam ", label: "Ice Beam" },
  { key: "Wave Beam ", label: "Wave Beam" },
  { key: "Bombs ", label: "Bombs" },
  { key: "Screw Attack ", label: "Screw Attack" },
  { key: "Varia ", label: "Varia" }
];

setup.musicMode = "procedural";
setup.musicThemes = {
  Brinstar: {
    label: "Brinstar",
    base: 110,
    scale: [0, 3, 5, 7, 10],
    chord: [0, 3, 7],
    padType: "sawtooth",
    padGain: 0.025,
    filterBase: 520,
    lfoRate: 0.02,
    lfoDepth: 160,
    sparkleMin: 2200,
    sparkleMax: 3600,
    sparkleGain: 0.035,
    noiseGain: 0.015,
    tempo: 64,
    pulseGain: 0.08
  },
  Norfair: {
    label: "Norfair",
    base: 70,
    scale: [0, 2, 3, 7, 8],
    chord: [0, 5, 7],
    padType: "square",
    padGain: 0.03,
    filterBase: 360,
    lfoRate: 0.016,
    lfoDepth: 140,
    sparkleMin: 2600,
    sparkleMax: 4400,
    sparkleGain: 0.03,
    noiseGain: 0.03,
    tempo: 58,
    pulseGain: 0.1
  },
  Tourian: {
    label: "Tourian",
    base: 90,
    scale: [0, 1, 5, 6, 10],
    chord: [0, 1, 6],
    padType: "triangle",
    padGain: 0.025,
    filterBase: 480,
    lfoRate: 0.028,
    lfoDepth: 220,
    sparkleMin: 1400,
    sparkleMax: 2600,
    sparkleGain: 0.045,
    noiseGain: 0.02,
    tempo: 62,
    pulseGain: 0.07
  },
  Default: {
    label: "Title",
    base: 120,
    scale: [0, 2, 4, 7, 9],
    chord: [0, 4, 7],
    padType: "sine",
    padGain: 0.025,
    filterBase: 520,
    lfoRate: 0.018,
    lfoDepth: 160,
    sparkleMin: 2200,
    sparkleMax: 3800,
    sparkleGain: 0.035,
    noiseGain: 0.012,
    tempo: 66,
    pulseGain: 0.06
  }
};

setup.findEnemyInText = function (text) {
  if (!text) {
    return null;
  }
  var hay = String(text);
  var escapeRegex = function (value) {
    return String(value).replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
  };
  for (var i = 0; i < setup.enemyDefs.length; i++) {
    var def = setup.enemyDefs[i];
    var keyPattern = escapeRegex(def.key);
    var patterns = [
      new RegExp("\\b" + keyPattern + "\\b\\s+approaches", "i"),
      new RegExp("\\b" + keyPattern + "\\b\\s+rushes", "i"),
      new RegExp("\\b" + keyPattern + "\\b\\s+draws near", "i"),
      new RegExp("\\bIt(?:'s|ï¿½s| is)\\s+(?:an?\\s+)?" + keyPattern + "\\b", "i"),
      new RegExp("\\b" + keyPattern + "\\b[^\\n\\.]{0,40}(?:Combat|Command)\\s+Level", "i"),
      new RegExp("\\b(?:Combat|Command)\\s+Level[^\\n\\.]{0,40}\\b" + keyPattern + "\\b", "i")
    ];
    for (var p = 0; p < patterns.length; p++) {
      if (patterns[p].test(hay)) {
        return def;
      }
    }
  }
  return null;
};

setup.getEnemy = function () {
  if (Number(State.variables.combat) !== 1) {
    return null;
  }

  var title = State.passage.title || "";
  if (title) {
    for (var i = 0; i < setup.enemyDefs.length; i++) {
      var def = setup.enemyDefs[i];
      var keyPattern = new RegExp("\\b" + String(def.key).replace(/[.*+?^${}()|[\]\\]/g, "\\$&") + "\\b", "i");
      if (keyPattern.test(title)) {
        return def;
      }
    }
  }

  var $passage = jQuery("#passage");
  if ($passage.length === 0) {
    $passage = jQuery(".passage").first();
  }
  if ($passage.length) {
    var defText = setup.findEnemyInText($passage.text());
    if (defText) {
      return defText;
    }
  }

  return null;
};

setup.hasVisited = function (title) {
  if (!title) {
    return false;
  }
  if (State.passage && State.passage.title === title) {
    return true;
  }
  return State.history.some(function (moment) {
    return moment.title === title;
  });
};
window.hasVisited = setup.hasVisited;

setup.previous = function () {
  if (State.history.length < 2) {
    return State.passage.title;
  }
  return State.history[State.history.length - 2].title;
};
window.previous = setup.previous;

window.random = function (min, max) {
  var low = Number(min);
  var high = Number(max);
  if (!Number.isFinite(low) || !Number.isFinite(high)) {
    return 0;
  }
  return Math.floor(Math.random() * (high - low + 1)) + low;
};

setup.mapDefs = {
  Brinstar: {
    name: "Brinstar",
    cols: 7,
    image: "assets/images/Brinstar2.webp",
    data: [
      99, 0, 0, 0, 0, 0, 0,
      35, 35, 36, 31, 19, 0, 0,
      32, 33, 37, 30, 18, 39, 0,
      28, 34, 38, 29, 17, 40, 0,
      26, 27, 0, 25, 16, 0, 0,
      24, 23, 14, 12, 13, 15, 0,
      0, 0, 0, 6, 0, 0, 0,
      0, 8, 7, 5, 4, 0, 0,
      0, 9, 0, 0, 3, 22, 0,
      0, 10, 0, 0, 2, 20, 21,
      0, 11, 0, 0, 1, 0, 0
    ]
  },
  Norfair: {
    name: "Norfair",
    cols: 7,
    image: "assets/images/norfair2.webp",
    data: [
      79, 0, 0, 0, 0, 0, 0,
      78, 77, 0, 0, 0, 0, 0,
      75, 76, 0, 0, 0, 0, 0,
      74, 73, 0, 0, 0, 0, 0,
      69, 68, 72, 62, 45, 0, 0,
      70, 67, 71, 60, 43, 56, 55,
      65, 66, 63, 59, 41, 53, 54,
      64, 61, 58, 57, 42, 50, 51,
      0, 52, 48, 46, 44, 47, 49
    ]
  },
  Tourian: {
    name: "Tourian",
    cols: 7,
    data: [
      0, 0, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 89, 90, 0,
      0, 0, 84, 85, 88, 91, 0,
      0, 0, 83, 86, 87, 92, 0,
      0, 0, 82, 0, 0, 93, 0,
      0, 80, 81, 0, 0, 94, 0,
      0, 0, 0, 0, 0, 95, 0,
      0, 0, 0, 0, 0, 0, 0
    ]
  }
};

setup.ensureInit = function () {
  var v = State.variables;
  var hasEnergy = Number.isFinite(Number(v.maxEnergy)) && Number(v.maxEnergy) > 0;
  if (!hasEnergy) {
    v.maxEnergy = 30;
    v.energy = v.maxEnergy;
    v.maxMissiles = 0;
    v.missiles = v.maxMissiles;
    v.items = ["Normal Beam "];
    v.missilePods = ["0 "];
    v.energyPacks = ["0 "];
    v.startRoom = "01";
    v.combat = 0;
    v.Beam = "Normal Beam ";
    v.Bombs = "";
    v.Varia = "";
    v.ScrewAttack = "";
    v.MotherBrainHealth = 10;
    v.displayStats = 1;
    v.location = "";
    v.displayMap = 0;
  }

  if (!Number.isFinite(Number(v.energy))) {
    v.energy = Number.isFinite(Number(v.maxEnergy)) ? v.maxEnergy : 30;
  }
  if (!Number.isFinite(Number(v.maxMissiles))) {
    v.maxMissiles = 0;
  }
  if (!Number.isFinite(Number(v.missiles))) {
    v.missiles = Number.isFinite(Number(v.maxMissiles)) ? v.maxMissiles : 0;
  }
  v.items = setup.normalizeItems(v.items);
  v.missilePods = setup.normalizeIdTokens(v.missilePods, /\d+/g, ["0 "]);
  v.energyPacks = setup.normalizeIdTokens(v.energyPacks, /[A-Z]|\d+/g, ["0 "]);
  v.visitedRooms = setup.normalizeRoomArray(v.visitedRooms);
  v.mapMarkers = setup.normalizeMarkers(v.mapMarkers);
  if (!v.items.includes("BrinstarMap ")) {
    v.items.push("BrinstarMap ");
  }
  if (!Number.isFinite(Number(v.musicEnabled))) {
    v.musicEnabled = 1;
  }
  if (!Number.isFinite(Number(v.musicVolume))) {
    v.musicVolume = 0.4;
  }
  if (setup._musicEngine && setup._musicEngine.master) {
    setup._musicEngine.master.gain.value = Math.min(0.6, Math.max(0, Number(v.musicVolume) || 0.4));
  }
  if (!v.location) {
    v.location = "";
  }
  if (!v.lastRoom) {
    v.lastRoom = "01";
  }
  if (!Number.isFinite(Number(v.displayStats))) {
    v.displayStats = 1;
  }
  if (!Number.isFinite(Number(v.displayMap))) {
    v.displayMap = 0;
  }
};

setup.markerColors = ["#ffd166", "#4ecdc4", "#ff6b6b", "#6c63ff"];
setup.markerColorCount = setup.markerColors.length;

setup.normalizeRoomId = function (value) {
  if (value === null || value === undefined) {
    return "";
  }
  var str = String(value).trim();
  if (/^\d+$/.test(str)) {
    return str.padStart(2, "0");
  }
  return str;
};

setup.normalizeTokenArray = function (value, fallback) {
  if (Array.isArray(value)) {
    return value;
  }
  return Array.isArray(fallback) ? fallback.slice() : [];
};

setup.normalizeIdTokens = function (value, matcher, fallback) {
  var tokens = [];
  var pushToken = function (raw) {
    if (raw === null || raw === undefined) {
      return;
    }
    var trimmed = String(raw).trim();
    if (!trimmed) {
      return;
    }
    if (/^\d+$/.test(trimmed)) {
      trimmed = String(Number(trimmed));
    }
    var token = trimmed.endsWith(" ") ? trimmed : trimmed + " ";
    if (!tokens.includes(token)) {
      tokens.push(token);
    }
  };

  if (Array.isArray(value)) {
    value.forEach(function (entry) {
      var str = entry === null || entry === undefined ? "" : String(entry);
      var matches = matcher ? str.match(matcher) : null;
      if (matches && matches.length) {
        matches.forEach(function (match) {
          pushToken(match);
        });
      } else {
        pushToken(str);
      }
    });
    if (tokens.length > 0) {
      return tokens;
    }
    return Array.isArray(fallback) ? fallback.slice() : [];
  }

  if (typeof value === "string") {
    var matches = value.match(matcher) || [];
    matches.forEach(function (match) {
      pushToken(match);
    });
    if (tokens.length > 0) {
      return tokens;
    }
  }
  return Array.isArray(fallback) ? fallback.slice() : [];
};

setup.normalizeItems = function (value) {
  var mapItems = ["BrinstarMap ", "NorfairMap "];
  if (Array.isArray(value)) {
    var normalized = [];
    value.forEach(function (item) {
      if (!item) {
        return;
      }
      var key = String(item).trim();
      if (!key) {
        return;
      }
      if (/BrinstarMap/i.test(key)) {
        if (!normalized.includes("BrinstarMap ")) {
          normalized.push("BrinstarMap ");
        }
        return;
      }
      if (/NorfairMap/i.test(key)) {
        if (!normalized.includes("NorfairMap ")) {
          normalized.push("NorfairMap ");
        }
        return;
      }
      if (!normalized.includes(item)) {
        normalized.push(item);
      }
    });
    return normalized.length ? normalized : ["Normal Beam "];
  }
  if (typeof value === "string") {
    var str = String(value);
    var tokens = [];
    setup.itemDefs.forEach(function (def) {
      var needle = String(def.key).trim();
      if (!needle) {
        return;
      }
      if (str.indexOf(needle) !== -1 && !tokens.includes(def.key)) {
        tokens.push(def.key);
      }
    });
    mapItems.forEach(function (mapKey) {
      var needle = mapKey.trim();
      if (needle && str.indexOf(needle) !== -1 && !tokens.includes(mapKey)) {
        tokens.push(mapKey);
      }
    });
    if (tokens.length > 0) {
      return tokens;
    }
  }
  return ["Normal Beam "];
};

setup.normalizeRoomArray = function (value) {
  if (Array.isArray(value)) {
    return value;
  }
  if (typeof value === "string") {
    var matches = value.match(/\d+/g) || [];
    var rooms = [];
    matches.forEach(function (match) {
      var trimmed = String(match).trim();
      if (!trimmed) {
        return;
      }
      var id = trimmed.padStart(2, "0");
      if (!rooms.includes(id)) {
        rooms.push(id);
      }
    });
    return rooms;
  }
  return [];
};

setup.grantMapItem = function (key) {
  var v = State.variables;
  v.items = setup.normalizeItems(v.items);
  if (!v.items.includes(key)) {
    v.items.push(key);
  }
};

setup.refillEnergy = function () {
  var v = State.variables;
  if (!Number.isFinite(Number(v.maxEnergy))) {
    v.maxEnergy = 30;
  }
  v.energy = Number(v.maxEnergy) || 0;
};

setup.grantEnergyPack = function (id) {
  var v = State.variables;
  v.energyPacks = setup.normalizeIdTokens(v.energyPacks, /[A-Z]|\d+/g, ["0 "]);
  var token = String(id || "").trim();
  if (!token) {
    return false;
  }
  token = token.endsWith(" ") ? token : token + " ";
  if (v.energyPacks.includes(token)) {
    return false;
  }
  v.energyPacks.push(token);
  setup.refillEnergy();
  return true;
};

setup.grantMissilePod = function (id, amount) {
  var v = State.variables;
  v.missilePods = setup.normalizeIdTokens(v.missilePods, /\d+/g, ["0 "]);
  var token = String(id || "").trim();
  if (!token) {
    return false;
  }
  token = token.endsWith(" ") ? token : token + " ";
  if (v.missilePods.includes(token)) {
    return false;
  }
  v.missilePods.push(token);
  var gain = Number(amount);
  if (!Number.isFinite(gain)) {
    gain = 2;
  }
  v.maxMissiles = Number(v.maxMissiles) || 0;
  v.missiles = Number(v.missiles) || 0;
  v.maxMissiles += gain;
  v.missiles = v.maxMissiles;
  return true;
};

setup.normalizeMarkers = function (value) {
  var markers = {};
  var normalizeEntry = function (id, entry) {
    var normalizedId = setup.normalizeRoomId(id);
    if (!/^\d+$/.test(normalizedId)) {
      return;
    }
    var color = 0;
    var created = Date.now();
    if (entry && typeof entry === "object") {
      if (Number.isFinite(Number(entry.color))) {
        color = Number(entry.color);
      }
      if (entry.created) {
        created = entry.created;
      }
    }
    markers[normalizedId] = { color: color, created: created };
  };

  if (value && typeof value === "object" && !Array.isArray(value)) {
    Object.keys(value).forEach(function (key) {
      normalizeEntry(key, value[key]);
    });
    return markers;
  }
  if (Array.isArray(value)) {
    value.forEach(function (entry) {
      normalizeEntry(entry, null);
    });
    return markers;
  }
  if (typeof value === "string") {
    var matches = value.match(/\d+/g) || [];
    matches.forEach(function (match) {
      normalizeEntry(match, null);
    });
    return markers;
  }
  return markers;
};

setup.getCurrentRoomId = function () {
  var v = State.variables;
  var id = "";
  if (v && v.lastRoom) {
    id = setup.normalizeRoomId(v.lastRoom);
  }
  if (!id && State.passage && State.passage.title) {
    id = setup.normalizeRoomId(State.passage.title);
  }
  return /^\d+$/.test(id) ? id : "";
};

setup.getMusicKey = function () {
  var loc = State.variables.location;
  var key = loc ? String(loc).trim() : "";
  if (!key) {
    return "Default";
  }
  var normalized = key.replace(/\s+/g, "").toLowerCase();
  var keys = Object.keys(setup.musicThemes || {});
  for (var i = 0; i < keys.length; i++) {
    if (keys[i].toLowerCase() === normalized) {
      return keys[i];
    }
  }
  return "Default";
};

setup.ensureMusic = function () {
  var audio = document.getElementById("bgm");
  if (!audio) {
    audio = document.createElement("audio");
    audio.id = "bgm";
    audio.loop = true;
    audio.preload = "auto";
    document.body.appendChild(audio);
  }
  return audio;
};

setup.ensureAudioContext = function () {
  if (setup._audioCtx) {
    return setup._audioCtx;
  }
  var AudioCtx = window.AudioContext || window.webkitAudioContext;
  if (!AudioCtx) {
    return null;
  }
  setup._audioCtx = new AudioCtx();
  return setup._audioCtx;
};

setup.stopProceduralMusic = function () {
  if (!setup._musicEngine) {
    return;
  }
  var engine = setup._musicEngine;
  engine.active = false;
  if (engine.timers) {
    engine.timers.forEach(function (id) {
      clearTimeout(id);
    });
  }
  if (engine.nodes) {
    engine.nodes.forEach(function (node) {
      try {
        if (node.stop) {
          node.stop();
        }
        if (node.disconnect) {
          node.disconnect();
        }
      } catch (err) {
        /* noop */
      }
    });
  }
  engine.timers = [];
  engine.nodes = [];
  engine.currentTheme = null;
};

setup.startProceduralMusic = function (themeKey) {
  var ctx = setup.ensureAudioContext();
  if (!ctx) {
    return false;
  }
  var engine = setup._musicEngine;
  if (!engine) {
    engine = {
      active: false,
      currentTheme: null,
      master: null,
      timers: [],
      nodes: []
    };
    setup._musicEngine = engine;
  }
  if (engine.active && engine.currentTheme === themeKey) {
    return true;
  }
  setup.stopProceduralMusic();
  engine.active = true;
  engine.currentTheme = themeKey;

  var theme = setup.musicThemes[themeKey] || setup.musicThemes.Default;
  var master = ctx.createGain();
  master.gain.value = 0.3;
  master.connect(ctx.destination);
  engine.master = master;

  var pads = [];
  var effectSend = ctx.createGain();
  effectSend.gain.value = 0.25;
  var delay = ctx.createDelay(1.5);
  delay.delayTime.value = 0.35;
  var feedback = ctx.createGain();
  feedback.gain.value = 0.25;
  delay.connect(feedback).connect(delay);
  effectSend.connect(delay).connect(master);
  engine.nodes.push(effectSend, delay, feedback);

  function createPad(detuneCents) {
    var osc = ctx.createOscillator();
    osc.type = theme.padType || "sine";
    osc.detune.value = detuneCents || 0;
    var filter = ctx.createBiquadFilter();
    filter.type = "lowpass";
    filter.frequency.value = theme.filterBase || 400;
    var gain = ctx.createGain();
    gain.gain.value = theme.padGain || 0.03;
    var lfo = ctx.createOscillator();
    lfo.type = "sine";
    lfo.frequency.value = theme.lfoRate || 0.02;
    var lfoGain = ctx.createGain();
    lfoGain.gain.value = theme.lfoDepth || 200;
    lfo.connect(lfoGain).connect(filter.frequency);
    osc.connect(filter).connect(gain);
    gain.connect(master);
    gain.connect(effectSend);
    osc.start();
    lfo.start();
    engine.nodes.push(osc, filter, gain, lfo, lfoGain);
    pads.push(osc);
  }

  createPad(-6);
  createPad(6);

  var chord = theme.chord || [0, 4, 7];
  var chordIndex = 0;
  var scale = theme.scale || [0, 3, 5, 7, 10];
  var tempo = theme.tempo || 64;
  var stepTime = 60 / tempo;

  function setChord(rootSteps) {
    var now = ctx.currentTime;
    var base = theme.base || 110;
    var root = base * Math.pow(2, rootSteps / 12);
    if (pads[0]) {
      pads[0].frequency.setTargetAtTime(root, now, 2.5);
    }
    if (pads[1]) {
      var interval = chord[(chordIndex + 1) % chord.length] || 7;
      pads[1].frequency.setTargetAtTime(root * Math.pow(2, interval / 12), now, 2.5);
    }
  }

  function scheduleChord() {
    if (!engine.active) {
      return;
    }
    chordIndex = (chordIndex + 1) % chord.length;
    setChord(chord[chordIndex]);
    var delay = 12000 + Math.floor(Math.random() * 12000);
    engine.timers.push(setTimeout(scheduleChord, delay));
  }

  setChord(chord[0]);
  scheduleChord();

  function triggerNote(freq, duration, gainValue, type) {
    var now = ctx.currentTime;
    var osc = ctx.createOscillator();
    var gain = ctx.createGain();
    osc.type = type || "sine";
    osc.frequency.value = freq;
    gain.gain.setValueAtTime(0.0001, now);
    gain.gain.exponentialRampToValueAtTime(gainValue, now + 0.02);
    gain.gain.exponentialRampToValueAtTime(0.0001, now + duration);
    osc.connect(gain).connect(master);
    gain.connect(effectSend);
    osc.start(now);
    osc.stop(now + duration + 0.05);
    engine.nodes.push(osc, gain);
  }

  function scheduleArp() {
    if (!engine.active) {
      return;
    }
    var base = theme.base || 110;
    var step = scale[Math.floor(Math.random() * scale.length)];
    var octave = Math.random() < 0.6 ? 12 : 0;
    var freq = base * Math.pow(2, (step + octave) / 12);
    triggerNote(freq, stepTime * 0.8, 0.045, "triangle");
    var nextDelay = stepTime * (Math.random() < 0.2 ? 1.5 : 1);
    engine.timers.push(setTimeout(scheduleArp, nextDelay * 1000));
  }

  function schedulePulse() {
    if (!engine.active) {
      return;
    }
    var base = theme.base || 110;
    var pulseStep = chord[Math.floor(Math.random() * chord.length)];
    var freq = base * Math.pow(2, (pulseStep - 12) / 12);
    triggerNote(freq, stepTime * 0.6, theme.pulseGain || 0.08, "sawtooth");
    var delayMs = stepTime * (Math.random() < 0.3 ? 2 : 1) * 1000;
    engine.timers.push(setTimeout(schedulePulse, delayMs));
  }

  scheduleArp();
  schedulePulse();

  function spawnSparkle() {
    if (!engine.active) {
      return;
    }
    var now = ctx.currentTime;
    var osc = ctx.createOscillator();
    osc.type = "triangle";
    var gain = ctx.createGain();
    var base = theme.base || 110;
    var steps = [0, 3, 5, 7, 10, 12];
    var step = steps[Math.floor(Math.random() * steps.length)];
    osc.frequency.value = base * Math.pow(2, (step + 12) / 12);
    gain.gain.setValueAtTime(0, now);
    gain.gain.linearRampToValueAtTime(theme.sparkleGain || 0.04, now + 0.02);
    gain.gain.exponentialRampToValueAtTime(0.0001, now + 1.6);
    osc.connect(gain).connect(master);
    gain.connect(effectSend);
    osc.start(now);
    osc.stop(now + 2);
    engine.nodes.push(osc, gain);
    var nextDelay = (theme.sparkleMin || 2000) + Math.random() * ((theme.sparkleMax || 3200) - (theme.sparkleMin || 2000));
    engine.timers.push(setTimeout(spawnSparkle, nextDelay));
  }

  spawnSparkle();

  var noiseBuffer = ctx.createBuffer(1, ctx.sampleRate * 2, ctx.sampleRate);
  var noiseData = noiseBuffer.getChannelData(0);
  for (var i = 0; i < noiseData.length; i++) {
    noiseData[i] = (Math.random() * 2 - 1) * 0.35;
  }
  var noise = ctx.createBufferSource();
  noise.buffer = noiseBuffer;
  noise.loop = true;
  var noiseFilter = ctx.createBiquadFilter();
  noiseFilter.type = "lowpass";
  noiseFilter.frequency.value = theme.filterBase ? theme.filterBase * 0.6 : 240;
  var noiseGain = ctx.createGain();
  noiseGain.gain.value = theme.noiseGain || 0.02;
  noise.connect(noiseFilter).connect(noiseGain).connect(master);
  noiseGain.connect(effectSend);
  noise.start();
  engine.nodes.push(noise, noiseFilter, noiseGain);

  return true;
};

setup.updateBackground = function () {
  var title = State.passage && State.passage.title ? String(State.passage.title) : "";
  var loc = State.variables.location ? String(State.variables.location) : "";
  var seedSource = (loc ? loc + "|" : "") + title;
  if (!seedSource) {
    seedSource = "default";
  }
  var hash = 0;
  for (var i = 0; i < seedSource.length; i++) {
    hash = ((hash << 5) - hash) + seedSource.charCodeAt(i);
    hash |= 0;
  }
  var rng = function () {
    hash = (hash * 9301 + 49297) % 233280;
    return Math.abs(hash) / 233280;
  };

  var themeKey = setup.getMusicKey();
  var themes = {
    Brinstar: { base: 115, range: 50 },
    Norfair: { base: 18, range: 25 },
    Tourian: { base: 210, range: 30 },
    Default: { base: 240, range: 60 }
  };
  var theme = themes[themeKey] || themes.Default;

  var hue = (theme.base + Math.floor((rng() - 0.5) * theme.range) + 360) % 360;
  var hue2 = (hue + 40 + Math.floor(rng() * 40)) % 360;
  var hue3 = (hue + 140 + Math.floor(rng() * 50)) % 360;
  var x1 = Math.floor(rng() * 60) + 20;
  var y1 = Math.floor(rng() * 60) + 20;
  var x2 = Math.floor(rng() * 60) + 20;
  var y2 = Math.floor(rng() * 60) + 20;

  var bg = "";
  var fx1 = "";
  var fx2 = "";

  if (themeKey === "Norfair") {
    bg = [
      "radial-gradient(circle at " + x1 + "% " + y1 + "%, hsla(" + hue2 + ", 70%, 28%, 0.55), transparent 60%)",
      "linear-gradient(160deg, hsl(" + hue + ", 55%, 10%), hsl(" + hue2 + ", 60%, 16%))"
    ].join(",");
    fx1 = [
      "radial-gradient(circle at " + x2 + "% " + y2 + "%, hsla(" + hue3 + ", 80%, 35%, 0.4), transparent 55%)",
      "radial-gradient(circle at " + y1 + "% " + x1 + "%, hsla(" + hue2 + ", 70%, 30%, 0.3), transparent 60%)"
    ].join(",");
    fx2 = "repeating-linear-gradient(0deg, rgba(255,120,30,0.12) 0 2px, rgba(0,0,0,0.2) 2px 4px)";
  } else if (themeKey === "Tourian") {
    bg = [
      "radial-gradient(circle at " + x1 + "% " + y1 + "%, hsla(" + hue2 + ", 45%, 25%, 0.5), transparent 60%)",
      "linear-gradient(145deg, hsl(" + hue + ", 35%, 10%), hsl(" + hue2 + ", 35%, 16%))"
    ].join(",");
    fx1 = [
      "radial-gradient(circle at " + x2 + "% " + y2 + "%, hsla(" + hue3 + ", 45%, 30%, 0.25), transparent 65%)",
      "radial-gradient(circle at " + y2 + "% " + x1 + "%, hsla(" + hue2 + ", 40%, 28%, 0.25), transparent 70%)"
    ].join(",");
    fx2 = "repeating-linear-gradient(180deg, rgba(120,200,255,0.14) 0 1px, rgba(0,0,0,0.25) 1px 3px)";
  } else if (themeKey === "Brinstar") {
    bg = [
      "radial-gradient(circle at " + x1 + "% " + y1 + "%, hsla(" + hue2 + ", 40%, 26%, 0.6), transparent 60%)",
      "radial-gradient(circle at " + x2 + "% " + y2 + "%, hsla(" + hue3 + ", 35%, 20%, 0.55), transparent 65%)",
      "linear-gradient(145deg, hsl(" + hue + ", 35%, 10%), hsl(" + hue2 + ", 30%, 16%))"
    ].join(",");
    fx1 = [
      "radial-gradient(circle at " + x2 + "% " + y1 + "%, hsla(" + hue2 + ", 50%, 32%, 0.35), transparent 65%)",
      "radial-gradient(circle at " + y2 + "% " + x1 + "%, hsla(" + hue3 + ", 45%, 26%, 0.3), transparent 70%)"
    ].join(",");
    fx2 = "repeating-linear-gradient(120deg, rgba(0,0,0,0.2) 0 2px, rgba(255,255,255,0.03) 2px 4px)";
  } else {
    bg = [
      "linear-gradient(160deg, hsl(" + hue + ", 20%, 8%), hsl(" + hue2 + ", 20%, 12%))"
    ].join(",");
    fx1 = [
      "radial-gradient(circle at 20% 30%, rgba(255,255,255,0.12) 0 2px, transparent 3px)",
      "radial-gradient(circle at 70% 20%, rgba(255,255,255,0.08) 0 2px, transparent 3px)",
      "radial-gradient(circle at 80% 70%, rgba(255,255,255,0.1) 0 2px, transparent 3px)"
    ].join(",");
    fx2 = "repeating-linear-gradient(45deg, rgba(255,255,255,0.03) 0 2px, rgba(0,0,0,0.08) 2px 4px)";
  }

  document.body.setAttribute("data-room-theme", themeKey);
  document.documentElement.style.setProperty("--room-bg", bg);
  document.documentElement.style.setProperty("--room-fx-1", fx1);
  document.documentElement.style.setProperty("--room-fx-2", fx2);
};

setup.bindMusicControls = function () {
  if (setup._musicBound) {
    return;
  }
  jQuery(document).on("click", "#music-toggle", function (event) {
    event.preventDefault();
    State.variables.musicEnabled = State.variables.musicEnabled ? 0 : 1;
    setup.updateMusic();
  });
  jQuery(document).on("input change", "#music-volume", function () {
    var value = Number(this.value);
    if (!Number.isFinite(value)) {
      value = 0.4;
    }
    State.variables.musicVolume = Math.min(1, Math.max(0, value));
    setup.updateMusic();
  });
  setup._musicBound = true;
};

setup.bindMapMarkerControls = function () {
  if (setup._markerBound) {
    return;
  }
  jQuery(document).on("click", "#map-marker-toggle", function (event) {
    event.preventDefault();
    var id = setup.getCurrentRoomId();
    if (!id) {
      return;
    }
    var markers = State.variables.mapMarkers;
    if (!markers || typeof markers !== "object" || Array.isArray(markers)) {
      markers = setup.normalizeMarkers(markers);
      State.variables.mapMarkers = markers;
    }
    var entry = markers[id];
    var colorIndex = 0;
    if (entry && typeof entry === "object" && Number.isFinite(Number(entry.color))) {
      colorIndex = Number(entry.color);
    }
    var count = Number(setup.markerColorCount) || (setup.markerColors ? setup.markerColors.length : 4);
    if (entry) {
      colorIndex = (colorIndex + 1) % count;
    }
    markers[id] = { color: colorIndex, created: entry && entry.created ? entry.created : Date.now() };
    setup.updateHud();
  });
  jQuery(document).on("click", ".map-marker-remove", function (event) {
    event.preventDefault();
    var id = jQuery(this).attr("data-marker");
    if (!id) {
      return;
    }
    if (State.variables.mapMarkers && State.variables.mapMarkers[id]) {
      delete State.variables.mapMarkers[id];
      setup.updateHud();
    }
  });
  setup._markerBound = true;
};

setup.updateMapMarkersHud = function () {
  var $toggle = jQuery("#map-marker-toggle");
  var $list = jQuery("#map-marker-list");
  if ($toggle.length === 0 && $list.length === 0) {
    return;
  }
  var id = setup.getCurrentRoomId();
  var markers = State.variables.mapMarkers || {};
  var has = id && markers[id];
  if ($toggle.length) {
    $toggle.text(has ? "Cycle Marker" : "Mark Room");
    $toggle.toggleClass("active", !!has);
  }
  if ($list.length) {
    var keys = Object.keys(markers).sort();
    if (keys.length === 0) {
      $list.text("No markers yet.");
      return;
    }
    var max = 6;
    var shown = keys.slice(0, max);
    var extra = keys.length - max;
    var parts = shown.map(function (roomId) {
      var entry = markers[roomId];
      var colorIndex = 0;
      if (entry && typeof entry === "object" && Number.isFinite(Number(entry.color))) {
        colorIndex = Number(entry.color);
      }
      return '<span class="marker-item marker-color-' + colorIndex + '">' + roomId + '<a href="#" class="map-marker-remove" data-marker="' + roomId + '">x</a></span>';
    });
    if (extra > 0) {
      parts.push("<span class=\"marker-item\">+" + extra + " more</span>");
    }
    $list.html("Marked: " + parts.join(" "));
  }
};

setup.ensureMapModal = function () {
  if (jQuery("#map-modal").length) {
    return;
  }
  var modalHtml = [
    '<div id="map-modal" aria-hidden="true">',
    '  <div class="map-modal-content">',
    '    <div class="map-modal-header">',
    '      <div class="map-modal-title">Map</div>',
    '      <a href="#" class="map-modal-close">Close</a>',
    '    </div>',
    '    <div class="map-modal-body"></div>',
    '  </div>',
    '</div>'
  ].join("");
  jQuery("body").append(modalHtml);
};

setup.showMapModal = function () {
  var mapInfo = setup.getMapInfo();
  if (!mapInfo) {
    return;
  }
  setup.ensureMapModal();
  var $modal = jQuery("#map-modal");
  $modal.find(".map-modal-title").text(mapInfo.name + " Map");
  $modal.find(".map-modal-body").html(setup.renderMap(mapInfo));
  $modal.addClass("open").attr("aria-hidden", "false");
};

setup.hideMapModal = function () {
  var $modal = jQuery("#map-modal");
  if ($modal.length) {
    $modal.removeClass("open").attr("aria-hidden", "true");
  }
};

setup.bindMapModalControls = function () {
  if (setup._mapModalBound) {
    return;
  }
  jQuery(document).on("click", "#map-view-toggle", function (event) {
    event.preventDefault();
    setup.showMapModal();
  });
  jQuery(document).on("click", "#map-modal", function (event) {
    if (event.target && event.target.id === "map-modal") {
      setup.hideMapModal();
    }
  });
  jQuery(document).on("click", ".map-modal-close", function (event) {
    event.preventDefault();
    setup.hideMapModal();
  });
  jQuery(document).on("keydown", function (event) {
    if (event.key === "Escape") {
      setup.hideMapModal();
    }
  });
  setup._mapModalBound = true;
};

setup.enhanceRoomLayout = function () {
  var $root = jQuery("#passage");
  if ($root.length === 0) {
    $root = jQuery(".passage").first();
  }
  if ($root.length === 0) {
    return;
  }
  if ($root.find(".room-panel").length) {
    return;
  }
  var enemy = setup.getEnemy ? setup.getEnemy() : null;
  if (enemy) {
    return;
  }
  if (setup.hasBattleOverLink && setup.hasBattleOverLink($root)) {
    return;
  }

  var directionRe = /\b(north|south|east|west|up|down|back|return|retrace|leave|exit|head|go)\b/i;
  var shouldWrap = false;
  $root.find("a").each(function () {
    var $link = jQuery(this);
    var label = $link.text().trim();
    if (!label) {
      return;
    }
    if (/^fight\b/i.test(label)) {
      shouldWrap = true;
      return false;
    }
    var target = $link.attr("data-passage") || "";
    if (/^\d+$/.test(target) && directionRe.test(label)) {
      shouldWrap = true;
      return false;
    }
  });
  if (!shouldWrap) {
    return;
  }

  var $panel = jQuery('<div class="room-panel"></div>');
  var $text = jQuery('<div class="room-text"></div>');
  var $actions = jQuery('<div class="room-actions"></div>');
  var contents = $root.contents().detach();
  $text.append(contents);
  $panel.append($text).append($actions);
  $root.append($panel);

  var navLinks = [];
  $text.find("a").each(function () {
    var $link = jQuery(this);
    var label = $link.text().trim();
    if (!label) {
      return;
    }
    if (/^fight\b/i.test(label)) {
      navLinks.push($link);
      return;
    }
    var target = $link.attr("data-passage") || "";
    if (!/^\d+$/.test(target)) {
      return;
    }
    if (!directionRe.test(label)) {
      return;
    }
    navLinks.push($link);
  });

  navLinks.forEach(function ($link) {
    var $parent = $link.parent();
    $link.addClass("story-action room-action").detach().appendTo($actions);
    if ($parent.is("p") && $parent.text().trim() === "" && $parent.children().length === 0) {
      $parent.remove();
    }
  });

  if ($actions.children().length === 0) {
    $actions.remove();
  }
};

setup.updateMusic = function () {
  var v = State.variables;
  if (!Number.isFinite(Number(v.musicEnabled))) {
    v.musicEnabled = 1;
  }
  if (!Number.isFinite(Number(v.musicVolume))) {
    v.musicVolume = 0.4;
  }

  var key = setup.getMusicKey();
  var useProcedural = setup.musicMode === "procedural";
  var canProcedural = !!(window.AudioContext || window.webkitAudioContext);
  if (useProcedural && canProcedural) {
    var ctx = setup.ensureAudioContext();
    if (ctx && ctx.state === "suspended") {
      ctx.resume().catch(function () {});
    }
    if (Number(v.musicEnabled) === 1) {
      setup.startProceduralMusic(key);
    } else {
      setup.stopProceduralMusic();
    }
  } else {
    setup.stopProceduralMusic();
  }

  var $status = jQuery("#music-status");
  var $track = jQuery("#music-track");
  var $toggle = jQuery("#music-toggle");
  if ($status.length) {
    $status.text(Number(v.musicEnabled) === 1 ? "On" : "Off");
  }
  if ($track.length) {
    var label = setup.musicThemes[key] ? setup.musicThemes[key].label : "Music";
    $track.text(label);
  }
  if ($toggle.length) {
    $toggle.text(Number(v.musicEnabled) === 1 ? "?" : "?X");
    $toggle.toggleClass("off", Number(v.musicEnabled) !== 1);
    var label = (setup.musicThemes[key] ? setup.musicThemes[key].label : "Music");
    $toggle.attr("title", label + (Number(v.musicEnabled) === 1 ? " (On)" : " (Off)"));
  }
};

setup.trackRoomVisit = function (title) {
  if (!title) {
    return;
  }
  var id = setup.normalizeRoomId(title);
  if (!/^\d+$/.test(id)) {
    return;
  }
  var v = State.variables;
  if (!Array.isArray(v.visitedRooms)) {
    v.visitedRooms = [];
  }
  if (!v.visitedRooms.includes(id)) {
    v.visitedRooms.push(id);
  }
};

setup.getMapInfo = function () {
  var loc = State.variables.location;
  if (!loc) {
    return null;
  }
  var key = String(loc).trim();
  return setup.mapDefs[key] || null;
};

setup.hasMapUnlocked = function (mapInfo) {
  if (!mapInfo || !mapInfo.name) {
    return false;
  }
  var items = Array.isArray(State.variables.items) ? State.variables.items : [];
  if (mapInfo.name === "Brinstar") {
    return items.includes("BrinstarMap ");
  }
  if (mapInfo.name === "Norfair") {
    return items.includes("NorfairMap ");
  }
  return false;
};

setup.renderMap = function (mapInfo) {
  if (!mapInfo || !mapInfo.data || mapInfo.data.length === 0) {
    return '<div class="map-empty">Map data unavailable.</div>';
  }
  var cols = mapInfo.cols || 7;
  var mapUnlocked = setup.hasMapUnlocked(mapInfo);

  var v = State.variables;
  if (!Array.isArray(v.visitedRooms)) {
    v.visitedRooms = setup.normalizeRoomArray(v.visitedRooms);
  }
  var addVisited = function (id) {
    if (!id || !/^\d+$/.test(id)) {
      return;
    }
    if (!v.visitedRooms.includes(id)) {
      v.visitedRooms.push(id);
    }
  };
  State.history.forEach(function (moment) {
    var id = setup.normalizeRoomId(moment.title);
    addVisited(id);
  });
  var currentId = "";
  if (v.lastRoom) {
    currentId = setup.normalizeRoomId(v.lastRoom);
  }
  if (!currentId && State.passage && State.passage.title) {
    currentId = setup.normalizeRoomId(State.passage.title);
  }
  addVisited(currentId);

  var visited = new Set(v.visitedRooms);
  var markers = v.mapMarkers || {};
  var totalCells = mapInfo.data.length;
  var visibleCells = new Set();
  var showLabels = !mapUnlocked;
  if (!mapUnlocked) {
    for (var vi = 0; vi < totalCells; vi++) {
      var vval = Number(mapInfo.data[vi]);
      if (vval > 0) {
        var vid = String(vval).padStart(2, "0");
        if (visited.has(vid)) {
          visibleCells.add(vi);
        }
      }
    }
  }

  var cells = [];
  for (var i = 0; i < mapInfo.data.length; i++) {
    var value = Number(mapInfo.data[i]);
    var classes = ["map-cell"];
    var label = "&nbsp;";

    if (!mapUnlocked && visited.size > 0 && !visibleCells.has(i)) {
      classes.push("map-cell-hidden");
      label = "&nbsp;";
    } else if (value === 0) {
      classes.push("map-cell-empty");
      label = showLabels ? "x" : "&nbsp;";
    } else {
      var id = String(value).padStart(2, "0");
      if (currentId && currentId === id) {
        classes.push("map-cell-current");
        label = showLabels ? id : "&nbsp;";
      } else if (visited.has(id)) {
        classes.push("map-cell-visited");
        label = showLabels ? id : "&nbsp;";
      } else {
        classes.push("map-cell-unknown");
        label = "&nbsp;";
      }

      if (markers && markers[id]) {
        var markerEntry = markers[id];
        var markerColor = 0;
        if (markerEntry && typeof markerEntry === "object" && Number.isFinite(Number(markerEntry.color))) {
          markerColor = Number(markerEntry.color);
        }
        classes.push("map-cell-marked");
        classes.push("map-cell-marked-" + (markerColor % (Number(setup.markerColorCount) || 4)));
      }
    }

    cells.push('<span class="' + classes.join(" ") + '">' + label + "</span>");
  }

  var rows = Math.ceil(mapInfo.data.length / cols);
  var gridStyle = ' style="grid-template-columns: repeat(' + cols + ', var(--map-cell-width));"';
  var frameClasses = ["map-frame"];
  var frameStyle = ' style="--map-cols:' + cols + '; --map-rows:' + rows + ';"';
  if (mapUnlocked && mapInfo.image) {
    frameClasses.push("map-frame-image");
    frameStyle = ' style="background-image: url(' + mapInfo.image + '); --map-cols:' + cols + '; --map-rows:' + rows + ';"';
  }
  return '<div class="' + frameClasses.join(" ") + '"' + frameStyle + '><div class="map-grid"' + gridStyle + ">" + cells.join("") + "</div></div>";
};

setup.renderCombat = function (enemy) {
  if (!enemy) {
    return "";
  }

  var samusImg = setup.assetPath + "IntroSamus.webp";
  var enemyBlock = "";
  if (enemy.image) {
    enemyBlock = '<img class="combat-enemy" src="' + setup.assetPath + enemy.image + '" alt="' + enemy.name + '">';
  } else {
    var placeholder = '<svg xmlns="http://www.w3.org/2000/svg" width="160" height="200" viewBox="0 0 160 200">'
      + '<rect width="160" height="200" fill="#141414" stroke="#555" stroke-width="2" />'
      + '<text x="50%" y="50%" fill="#ccc" font-family="monospace" font-size="14" text-anchor="middle" dominant-baseline="middle">'
      + enemy.name + '</text></svg>';
    enemyBlock = '<img class="combat-enemy" src="data:image/svg+xml;utf8,' + encodeURIComponent(placeholder) + '" alt="' + enemy.name + '">';
  }

  return [
    '<div class="combat-hud">',
    '<div class="combat-actor">',
    '<div class="combat-name">Samus Aran</div>',
    '<img class="combat-samus" src="' + samusImg + '" alt="Samus Aran">',
    '</div>',
    '<div class="combat-actor">',
    '<div class="combat-name">' + enemy.name + "</div>",
    enemyBlock,
    '</div>',
    '</div>'
  ].join("");
};

setup.hasBattleOverLink = function ($source) {
  if (!$source || $source.length === 0) {
    return false;
  }
  return $source.find("a").filter(function () {
    return /battle is over|game over/i.test(jQuery(this).text());
  }).length > 0;
};

setup.enhanceCombat = function () {
  var $root = jQuery("#passage");
  if ($root.length === 0) {
    $root = jQuery(".passage").first();
  }
  if ($root.length === 0) {
    return;
  }

  var v = State.variables;
  var $source = $root.find(".combat-source");
  var hasBattleOver = setup.hasBattleOverLink($source.length ? $source : $root);
  var enemy = setup.getEnemy();
  if (!enemy && hasBattleOver && v._combatEnemy) {
    for (var i = 0; i < setup.enemyDefs.length; i++) {
      var def = setup.enemyDefs[i];
      if (def.name === v._combatEnemy || def.key === v._combatEnemy) {
        enemy = def;
        break;
      }
    }
    if (!enemy) {
      enemy = { key: v._combatEnemy, name: v._combatEnemy, image: "" };
    }
  }

  var combatActive = Number(v.combat) === 1 && !!enemy;
  if (!combatActive && !hasBattleOver) {
    return;
  }
  if (!enemy) {
    $root.find(".combat-scene").remove();
    if ($source.length) {
      $source.removeClass("combat-source").removeAttr("aria-hidden");
    }
    if (setup.updateHud) {
      setup.updateHud();
    }
    return;
  }
  if ($source.length === 0) {
    $source = jQuery('<div class="combat-source" aria-hidden="true"></div>');
    $source.append($root.contents());
    $root.empty().append($source);
  }
  if (setup.ensureCombatObserver) {
    setup.ensureCombatObserver();
  }
  if ($root.data("combatEnhancing")) {
    return;
  }
  $root.data("combatEnhancing", true);

  var text = $source.text();
  var levelMatch = text.match(/(?:Combat|Command) Level\s*([IVX]+)/i);
  var level = levelMatch ? levelMatch[1] : "";

  if (v._combatEnemy !== enemy.name) {
    v._combatEnemy = enemy.name;
    v._combatLogSamus = [];
    v._combatLogEnemy = [];
    v._combatLog = [];
    v._combatLogCounts = {};
  }
  if (!Array.isArray(v._combatLogSamus)) {
    v._combatLogSamus = [];
  }
  if (!Array.isArray(v._combatLogEnemy)) {
    v._combatLogEnemy = [];
  }
  if (!v._combatLogCounts || typeof v._combatLogCounts !== "object") {
    v._combatLogCounts = {};
  }

  var actionItems = [];
  var actionLabels = [];
  var actionByKey = new Map();
  var actionIndex = 0;
  $source.find("a").each(function () {
    var $link = jQuery(this);
    var label = $link.text().trim();
    if (!label) {
      return;
    }
    var key = label.toLowerCase();

    var $container = $link;
    var $parent = $link.parent();
    if ($parent.length && $parent.data("clickEvent")) {
      $container = $parent;
    }
    actionByKey.set(key, {
      label: label,
      link: $link,
      container: $container,
      index: actionIndex++
    });
  });
  actionItems = Array.from(actionByKey.values()).sort(function (a, b) {
    return a.index - b.index;
  });
  actionLabels = actionItems.map(function (item) {
    return item.label;
  });

  if (!combatActive && hasBattleOver) {
    actionItems = actionItems.filter(function (item) {
      return /battle is over|game over/i.test(item.label);
    });
    actionLabels = actionItems.map(function (item) {
      return item.label;
    });
  }

  function isRunLabel(label) {
    return /^(run\b|run away\b|run,? or do nothing\b|ignore\b|ignore it\b|do nothing\b)/i.test(label);
  }

  function runPriority(label) {
    if (/run away/i.test(label)) {
      return 3;
    }
    if (/run,? or do nothing/i.test(label)) {
      return 2;
    }
    return 1;
  }

  var runItems = actionItems.filter(function (item) {
    return isRunLabel(item.label);
  });
  if (runItems.length > 1) {
    runItems.sort(function (a, b) {
      return runPriority(b.label) - runPriority(a.label);
    });
    var keepRun = runItems[0];
    actionItems = actionItems.filter(function (item) {
      return !isRunLabel(item.label) || item === keepRun;
    });
  }
  actionLabels = actionItems.map(function (item) {
    return item.label;
  });

  if (v._combatExitOnOver && hasBattleOver) {
    var autoExitLink = $source.find("a").filter(function () {
      return /battle is over|game over/i.test(jQuery(this).text());
    }).first();
    if (autoExitLink.length) {
      v._combatExitOnOver = false;
      var exitTarget = autoExitLink[0];
      try {
        exitTarget.dispatchEvent(new MouseEvent("click", { bubbles: true, cancelable: true, view: window }));
      } catch (err) {
        if (typeof exitTarget.click === "function") {
          exitTarget.click();
        }
      }
      $root.data("combatEnhancing", false);
      return;
    }
  }

  var $clone = $source.clone();
  $clone.find("a").remove();
  $clone.find("#combat-hud, .combat-scene").remove();
  $clone.find("br").replaceWith("\n");
  var rawText = $clone.text();
  var lines = rawText.split(/\n+/).map(function (line) {
    return line.trim();
  }).filter(Boolean);

  var actionRegex = /^(fight|run|ignore|attack|use|fire|beam|missile|bomb|screw|escape|continue|leave|wait|freeze|shoot|blast)/i;
  var actionSet = new Set(actionLabels.map(function (l) { return l.trim(); }));
  lines = lines.filter(function (line) {
    if (actionSet.has(line)) {
      return false;
    }
    if (actionRegex.test(line) && line.length < 50) {
      return false;
    }
    return true;
  });

  var logEntries = [];
  var currentCounts = {};
  lines.forEach(function (line) {
    var side = /(?:-\\d+\\s*Energy|take damage|I take|I suffer|I am hit|my aim|misses|I fail|my attack fails|my attack misses|escape fails|I can\\'t)/i.test(line)
      ? "samus"
      : "enemy";
    var key = side + "|" + line;
    currentCounts[key] = (currentCounts[key] || 0) + 1;
    var loggedCount = v._combatLogCounts && v._combatLogCounts[key] ? v._combatLogCounts[key] : 0;
    if (currentCounts[key] > loggedCount) {
      logEntries.push({ text: line, side: side });
    }
  });
  v._combatLogCounts = currentCounts;

  if (!Array.isArray(v._combatLog)) {
    v._combatLog = [];
  }
  if (combatActive && !v._combatActive) {
    v._combatLog = [];
    v._combatLogSamus = [];
    v._combatLogEnemy = [];
    v._combatLogCounts = {};
  }
  v._combatActive = combatActive || hasBattleOver;

  function pushLog(arr, entry) {
    if (!entry || !entry.text) {
      return;
    }
    var last = arr.length ? arr[arr.length - 1] : null;
    if (last && last.text === entry.text && last.side === entry.side) {
      return;
    }
    arr.push(entry);
    if (arr.length > 20) {
      arr.shift();
    }
  }

  logEntries.forEach(function (entry) { pushLog(v._combatLog, entry); });

  function renderLog(arr) {
    if (!arr || arr.length === 0) {
      return '<div class="log-entry log-old">...</div>';
    }
    return arr.map(function (entry, idx) {
      var isOld = idx < arr.length - 1;
      var cls = 'log-entry' + (isOld ? ' log-old' : '') + (entry.side ? ' log-' + entry.side : '');
      return '<div class="' + cls + '">' + entry.text + '</div>';
    }).join("");
  }

  var samusEnergy = Number(State.variables.energy || 0);
  var samusMax = Number(State.variables.maxEnergy || 0);

  var $scene = jQuery('<div class="combat-scene"></div>');
  var $top = jQuery('<div class="combat-top"></div>');
  var $vs = jQuery('<div class="combat-vs">VS</div>');
  var portraitsHtml = setup.renderCombat(enemy);
  var $portraits = jQuery(portraitsHtml);

  var $samusCard = $portraits.find(".combat-actor").first();
  var $enemyCard = $portraits.find(".combat-actor").last();

  $samusCard.append('<div class="combat-hp">Energy ' + samusEnergy + '/' + samusMax + '</div>');
  $enemyCard.append('<div class="combat-hp">' + (level ? "Combat Lv " + level : "Enemy") + '</div>');

  $top.append($samusCard).append($vs).append($enemyCard);

  var $panels = jQuery('<div class="combat-panels"></div>');
  var $logPanel = jQuery('<div class="combat-panel combat-panel-log"><div class="combat-panel-title">Combat Log</div><div class="combat-log combat-log-combined">' + renderLog(v._combatLog) + '</div></div>');
  var $actions = jQuery('<div class="combat-actions"></div>');

  var actionSeen = new Set();
  actionItems.forEach(function (item) {
    var label = item.label;
    var key = label.toLowerCase();
    if (actionSeen.has(key)) {
      return;
    }
    actionSeen.add(key);
    var $proxy = jQuery('<a href="#" class="combat-action"></a>').text(label);
    $proxy.on("click", function (event) {
      event.preventDefault();
      event.stopPropagation();
      v._combatExitOnOver = isRunLabel(label);
      var target = (item.link && item.link.length) ? item.link[0] : (item.container && item.container.length ? item.container[0] : null);
      if (target) {
        try {
          target.dispatchEvent(new MouseEvent("click", { bubbles: true, cancelable: true, view: window }));
        } catch (err) {
          if (typeof target.click === "function") {
            target.click();
          }
        }
      }
    });
    $actions.append($proxy);
  });
  $logPanel.append($actions);

  $panels.append($logPanel);
  $scene.append($top).append($panels);

  $root.find(".combat-scene").remove();
  $root.prepend($scene);
  setTimeout(function () {
    var logEl = $scene.find(".combat-log").get(0);
    if (logEl) {
      logEl.scrollTop = logEl.scrollHeight;
    }
  }, 0);
  $root.data("combatEnhancing", false);
  if (setup.updateHud) {
    setup.updateHud();
  }
};

setup.handleCombatState = function () {
  var $root = jQuery("#passage");
  if ($root.length === 0) {
    $root = jQuery(".passage").first();
  }
  if ($root.length === 0) {
    return;
  }

  var currentTitle = State.passage && State.passage.title ? String(State.passage.title).trim() : "";
  if (/^\d+$/.test(currentTitle) || /^Debug Room/i.test(currentTitle) || /Combat Test$/i.test(currentTitle)) {
    State.variables.lastRoom = currentTitle;
    if (setup.trackRoomVisit) {
      setup.trackRoomVisit(currentTitle);
    }
  }
  if (Number(State.variables.combat) === 1 && !/^\d+$/.test(currentTitle)) {
    for (var i = State.history.length - 1; i >= 0; i--) {
      var histTitle = State.history[i] && State.history[i].title ? String(State.history[i].title).trim() : "";
      if (/^\d+$/.test(histTitle)) {
        State.variables.lastRoom = histTitle;
        break;
      }
    }
  }

  if (Number(State.variables.combat) === 1) {
    setup.enhanceCombat();
    return;
  }

  var $source = $root.find(".combat-source");
  if ($source.length && setup.hasBattleOverLink($source)) {
    setup.enhanceCombat();
    return;
  }

  $root.find(".combat-scene").remove();
  if ($source.length) {
    $source.removeClass("combat-source").removeAttr("aria-hidden");
  }
  if (State.variables) {
    State.variables._combatExitOnOver = false;
    State.variables._combatActive = false;
    State.variables._combatLog = [];
    State.variables._combatLogSamus = [];
    State.variables._combatLogEnemy = [];
    State.variables._combatLogCounts = {};
  }

  if (setup.updateHud) {
    setup.updateHud();
  }
};

setup.ensureCombatObserver = function () {
  var target = document.querySelector(".passage .combat-source");
  if (!target) {
    if (setup._combatObserver) {
      setup._combatObserver.disconnect();
      setup._combatObserver = null;
      setup._combatObserverTarget = null;
    }
    return;
  }
  if (setup._combatObserverTarget === target) {
    return;
  }
  if (setup._combatObserver) {
    setup._combatObserver.disconnect();
  }
  var scheduled = null;
  setup._combatObserver = new MutationObserver(function () {
    if (scheduled) {
      return;
    }
    scheduled = setTimeout(function () {
      scheduled = null;
      if (setup.handleCombatState) {
        setup.handleCombatState();
      } else if (setup.updateHud) {
        setup.updateHud();
      }
    }, 0);
  });
  setup._combatObserver.observe(target, { childList: true, subtree: true, characterData: true });
  setup._combatObserverTarget = target;
};

setup.updateHud = function () {
  var $hud = jQuery("#hud");
  if ($hud.length === 0) {
    return;
  }

  setup.ensureInit();

  var currentTitle = State.passage && State.passage.title ? String(State.passage.title).trim() : "";
  if (/^\d+$/.test(currentTitle) || /^Debug Room/i.test(currentTitle) || /Combat Test$/i.test(currentTitle)) {
    State.variables.lastRoom = currentTitle;
    if (setup.trackRoomVisit) {
      setup.trackRoomVisit(currentTitle);
    }
  }

  $hud.show();

  var displayStats = Number(State.variables.displayStats || 0);
  var displayMap = Number(State.variables.displayMap || 0);

  if (displayStats) {
    jQuery("#hud-stats").show();
  } else {
    jQuery("#hud-stats").hide();
  }

  setup.bindMusicControls();
  setup.bindMapMarkerControls();
  setup.bindMapModalControls();

  var energy = Number(State.variables.energy || 0);
  var maxEnergy = Number(State.variables.maxEnergy || 0);
  jQuery("#samus-energy").text(energy + "/" + maxEnergy);

  var missiles = Number(State.variables.missiles || 0);
  var maxMissiles = Number(State.variables.maxMissiles || 0);
  if (maxMissiles > 0) {
    jQuery("#samus-missiles").text(missiles + "/" + maxMissiles);
    jQuery("#samus-missiles-row").show();
  } else {
    jQuery("#samus-missiles-row").hide();
  }

  var items = Array.isArray(State.variables.items) ? State.variables.items : [];
  var itemLabels = setup.itemDefs.filter(function (def) {
    return items.includes(def.key);
  }).map(function (def) {
    return def.label;
  });
  jQuery("#samus-items").html(itemLabels.length ? itemLabels.join("<br>") : "-");

  var hasLocation = Boolean(State.variables.location);
  var forceMap = Number(State.variables.combat) === 1 && hasLocation;
  if ((displayMap || forceMap) && hasLocation) {
    jQuery("#hud-map").show();
    var mapInfo = setup.getMapInfo();
    if (mapInfo) {
      jQuery("#samus-map-label").text(mapInfo.name + " Map");
      jQuery("#samus-map").html(setup.renderMap(mapInfo));
    } else {
      jQuery("#samus-map-label").text("Map");
      jQuery("#samus-map").text("Map data unavailable.");
    }
  } else {
    jQuery("#hud-map").hide();
  }

  setup.updateMusic();
  setup.updateBackground();
  setup.updateMapMarkersHud();

  return;
};

setup.dedupeLinks = function () {
  var $root = jQuery("#passage");
  if ($root.length === 0) {
    $root = jQuery(".passage").first();
  }
  if ($root.length === 0) {
    return;
  }

  var seen = new Set();
  $root.find("a").each(function () {
    var $link = jQuery(this);
    var key = ($link.attr("data-passage") || "") + "|" + ($link.attr("href") || "") + "|" + $link.text().trim();
    if (key.trim() === "") {
      return;
    }
    if (seen.has(key)) {
      $link.remove();
      return;
    }
    seen.add(key);
  });

  $root.find("a").each(function () {
    var $link = jQuery(this);
    var label = $link.text().trim();
    if (!label) {
      return;
    }
    var $parent = $link.parent();
    if ($parent.length) {
      $parent.contents().filter(function () {
        return this.nodeType === 3 && String(this.textContent).trim().toLowerCase() === label.toLowerCase();
      }).remove();
    }
    if (/^fight\b/i.test(label)) {
      $link.addClass("story-action");
    }
  });

  $root.find("a").each(function () {
    var $link = jQuery(this);
    var $prev = $link.prevAll("a").first();
    if ($prev.length === 0) {
      return;
    }
    var text = $link.text().trim();
    if (!text) {
      return;
    }
    var prevText = $prev.text().trim();
    var between = $prev.nextUntil("a").text();
    if (text === prevText && between.trim() === "") {
      $link.remove();
    }
  });

  var optionSeen = new Set();
  $root.find("a").each(function () {
    var $link = jQuery(this);
    var text = $link.text().trim();
    if (!text) {
      return;
    }
    if (/^(fight|run|ignore)/i.test(text) || /run( away)?|do nothing|ignore it/i.test(text)) {
      var key = text.toLowerCase();
      if (optionSeen.has(key)) {
        $link.remove();
        return;
      }
      optionSeen.add(key);
    }
  });

  var passageText = $root.text();
  var battleOver = /the battle is over/i.test(passageText);
  if (battleOver && Number(State.variables.combat) === 0) {
    $root.find("a").each(function () {
      var $link = jQuery(this);
      var text = $link.text().trim();
      if (!text) {
        return;
      }
      if (/the battle is over/i.test(text)) {
        return;
      }
      if (/^(fight|run|ignore)/i.test(text) || /run( away)?|do nothing|ignore it/i.test(text)) {
        $link.remove();
      }
    });
  }
};

if (!setup._hudBound) {
  jQuery(document).on(":passageend", function () {
    setup.updateHud();
  });
  jQuery(document).on(":storyready", function () {
    setup.updateHud();
  });
  setup._hudBound = true;
}

postdisplay.hud = function () {
  setup.updateHud();
  setup.dedupeLinks();
  setup.enhanceRoomLayout();
  if (setup.handleCombatState) {
    setup.handleCombatState();
  } else {
    setup.enhanceCombat();
  }
};


:: StoryInit {"position":"100,100","size":"100,100"}
<<if !$initDone>>
<<set $maxEnergy = 30>>
<<set $energy = $maxEnergy>>
<<set $maxMissiles = 0>>
<<set $missiles = $maxMissiles>>
<<set $items = ["Normal Beam "]>>
<<set $missilePods = ["0 "]>>
<<set $energyPacks = ["0 "]>>
<<set $startRoom = "01">>
<<set $combat = 0>>
<<set $Beam = "Normal Beam ">>
<<set $Bombs = "">>
<<set $Varia = "">>
<<set $ScrewAttack = "">>
<<set $MotherBrainHealth = 10>>
<<set $displayStats = 1>>
<<set $location = "">>
<<set $displayMap = 0>>
<<set $initDone = true>>
<</if>>
<<if !$lastRoom>><<set $lastRoom = "01">><</if>>


:: PROLOGUE [Prologue] {"position":"225,100","size":"100,100"}
=><=
##PROLOGUE
<img src="assets/images/TitleScreen.webp">
Welcome to the future.

The era of Galactic Pioneering has come to a close, and the Galactic Federation has been established.

In deep space, individuals calling themselves Space Pirates have been working in the shadows. There are stories of bands of thieves who roamed the oceans during Ancient Earth 's Age of Exploration, and these Pirates have been named after those bands. Although the location of these heinous acts has changed to outer space, [[the Pirates have not changed one bit.->The Galactic Federation Police]]


:: The Galactic Federation Police [Prologue] {"position":"350,100","size":"100,100"}
The Federation Bureau organized the Galactic Federation Police to deal with the Pirates.

However, space is vast, and the Space Piratesï¿½ military potential far exceeds that of the Federation Police. 

Fed up and unable to capture the Space Pirates, the Federation Police finally posted bounties on their heads. By the time this policy became widespread, there was a profession called Space Warriors, better known as Space Hunters: in other words, bounty hunting had become socially acceptable.

The Space Hunters began to flourish, and the Pirates began to unite. The small, weak Pirate organizations were amalgamated into one large, strong group. 

[[And they became even more powerful.->A Terrible Discovery]]


:: A Terrible Discovery [Prologue] {"position":"475,100","size":"100,100"}
Now something terrible has happened!

A bio-capsule containing a Metroid, a mysterious life-form that destroyed the civilization of the distant planet SR388, has been stolen by the Pirates. 

The bio-capsule is a container growing the cell cultures of the Metroid. If the Metroid remains in this state of suspended animation, the Galaxy is safe. However, should it revive and start to multiply, [[the Metroid would be terror incarnate.->Metroids]]


:: Metroids [Prologue] {"position":"600,100","size":"100,100"}
##Metroids

At first glance, Metroids are just another species of aerial life-form. However, they have the ability to latch onto other creatures and absorb their life energy. Therefore, the Federation Bureauï¿½s Special Investigation Corps established a Metroid research team, which began studying them. 

Metroids in suspended animation can be revived after being exposed to beta rays for a period of 24 hours. The research team took a sample from the bio capsule and revived it. However, that single Metroid annihilated the research team. The Federation Bureau was at last able to eradicate that one creature by sending in the entire Third Division of the Federation Army. There is one thing that can be said for certain about the Metroids: they are an ultimate life-form with tremendous energy and [[a vitality->A Bio-Weapon]] far beyond anyone 's reckoning!


:: The Planet Zebes [Prologue] {"position":"725,100","size":"100,100"}
After a desperate search by the Federation Police, the Piratesï¿½ stronghold was discovered. It is an asteroid called Zebes. 

Zebes is controlled by Mother Brain, an enormous computer in the center of the fortress that runs all mechanical functions of the fortified asteroid.

The Federation Police mustered all of their forces to attack the fortress. 

However, the Pirates 'defenses could not be overpowered by a frontal assault. 

[[All the power of the Federation Police accomplished nothing.->A Desperate Plan]]


:: A Desperate Plan [Prologue] {"position":"850,100","size":"100,100"}
So the Federation Police placed this task in the hands of a Space Hunter. 

But this was no ordinary bounty. It came in the form of a commission sent directly from the Federation to Samus Aran, the strongest Space Hunter in the Galaxy and the one who has had the greatest success thus far. Furthermore, Samus was presented with an unbelievably large bounty. 

However, this bounty will only be issued on the condition these orders are actually carried out [[successfully...->The Galaxy's Greatest Warrior, Samus Aran]]


:: The Galaxy's Greatest Warrior, Samus Aran [Prologue] {"position":"975,100","size":"100,100"}
##The Galaxy's Greatest Warrior, Samus Aran
<img src="assets/images/IntroSamus.webp">Infused with cyborg implants throughout the entire body, Samus is a hero with superhuman abilities.

The space suit Samus uses has the ability to absorb an enemyï¿½s power - however, more detailed information is not readily available. Nevertheless, so far, Samus has on numerous occasions completed missions that were said to be impossible. This Hunter has been called a modern-day hero, and while no one knows Samus 's true identity, there are those who claim he is a man from Earth...

[[Will Samus Aran be able to accomplish this mission safely?->Game Start]]


:: 01 [Brinstar] {"position":"1100,100","size":"100,100"}
###Room A-1
<<if $combat == 1>>I have successfully infiltrated the asteroid Zebes. Zebes consists of three levels. This is Area A, Brinstar, with cavern walls of limestone and a floor of bare rock.

The capsule is thought to be located in Area C, the heart of the asteroid. There at the center of the Space Pirate organization is the giant computer called Mother Brain. My first step to accomplishing this mission is to get there as quickly as possible.

For some unknown reason, there are no human traces within Zebes. Instead, it 's crawling with bizarre life-forms. Although I donï¿½t know the thoughts of the Pirates, at the moment, it looks like this asteroid is one enormous booby trap. Traps have been set all about, and a strange life-form obstructs my progress. The enemy attacks at once!

Fight  <<linkreplace "Fight  ">><<goto "Geemer">><</linkreplace>><<else>><<set $combat = 1>>Since I can only go [[North->02]] from here, I head in that direction.<</if>>


:: 02 [Brinstar Hidden-Passage] {"position":"1225,100","size":"100,100"}
###Room A-2
At first glance, it seems I can only go North from this room. However, according to my Radar, there is also a room to the East, but its entrance is hidden.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rio">><</linkreplace>><<else>><<set $combat = 1>>Now that the enemy has been defeated, I can take a closer look at the rock wall. There is a huge rockslide covering what apparently used to be a doorway. <<if $items.includes("Bombs ")>>Perhaps if I used my Bombs... <<linkreplace "Bombs...">>The bombs blast apart the rock pile, opening up the passageway. [[I go East through the tunnel.->20]]<</linkreplace>> Curiously, more rubble fills the tunnel after I pass through.<<else>>However, I can 't do anything about it at the moment. I will have to come back later if I can locate some appropriate equipment.<</if>>

[[Go North->03]]<</if>>


:: 03 [Brinstar] {"position":"100,225","size":"100,100"}
###Room A-3
This room is different from <b >Room A-2 </b >in that it doesn 't lead anywhere but North and South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geemer">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->04]]
[[Go South->02]]<</if>>


:: 04 [Brinstar] {"position":"225,225","size":"100,100"}
###Room A-4
From this point, the room continues a long way to the West. Apart from that, there is only a Blue Door leading South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rio">><</linkreplace>><<else>><<set $combat = 1>>[[Go West->05]]
[[Go South->03]]<</if>>


:: 05 [Brinstar] {"position":"350,225","size":"100,100"}
###Room A-5
This room is part of the same chamber as <b >Room A-4 </b >, and is a corridor stretching from East to West. In addition, there is a Blue Door to the North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geemer">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->06]]
[[Go East->04]]
[[Go West->07]]<</if>>


:: 06 [Brinstar] {"position":"475,225","size":"100,100"}
###Room A-6
This room is just a passageway connecting the corridors to the South and North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">>
	<<set $random = random( 1,6)>>
	<<if $random == 6>><<goto "Zeb">><<elseif $random == 2>><<goto "Rio">><<elseif $random == 4>><<goto "Rio">><<else>><<goto "Geemer">><</if>>
<</linkreplace>><<else>><<set $combat = 1>>
The battle is over.

[[Go North->12]]
[[Go South->05]]<</if>>


:: 12 [Brinstar] {"position":"600,225","size":"100,100"}
###Room A-12
This corridor keeps going to the East and West, and there are Blue Doors to the North and South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rio">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->25]]
[[Go East->13]]
[[Go West->14]]
[[Go South->06]]<</if>>


:: 25 [Brinstar] {"position":"725,225","size":"100,100"}
###Room A-25
This corridor continues a long way to the North, and there is a Blue Door to the South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rio">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->29]]
[[Go South->12]]<</if>>


:: 29 [Brinstar Energy-Pack] {"position":"850,225","size":"100,100"}
###Room A-29
This room just runs North and South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rio">><</linkreplace>><<else>><<set $combat = 1>>The corridor extends to the North and South from this chamber.

<<if $energyPacks.includes("A ")>>[[Go North->30]]
[[Go South->25]]<<else>>An Energy Tank lies on a pedestal in the center of the room.<<linkreplace "Energy Tank ">>

<span style="color:yellow">Energy Tank A</span> acquired. <<run setup.grantEnergyPack("A ")>>(Energy restored to maximum.)

[[Go North->30]]
[[Go South->25]]<</linkreplace>><</if>><</if>>


:: 30 [Brinstar] {"position":"975,225","size":"100,100"}
###Room A-30
In this room, there is a Blue Door to the North and a corridor to the South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rio">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->31]]
[[Go South->29]]<</if>>


:: 07 [Brinstar] {"position":"1100,225","size":"100,100"}
###Room A-7
This is just a corridor stretching East and West.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geemer">><</linkreplace>><<else>><<set $combat = 1>>[[Go East->05]]
[[Go West->08]]<</if>>


:: 31 [Brinstar] {"position":"1225,225","size":"100,100"}
###Room A-31
From this room, there are Blue Doors leading to the South and West.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geemer">><</linkreplace>><<else>><<set $combat = 1>>[[Go West->36]]
[[Go South->30]]<</if>>


:: 36 {"position":"100,350","size":"100,100"}
###Room A-36
There are Blue Doors to the South and East. Aside from that, there is a corridor to the West, but I canï¿½t go that way due to the strong magnetic field.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geemer">><</linkreplace>><<else>><<set $combat = 1>>[[Go East->31]]
[[Go South->37]]<</if>>


:: 37 [Brinstar Red-Door] {"position":"225,350","size":"100,100"}
###Room A-37
This room just runs North to South. <<if hasVisited("38")>>There is an open Red Door to the South.<<else>>However, since there is a Red Door to the South, I can 't go further unless I destroy it.<</if>>

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Sidehopper">><</linkreplace>><<else>><<set $combat = 1>><<if hasVisited("38")>>The Red Door has been opened, so I have already been into the next room.

[[Go North->36]]
[[Go South->38]]<<else>><<if $missiles >1>>[[Fire 2 Missiles at the Red Door->38]]<<else>>I need at least 2 Missiles to open the Red Door. It remains sealed.<br ><br >[[Go North->36]]<</if>><</if>><</if>>


:: 20 [Secret-Room Brinstar] {"position":"350,350","size":"100,100"}
###Room A-20
To the West is the secret passage leading to <b >Room A-2 </b >. This room continues to the East. Apart from that, there is a Blue Door to the North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Sidehopper">><</linkreplace>><<else>><<set $combat = 1>><<if $kraidDefeated == 0>>[[Go North->22]]<<else>>Kraid is defeated, and the Blue Door has turned gray.<</if>>
[[Go East->21]]
[[Go West->02]]<</if>>


:: 13 [Brinstar] {"position":"475,350","size":"100,100"}
###Room A-13
This corridor continues to the West and East, and there is a Blue Door facing North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geemer">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->16]]
[[Go East->15]]
[[Go West->12]]<</if>>


:: 15 [Brinstar Dead-End] {"position":"600,350","size":"100,100"}
###Room A-15
This is a dead end. The room only leads West.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Sidehopper">><</linkreplace>><<else>><<set $combat = 1>>[[Head back West->13]]<</if>>


:: 16 [Brinstar] {"position":"725,350","size":"100,100"}
###Room A-16
This room is a corridor leading North, and there is also a Blue Door to the South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rio">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->17]]
[[Go South->13]]<</if>>


:: 17 [Brinstar Missiles] {"position":"850,350","size":"100,100"}
###Room A-17
There is a pool of some sort of caustic liquid in this room with a pedestal in the center. However, there is enough room to safely maneuver around the pool.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geemer">><</linkreplace>><<else>><<set $combat = 1>><<if $missilePods.includes("1 ")>>[[Go North->18]]<br >[[Go South->16]]<<else>>A Missile Pod lies on the pedestal, but it is easy to reach.<<linkreplace "Missile Pod ">>

(<span style="color:red">Missile Pod (1)</span> acquired.<<run setup.grantMissilePod("1 ", 2)>> Maximum Missiles increased to $maxMissiles.) 

This corridor leads North and South.

[[Go North->18]]
[[Go South->16]]<</linkreplace>><</if>><</if>>


:: 18 [Brinstar Secret-Passage] {"position":"975,350","size":"100,100"}
###Room A-18
In addition to the corridor running all the way to the South, there is a Blue Door to the North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rio">><</linkreplace>><<else>><<set $combat = 1>>Head South to <b >Room A-17 </b >or North to <b >Room A-19 </b >. In addition, my Radar reveals a passage    to a hidden room. It faces East. It is <b >Room A-39 </b >. However, I can 't seem to locate the entrance... <<linkreplace "">>However, a closer inspection reveals loose rocks near the ceiling on the East wall. I fire my Beam, and the blockage crumbles to the floor with a loud rumble. [[I climb through the passageway into Room A-39, and more rocks fill the hole behind me.->39]]<</linkreplace>>

[[Go North->19]]
[[Go South->17]]<</if>>


:: 19 [Elevator] {"position":"1100,350","size":"100,100"}
###Room A-19: Brinstar Elevator Room 
{<<linkreplace "Save game?">>
  <<if Save.save("Slot A ")>>
    Game saved!
  <<else>>
    Sorry, I couldn 't save your game.
  <</if>>
<</linkreplace>>}

I can descend to Area B, Norfair. If I donï¿½t want to go down, I can only head South.

[[Descend->41]]
[[Go South->18]]
<<set $startRoom = "01"; $location = "Brinstar ">>


:: 41 [Elevator] {"position":"1225,350","size":"100,100"}
###Room B-41: Norfair Elevator Room
{<<linkreplace "Save game?">>
  <<if Save.save("Slot A ")>>
    Game saved!
  <<else>>
    Sorry, I couldn 't save your game.
  <</if>>
<</linkreplace>>
<<set $displayStats = 1>>}

I can go up to Area A, Brinstar. If I donï¿½t want to go up or just came down, there are Blue Doors leading from this room to the North and South, so I can move forward in either direction.

[[Ascend->19]]
[[Go North->43]]
[[Go South->42]]
<<set $startRoom = "41"; $location = "Norfair ">>


:: 22 [Brinstar] {"position":"100,475","size":"100,100"}
###Room A-22: Kraid 's Room
ï¿½Warning!ï¿½

A shrill alarm sounds as an alert blares from my Command Computer.

ï¿½Warning. Warning. There are massive life signs coming from the next room. It appears to be Kraid, the boss monster of Area A, Brinstar. You can turn back from this room now. It is recommended you fight Kraid under ideal conditions.ï¿½

This room contains a series of chambers three rooms deep, each divided by a shutter door. The enemy doesn 't know I 'm here yet. Obviously, I can still flee. Of course, since this is the boss of Brinstar, Kraid will be no ordinary opponent. Should I proceed with my current equipment, or come back again later? 

[[Proceed with current equipment->Kraid 's Sidehopper]]
[[Go back at once and return later->Kraid Advice]]


:: 21 [Brinstar Dead-End] {"position":"225,475","size":"100,100"}
###Room A-21
This is a dead end. There are no passages to hidden rooms, either, and the room just continues West.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geemer">><</linkreplace>><<else>><<set $combat = 1>>[[Return West->20]]<</if>>


:: Kraid {"position":"350,475","size":"100,100"}
<<set $displayMap = 0>><img src="assets/images/Kraid.webp">Although the Doublehopper was defeated, there is no time to relax. A saurian creature appears, covered with countless enormous spikes. It is slightly over three meters in height. The Command Computer says, ï¿½This is Kraid.ï¿½

Kraidï¿½s attack method is to hurl the spikes growing throughout its body as a weapon. Without any kind of introduction, he fires his spikes.
	<<if $missiles >= 2>><<include "Kraid Weapon Missiles 1">><<else>><<include "Kraid Weapon No Missiles">><</if>>


:: 08 [Brinstar] {"position":"475,475","size":"100,100"}
###Room A-8
This is a corridor running East to West from here to room [A-4]. Apart from that, there is a Blue Door leading South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rio">><</linkreplace>><<else>><<set $combat = 1>>[[Go East->07]]
[[Go South->09]]<</if>>


:: 10 [Brinstar Hidden-Passage] {"position":"600,475","size":"100,100"}
###Room A-10: Statue Room
This room ends in a gate. In front of the gate are two large statues of grotesque beasts: a massive lizard covered in spikes and fur and a fierce multi-eyed dragon. These must be Kraid and Ridley, the bosses of Brinstar and Norfair.
<<if $GateOpen == 0>><<include "Statue Room Description">><<else>>I 've inserted Kraid and Ridley 's Key Stones. The gate to Mother Brain is now open. I can proceed to the Elevator room leading to Tourian.<br ><br ><</if>>
<<if $GateOpen == 1>>[[Go North->09]]<br >[[Go South->11]]<<elseif $items.includes("KraidStone ") && $items.includes("RidleyStone ")>>[[Go back North->09]]<<else>>[[I don 't have both Key Stones, so I must go back North to <b >Room A-9 </b >.->09]]<</if>>


:: Kraid Advice {"position":"725,475","size":"100,100"}
I should come back after replenishing my Energy and Missiles. I [[exit through the Blue Door to the South->20]] and return to <b >Room A-20.</b >


:: 39 [Brinstar Red-Door] {"position":"850,475","size":"100,100"}
###Room A-39
West is a passage leading to <b >Hidden Room A-18 </b >that I can blast with my Beam to go back through. <<if hasVisited("40")>>To the South is an opened Red Door.<<else>>To the South there is a Red Door I can 't pass through unless I use Missiles to destroy it.<</if>>

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Sidehopper">><</linkreplace>><<else>><<set $combat = 1>>{
<<if hasVisited("40")>>The Red Door has been opened, so there is nothing in the next room. [[Go back West->18]]<<else>><<if $missiles >1>>[[I fire 2 Missiles at the Red Door.->40]]<<else>>
I need at least 2 Missiles to open the Red Door. [[Go back <b >to Room A-18 </b >->18]]<</if>><</if>>
<</if>>


:: 40 [Brinstar Item-Room] {"position":"975,475","size":"100,100"}
###Room A-40
<img src="assets/images/VariaRoom.webp">I fire the Missiles at the door, which opens up to a dark, empty hole. I move into the chamber ahead, <b >Room A-40 </b >. <span style="color:red">(-2 Missiles.)</span><<set $missiles = $missiles - 2>>

The room looks like some kind of laboratory. Although the floor 's overall makeupï¿½a sort of rocky cavernï¿½hasn 't changed, an organic computer made of crystals has been installed here. There is a pedestal in the center on which some kind of tiny machine has been placed, and the ambiance is noticeably different from that of the other room. The machine placed on the pedestal is an electromagnetic barrier generator that blunts enemy attacks. I add it to my equipment.

(<span style="color:orange">Varia</span> acquired. Damage is reduced by 50%.)<<set $items = $items + [ "Varia "]>>

There is nothing else in this room.

[[Return North->39]]


:: 14 [Brinstar] {"position":"1100,475","size":"100,100"}
###Room A-14
This room is merely a corridor leading East and West. However, it seems like there might be something interesting here...

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geemer">><</linkreplace>><<else>><<set $combat = 1>>...However, there are no hidden passages leading to other rooms. In any event, this chamber only continues East and West.

[[Go East->12]]
[[Go West->23]]<</if>>


:: 23 [Brinstar] {"position":"1225,475","size":"100,100"}
###Room A-23
Like <b >Room A-14 </b >to the East, this is part of a corridor that only runs from East to West.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rio">><</linkreplace>><<else>><<set $combat = 1>>[[Go East->14]]
[[Go West->24]]<</if>>


:: 24 [Brinstar] {"position":"100,600","size":"100,100"}
###Room A-24
In this room, there is a long corridor running all the way to the East and a Blue Door to the North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rio">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->26]]
[[Go East->23]]<</if>>


:: 26 [Brinstar Hidden-Passage] {"position":"225,600","size":"100,100"}
###Room A-26
This room has only a Blue Door to the South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">>
	<<set $random = random( 1,6)>>
	<<if $random == 6>><<goto "Zeb">><<elseif $random == 2>><<goto "Rio">><<elseif $random == 4>><<goto "Rio">><<else>><<goto "Geemer">><</if>>
<</linkreplace>><<else>><<set $combat = 1>>However, Radar picks up passages to hidden rooms to the North and East.   The hidden rooms are <b >A-28 </b >and <b >A-27 </b >.      There is something odd about the rock formation on the North wall. <span class="revealsText ">I take a closer look. <<linkreplace "I take a closer look.">>There 's something odd about the rock formation here. When I move to the side, the answer is finally revealed: there is a carefully hidden passage disguised as an optical illusion! [[I proceed North to Room A-28.->28]]<</linkreplace>> </span ><<linkreplace ".     ">>After carefully searching the East wall, I discover a flaw in its surface. Shooting it reveals the hidden passage to <b >[[Room A-27 </b >. I go forward, and rubble fills the passageway behind me.->27]]<</linkreplace>>

[[Go South->24]]<</if>>


:: 27 [GAME-OVER] {"position":"350,600","size":"100,100"}
###Room A-27
There is a strange stone statue in this room with a metal plate at its feet. On the plate is written the means of defeating the Metroids. It reads, ï¿½Placing the Metroids in a frozen state will put them in suspended animation. You can destroy them at that time. However, much Energy is required to do this.ï¿½

<<if $items.includes("Bombs ")>>The statue holds the cracked shell of an egg. There is nothing else of importance in this room.<<else>>The statue is also cradling a large egg of some kind. I crack it open and find Bombs inside. (<span style="color:blue ">Bombs</span> acquired.<<set $items = $items + [ "Bombs "]>><<set $Bombs = "Bombs ">> I can now destroy weak walls to open up secret passages.)<</if>>

[[Go West->26]]


:: 28 {"position":"475,600","size":"100,100"}
###Room A-28
To the South is a hidden passage leading to the neighboring room. In addition, there is a Blue Door to the North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rio">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->32]]
[[Go South->26]]<</if>>


:: 35 [Brinstar Trap-Room] {"position":"600,600","size":"100,100"}
###Room A-35
The moment I come through the Blue Door, I start floating. I quickly grab the edge of the door, halting my movement.

...A powerful magnetic field pulls at me from West to East. There is a massive magnetic field generator attached to the West wall, running steadily. There is a vaulted pit to the East, and although it 's a considerable distance, I could definitely jump it if I were assisted by the magnetic pull. 

Aside from that, there is only the Blue Door to the South and the corridor with the vaulted pit to the East leading from this room. However, when I scan this room with my Radar, I find a secret door continuing North to a hidden room. However, I canï¿½t easily grope my way along the North wall due to the force of the magnetic pull. 

<<if hasVisited("99")>>I 've already entered the Hidden Room to the North.<<else>>Attempt to reach the hidden room.<<linkreplace "Attempt to reach the hidden room.">>{
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<goto "99">><<else>><<goto "Poor Timing!">><</if>>
<</linkreplace>><</if>>
[[Fly East through the magnetic field (2 rooms distance) to Room <b >A-36 </b >.->36]]


:: 99 [Brinstar Energy-Tank] {"position":"725,600","size":"100,100"}
###A-35 'I fire the Booster Rockets equipped to my legs and jump to the wall on the North side of the room. Although the magnetic field pulls me back, I somehow overcome it and latch on to the wall. I go through the hidden passage and head to the hidden room on the other side. An Energy Tank has been placed here. (<span style="color:yellow">Energy Tank (B)</span> acquired. Energy restored to maximum.)<<run setup.grantEnergyPack("B ")>>

I go back South again. In doing so, the flow of the magnetic field throws me two rooms East, and I rocket over to [[Room 36->36]].


:: Poor Timing! [Brinstar] {"position":"850,600","size":"100,100"}
I cling to the wall on the North side of the room, fire my booster rockets, and jump. 

However, my timing for firing the boosters was off. All of a sudden, the powerful grip of the magnetic field flowing from the generator takes hold and flings me off to the East. I land with a heavy thud. I seem to have been thrown the distance of two rooms.

[[Accessing my computer, I verify I am in <b >Room A-36 </b >.->36]]


:: Geemer {"position":"975,600","size":"100,100"}
<<set $displayMap = 0>>A Geemer approaches. The Geemer is Combat Level I.	
<<if hasVisited("Geemer")>> <<else>><<include "Scan Geemer">><</if>>
Should I attack it? Even though the Geemer is my opponent, the Normal Beam is sufficient. However, it 's OK to use a different weapon.

<<include "Fight the Geemer">>


:: Fight the Geemer {"position":"1100,600","size":"100,100"}
<<if $items.includes("Wave Beam ")>><<include "Geemer Beams Wave">><</if>>
<<if $items.includes("Ice Beam ")>><<include "Geemer Beams Ice">><</if>>
<<if $items.includes("Normal Beam ")>><<include "Geemer Beams Normal">><</if>>
Run, or do nothing to my opponent  <<linkreplace "Run, or do nothing to my opponent  ">>opponentRun<hr ><<include "Run from the Geemer">><</linkreplace>>


:: Rio {"position":"1225,600","size":"100,100"}
<<set $displayMap = 0>>An enemy creature draws near. Itï¿½s a Rio! The Rioï¿½s is Command Level II.

<<if hasVisited("Rio")>>Well, should I fight the Rio here?<<else>><<include "Scan Rio">><</if>>

<<include "Fight the Rio">>


:: Sidehopper {"position":"100,725","size":"100,100"}
<<set $displayMap = 0>>Suddenly, a Sidehopper rushes at me!

<<if hasVisited("Sidehopper")>>I will need Missiles or something more powerful than the Normal Beam to defeat it. If I have none of these weapons, I have to run away.<<else>><<include "Scan Sidehopper">><</if>>

Select a Weapon:
<<include "Fight Sidehopper">>


:: Zeb {"position":"225,725","size":"100,100"}
<<set $displayMap = 0; $lastRoom = previous()>>Something is flying at me. Itï¿½s a Zeb! Although they 're weak Command Level I enemies, they attack one after another. If I beat them, I can replenish my Energy and Missiles...

<<if hasVisited("Zeb")>><<else>><<include "Scan Zeb">><</if>>Should I fight or ignore it and run?

<<include "Fight Zeb">>


:: Scan Geemer {"position":"350,725","size":"100,100"}
<img src="assets/images/Geemer.webp">Although this is the middle of a fight, my computer will first give me an explanation of my enemy 's Command Level. A Command Level is an enemy 's strength class calculated from data entered into my Command Computer. The classes are divided into levels I through IV, with the number indicating how formidable the enemy is. I 'll apply that information to the decisions I make in battle.


:: Run from the Geemer [Combat-Ended] {"position":"475,725","size":"100,100"}
The Geemer moves slowly. Since I wonï¿½t get much from a fight, I skip this battle. I jump over my earthbound enemy and let it go past.

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><<set $displayMap = 1>>


:: Energy Ball [Combat-Ended] {"position":"600,725","size":"100,100"}
The enemy is destroyed, leaving an Energy Ball in its remains. <span style="color:yellow">(+1 Energy)</span> <<set $energy = $energy + 1>><<if $energy >$maxEnergy>><<set $energy = $maxEnergy>><</if>>

<<set $combat = 0>><<linkreplace "The battle is over.">><<goto $lastRoom>><</linkreplace>><<set $displayMap = 1>>


:: Missile [Combat-Ended] {"position":"725,725","size":"100,100"}
The enemy is destroyed, leaving a Missile in its remains. <span style="color:red">(+1 Missile)</span><<set $missiles = $missiles + 1>><<if $missiles >$maxMissiles>><<set $missiles = $maxMissiles>><</if>>

<<set $combat = 0>><<linkreplace "The battle is over.">><<goto $lastRoom>><</linkreplace>><<set $displayMap = 1>>


:: Nothing [Combat-Ended] {"position":"850,725","size":"100,100"}
The enemy vanishes, leaving <span style="color:red">nothing</span> behind.

<<set $combat = 0>><<linkreplace "The battle is over.">><<goto $lastRoom>><</linkreplace>><<set $displayMap = 1>>


:: Missed the Geemer {"position":"975,725","size":"100,100"}
However, my aim is slightly off, and the attack misses. The enemy Geemer just has the ability to crawl on the ground. However, in my rush, my aim was too far off, and I am hit by its ramming attack. I take damage. <span style="color:red">(-1 Energy)</span><<set $energy = $energy -1>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

The damage was only slight, but it was dealt by a Geemer, the weakest enemy! What should I do? Should I continue fighting? The Geemer has gotten to the wall and is coming at me again. Or is it better to just ignore it and run away? If I fight, go with a beam weapon I have.

<<include "Fight the Geemer">><</if>>


:: Ice Beam Hits Geemer {"position":"1100,725","size":"100,100"}
The Ice Beam hits the Geemer squarely. It instantly freezes. As soon as I see this, I rapidly fire the Ice Beam and destroy the frozen Geemer.
	<<set $random = random( 1,6)>>
	<<if $random == 1>><<include "Nothing">><<elseif $random == 6>><<include "Nothing">><<else>><<include "Energy Ball">><</if>>


:: Fight the Rio {"position":"1225,725","size":"100,100"}
<<if $items.includes("Wave Beam ")>><<include "Rio Beams Wave">><</if>>
	<<if $items.includes("Ice Beam ")>><<include "Rio Beams Ice">><</if>>
	<<if $items.includes("Normal Beam ")>><<include "Rio Beams Normal">><</if>>
	<<if $missiles >0>><<include "Rio Weapons Missiles">><</if>>
	<<if $items.includes("Screw Attack ")>><<include "Rio Weapons Screw Attack">><</if>>
Run Away  <<linkreplace "Run Away  ">><hr ><<include "Run from the Rio">><</linkreplace>>


:: Missed the Rio [Combat-Ended] {"position":"100,850","size":"100,100"}
My attack fails. It is impossible to match the movement speed of the Rio. Simultaneously, its talons bite into my suit. I fly back and slam to a stop at the wall. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-1 Energy)</span><<set $energy = $energy - 1>><<else>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>
<<if $items.includes("Wave Beam ")>><<include "Rio Beams Wave">><</if>>
<<if $items.includes("Ice Beam ")>><<include "Rio Beams Ice">><</if>>
<<if $items.includes("Normal Beam ")>><<include "Rio Beams Normal">><</if>>
<<if $missiles >0>><<include "Rio Weapons Missiles">><</if>>
<<if $items.includes("Screw Attack ")>><<include "Rio Weapons Screw Attack">><</if>>
<<linkreplace "Run  ">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><</if>><<set $displayMap = 1>>


:: Run from the Rio {"position":"225,850","size":"100,100"}
However, I can 't run away that easily. The Rio loops around in the air and rushes at me.
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Escape Rio Fails">><<else>><<include "Escape Rio Success">><</if>>


:: Brinstar Combat Test {"position":"350,850","size":"100,100"}
You can fight what you want here.

Geemer  <<linkreplace "Geemer  ">><<goto "Geemer">><</linkreplace>>
Rio    <<linkreplace "Rio  ">><<goto "Rio">><</linkreplace>>
Sidehopper  <<linkreplace "Sidehopper  ">><<goto "Sidehopper">><</linkreplace>>
Zeb    <<linkreplace "Zeb  ">><<goto "Zeb">><</linkreplace>>
Kraid 's Sidehopper    <<linkreplace "Kraid 's Sidehopper  ">><<goto "Kraid 's Sidehopper">><</linkreplace>>
Doublehopper  <<linkreplace "Doublehopper  ">><<goto "Doublehopper">><</linkreplace>>
Kraid  <<linkreplace "Kraid  ">><<goto "Kraid">><</linkreplace>>
[[01]]
[[35]]
[[37]]

Get Varia <<linkreplace "Get Varia ">><<set $items = $items + [ "Varia "]>><</linkreplace>>
Get Bombs <<linkreplace "Get Bombs ">><<set $items = $items + [ "Bombs "]>><</linkreplace>>

Get Kraid Key Stone <<linkreplace "Get Kraid Key Stone ">><<set $items = $items + [ "KraidStone "]>><</linkreplace>>
Get Ridley Key Stone <<linkreplace "Get Ridley Key Stone ">><<set $items = $items + [ "RidleyStone "]>><</linkreplace>>
[[10]]
<<set $GateOpen = 0; $KraidGate = 0; $RidleyGate = 0>>

Get Normal Beam <<linkreplace "Get Normal Beam ">><<set $items = $items + [ "Normal Beam "]>><<set $items = $items - [ "Ice Beam ", "Wave Beam "]>> --You got Normal Beam<</linkreplace>>
Get Ice Beam <<linkreplace "Get Ice Beam ">><<set $items = $items + [ "Ice Beam "]>><<set $items = $items - [ "Normal Beam ", "Wave Beam "]>> --You got Ice Beam!<</linkreplace>>
Get Wave Beam <<linkreplace "Get Wave Beam ">><<set $items = $items + [ "Wave Beam "]>><<set $items = $items - [ "Ice Beam ", "Normal Beam "]>> --You got Wave Beam<</linkreplace>>
Get Screw Attack <<linkreplace "Get Screw Attack ">><<set $items = $items + [ "Screw Attack "]>><</linkreplace>>

Get Missiles (10) <<linkreplace "Get Missiles (10)">><<run setup.grantMissilePod("90 ", 10)>><</linkreplace>>
Get Missiles (20)  <<linkreplace "Get Missiles (20)">><<run setup.grantMissilePod("91 ", 20)>><</linkreplace>>
Refill Missiles <<linkreplace "Refill Missiles ">><<set $missiles = $maxMissiles>><</linkreplace>>
Lose All Missiles <<linkreplace "Lose All Missiles ">><<set $missiles = 0>><</linkreplace>>

Get Energy Tank (30)<<linkreplace "Get Energy Tank (30)">><<run setup.refillEnergy()>><</linkreplace>>
Get Energy Tank (60)<<linkreplace "Get Energy Tank (60)">><<run setup.refillEnergy()>><</linkreplace>>
Refill Energy<<linkreplace "Refill Energy ">><<set $energy = $maxEnergy; $energy = $maxEnergy>><</linkreplace>>
Dangerously Low <<linkreplace "Dangerously Low ">><<set $energy = 1>><</linkreplace>>

<<set $location = "Brinstar ">>


:: Attack Missed Rio 2 [Combat-Ended] {"position":"475,850","size":"100,100"}
The Rio dodges my attack. Simultaneously, there is a massive blow to my shoulder. I suffer an attack from the Rioï¿½s talons. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-1 Energy)</span><<set $energy = $energy - 1>><<else>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Should I run? Should I still fight? If I fight, with what weapon? 
<<if $items.includes("Wave Beam ")>><<include "Rio Beams Wave">><</if>>
<<if $items.includes("Ice Beam ")>><<include "Rio Beams Ice">><</if>>
<<if $items.includes("Normal Beam ")>><<include "Rio Beams Normal">><</if>>
<<if $missiles >0>><<include "Rio Weapons Missiles">><</if>>
<<if $items.includes("Screw Attack ")>><<include "Rio Weapons Screw Attack">><</if>>
Run  <<linkreplace "Run  ">><<set $combat = 0; $displayMap = 1>><<goto $lastRoom>><</linkreplace>><</if>>


:: Rio Destroyed {"position":"600,850","size":"100,100"}
Attack successful!

My attack hits, and instantly the Rio seems to shrink before it expands and disappears in an explosion. Its dying cry of agony echoes through the room.
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Missile">><<elseif $random == 2>><<include "Energy Ball">><<else>><<include "Nothing">><</if>>


:: Screw Attack Hits Rio {"position":"725,850","size":"100,100"}
I jump, spin like a top, and ram into the Rioï¿½a Screw Attack!

Powerful energy envelops my entire body, diffusing as I strike and damaging my opponent. The Screw Attack 's power has enough force to defeat all enemies in a single hit. However, it requires great skill to successfully guide my body while spinning, and its drawback is there are many ways to fail.

This time the attack succeeds beautifully. 

The Rio takes the Screw Attack and is blown to bits in one fell swoop.
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Nothing">><<elseif $random == 2>><<include "Missile">><<else>><<include "Energy Ball">><</if>>


:: Scan Rio {"position":"850,850","size":"100,100"}
<img src="assets/images/Rio.webp">The Rio is a creature resembling an enormous moth. The creatureï¿½s length when it spreads its wings is 1.15 meters, and it swoops down to attack with its enormous talons. The Rio flies through the air with its wings and uses its talons almost entirely in its attacks. The Rioï¿½s attack method is also simple: it swoops down at high speed and strikes with its large talons.

However, if my only means of attack is the Normal Beam, this is not an opponent to make light of. As for the Rio 's Command Level, Level II may be one step above the Geemer, the weakest enemy, but it 's better to proceed with caution at first.

Given my current status, choose whether I should fight the Rio now.


:: A Bio-Weapon {"position":"975,850","size":"100,100"}
If the Pirates understood the power of the Metroid they stole, it would be disastrous. It is dreadful to imagine what would happen if the Pirates were to manufacture that life-form into a weapon and us it against the Galactic Federation... 

[[Before that happens, it must be recaptured, no matter the cost.->The Planet Zebes]]


:: A hidden link {"position":"1100,850","size":"100,100"}
Double-click this passage to edit it.


:: 34 [Item-Room] {"position":"1225,850","size":"100,100"}
###Room A-34
<<if hasVisited("34")>><<else>>The Missile fires, pulling a tail of white smoke behind it. The smoke hangs thickly. I fire one more shot after it and feel the wall shudder as it is struck. Simultaneously, cracks spider down the door with a squeal, and a large hole bursts open. <span style="color:red">(-2 Missiles.)</span><<set $missiles = $missiles - 2>><br ><br ><</if>>A strange statue stands on a pedestal in the center of the adjoining room. The statue holds up a weapon as if in offering. I add it to my equipment.<<set $items = $items + ["Ice Beam"]>><<set $items = $items - [ "Normal Beam ", "Wave Beam "]>>

(<span style="color:blue">Ice Beam</span> acquired. My current beam is replaced. If I replace the Ice Beam somewhere else, I can come back to this room when I need it later.)

It looks like there 's nothing else in the room. What 's more, there aren 't any hidden rooms. 

[[Go back North->33]]


:: 33 {"position":"100,975","size":"100,100"}
###Room A-33
To the West is a hidden passage looping back to <b >Room A-32 </b >. To the South is <<if hasVisited("34")>>an open<<else>>a locked<</if>> Red Door.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">>
	<<set $random = random( 1,6)>>
	<<if $random == 5>><<goto "Sidehopper">><<elseif $random == 4>><<goto "Geemer">><<elseif $random == 6>><<goto "Geemer">><<else>><<goto "Rio">><</if>>
<</linkreplace>><<else>><<set $combat = 1>>

The battle is over. 

<<if hasVisited("34")>>[[Go South to collect the Ice Beam->34]]
[[Go back West->32]]<<else>><<if $missiles >1>>[[I fire 2 Missiles at the Red Door.->34]]<<else>>I need at least 2 Missiles to open the Red Door. [[Go back West->32]]<</if>><</if>><</if>>


:: 32 [Secret-Passage] {"position":"225,975","size":"100,100"}
###Room A-32
This room has only Blue Doors to the North and South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geemer">><</linkreplace>><<else>><<set $combat = 1>>As it turns out, there is a passage to a hidden room in the East side of this chamber. It is <b >Room A-33 </b >. A pool of lava bubbles near the wall. <span class="revealsText">I step closer...<<linkreplace "I step closer...">>and find it is a holographic projection. There 's a strange <<if $items.includes("Bombs ")>>alloy on the floor blocking the passage forward. <<linkreplace "alloy ">>I blast it open with a Bomb, revealing a passage to [[Room A-33.->33]]<</linkreplace>><<else>>alloy on the floor blocking the passage forward.<</if>><</linkreplace>></span >[[Go North->35]]
[[Go South->28]]<</if>>


:: 09 {"position":"350,975","size":"100,100"}
###Room A-9
This is just a chamber running North to South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Zeb">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->08]]
[[Go South->10]]<</if>>


:: 11 [Elevator] {"position":"475,975","size":"100,100"}
###Room A-11: Brinstar, Elevator Room
{<<linkreplace "Save game?">>
  <<if Save.save("Slot A ")>>
    Game saved!
  <<else>>
    Sorry, I couldn 't save your game.
  <</if>>
<</linkreplace>>}

I can go down to the floor below, Area C, Tourian. If I don 't want to go down, I can only go back North.

[[Go back North->10]]
[[Descend->80]]
<<set $startRoom = "01"; $location = "Brinstar ">>


:: Secret Passage Instructions {"position":"600,975","size":"100,100"}
<i >Brinstar Evacuation Procedure:</i >* Block the passage in <b >Room A-2 </b >with rock. Anyone who wants to get to Kraid will need explosives.
* Place <b >Room A-32 </b >under lockdown. Cloak the entrance and seal the passage with Bomb-proof material, not weak alloy.
* In <b >Room A-18 </b >, fill in the tunnel to the right of the "passage "with rubble. Mask it to look like natural.


:: Scan Sidehopper {"position":"725,975","size":"100,100"}
The Sidehopper is a half-mechanical cyborg. There are powerful springs attached to its legs that it uses for quick attacks. It is also the high Command Level IV. This opponent shouldn 't be taken lightly. At any rate, the enemy is now rushing at me.


:: Fight Sidehopper {"position":"850,975","size":"100,100"}
<<if $items.includes("Wave Beam ")>><<include "Sidehopper Beam Wave">><</if>>
	<<if $items.includes("Ice Beam ")>><<include "Sidehopper Beam Ice">><</if>>
	<<if $items.includes("Normal Beam ")>>The Normal Beam is not powerful enough to fight a Sidehopper.<br ><</if>>
	<<if $missiles >0>><<include "Sidehopper Weapon Missiles">><</if>>
	<<if $items.includes("Screw Attack ")>><<include "Sidehopper Weapon Screw Attack">><</if>>
Run  <<linkreplace "Run  ">>Run<hr ><<include "Attempt Sidehopper Escape">><</linkreplace>>


:: Wave Beam Sidehopper {"position":"975,975","size":"100,100"}
The Sidehopper attacks. Although it gives me a brutal strike using its powerful springs, I also give it a taste of my beam. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

The beamï¿½s flash instantly swallows the frozen Sidehopper. The ice melts, and the creature coughs twice before it twitches, shudders, takes a leap, and explodes in mid-air.
	<<set $random = random( 1,6)>>
	<<if $random == (3)>><<include "Nothing">><<elseif $random == 1>><<include "Medium Energy Ball">><<elseif $random == 4>><<include "Medium Energy Ball">><<else>><<include "Missile">><</if>>
<</if>>


:: Medium Energy Ball [Combat-Ended] {"position":"1100,975","size":"100,100"}
An Energy Ball appears in the remains of the dead enemy. <span style="color:yellow">(+3 Energy.)</span><<set $energy = $energy + 3>><<if $energy >$maxEnergy>><<set $energy = $maxEnergy>><</if>>

<<set $combat = 0>><<linkreplace "The battle is over.">><<goto $lastRoom>><</linkreplace>><<set $displayMap = 1>>


:: Ice Beam Sidehopper {"position":"1225,975","size":"100,100"}
I immediately fire the Ice Beam. The Sidehopper is instantly frozen. Now I can run away. Should I run or fight it now?

The enemy is currently frozen, but if I attack, it might melt.

Use the Ice Beam again  <<linkreplace "Use the Ice Beam again  ">><hr >I continue my attack with the Ice Beam. The Ice Beam is 50% effective against a Sidehopper.
	<<set $random = random( 1,2)>>
	<<if $random == 2>><<include "Ice Beam Misses Sidehopper">><<else>><<include "Ice Beam Misses Sidehopper 2">><</if>>
<</linkreplace>>
	<<if $missiles >0>><<include "Sidehopper Weapon Missiles">><</if>>
	<<if $items.includes("Screw Attack ")>><<include "Sidehopper Weapon Screw Attack">><</if>>
Run  <<linkreplace "Run  ">><hr ><<include "Escape Sidehopper">><</linkreplace>>


:: Escape Sidehopper [Combat-Ended] {"position":"100,1100","size":"100,100"}
I somehow manage to evade the Sidehopper and successfully avoid fighting. I don 't even take damage!

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><<set $displayMap = 1>>


:: Fight Frozen Sidehopper {"position":"225,1100","size":"100,100"}
What weapon should I use?

The enemy is currently frozen, but if I attack, it might melt.

Use the Ice Beam again  <<linkreplace "Use the Ice Beam again  ">><hr >I continue my attack with the Ice Beam. The Ice Beam is 50% effective against a Sidehopper.
	<<set $random = random( 1,2)>>
	<<if $random == 2>><<include "Ice Beam Misses Sidehopper">><<else>><<include "Ice Beam Misses Sidehopper 2">><</if>>
<</linkreplace>>
	<<if $missiles >0>><<include "Sidehopper Weapon Missiles">><</if>>
	<<if $items.includes("Screw Attack ")>><<include "Sidehopper Weapon Screw Attack">><</if>>


:: Screw Attack Sidehopper {"position":"350,1100","size":"100,100"}
I use the Screw Attack. The Screw Attack is 50% effective against the Sidehopper.
	<<set $random = random( 1,2)>>
	<<if $random == 2>><<include "Screw Attack Hits Sidehopper">><<else>><<include "Screw Attack Misses Sidehopper">><</if>>


:: Screw Attack Hits Sidehopper {"position":"475,1100","size":"100,100"}
Attack successful! The enemy 's movements are quick, and although it gives me some trouble, I am somehow able to beat it. The creature screams a single shriek through the air.
	<<set $random = random( 1,6)>>
	<<if $random == 2>><<include "Nothing">><<elseif $random == 1>><<include "Missile">><<elseif $random == 3>><<include "Missile">><<else>><<include "Medium Energy Ball">><</if>>


:: Screw Attack Misses Sidehopper {"position":"600,1100","size":"100,100"}
The Screw Attack fails. I miss and just jump into the air close to the enemy. It 's now an even match for my opponent. The Sidehopper attacks without hesitation. Of course, it uses the reinforced springs on its legs. I take the damage. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Should I continue again with the attack? Or should I run?
<<include "Fight Sidehopper">><</if>>


:: Escape Screw Attack Sidehopper {"position":"725,1100","size":"100,100"}
I give up the attack and flee.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Escape Sidehopper">><<else>><<include "Escape Sidehopper Fails">><</if>>


:: Escape Sidehopper Fails [Combat-Ended] {"position":"850,1100","size":"100,100"}
I feign rushing to attack, but change actions mid-motion. I take the Sidehopperï¿½s attack, but the feint succeeds, and I somehow escape. However, my damage was also great. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><</if>><<set $displayMap = 1>>


:: Attempt Sidehopper Escape {"position":"975,1100","size":"100,100"}
However, I can 't get away so easily. The Sidehopperï¿½s attack is much faster than humans can react. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

The Sidehopper attacks again. <<linkreplace "The Sidehopper attacks again.">>
	<<set $random = random( 1,3)>>
	<<if $random == 2>><<include "Escape Sidehopper">><<else>><<include "Escape Sidehopper Fails">><</if>>
<</linkreplace>><</if>>


:: Missiles Sidehopper {"position":"1100,1100","size":"100,100"}
I fire a Missile at the Sidehopper. <span style="color:red">(-1 Missile)</span><<set $missiles = $missiles - 1>>

Missiles are 100% effective against the Sidehopper. However, whether or not they hit is another story, as they have about 50% accuracy.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Missile Misses Sidehopper">><<else>><<include "Missile Hits Sidehopper">><</if>>


:: Missile Misses Sidehopper {"position":"1225,1100","size":"100,100"}
The Missile misses. The Sidehopper dodges it and strikes again using its tremendous jumping power. This attackï¿½s speed was incredible, and since I could only fire my suit 's boosters slightly, it was impossible to avoid. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Select a Weapon:
<<include "Fight Sidehopper">><</if>>


:: Ice Beam Misses Sidehopper {"position":"100,1225","size":"100,100"}
The Sidehopper attacks. Although it gives me a brutal strike using its powerful springs, I also give it a taste of my beam. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

The beamï¿½s flash instantly swallows the frozen Sidehopper. The ice melts, and the creature coughs twice before it twitches, shudders, takes a leap, and explodes in mid-air.
	<<set $random = random( 1,6)>>
	<<if $random == 3>><<include "Nothing">><<elseif $random == 1>><<include "Medium Energy Ball">><<elseif $random == 4>><<include "Medium Energy Ball">><<else>><<include "Missile">><</if>>
<</if>>


:: Ice Beam Misses Sidehopper 2 {"position":"225,1225","size":"100,100"}
The Sidehopper jumps high. My attack with the Ice Beam misses. The enemy uses its powerful springs to strike. Its thick legs spring into a powerful jump. A large blow sends my flying, and my back hits the wall. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

However, I 'm also not finished. While the Sidehopper is leaping, I keep attacking with the Ice Beam. Since I already damaged it a bit, the Sidehopperï¿½s body crumbles from this attack. Simultaneously, it explodes. I took some damage, but am somehow able to defeat the Sidehopper.
	<<set $random = random( 1,6)>>
	<<if $random == 3>><<include "Nothing">><<elseif $random == 2>><<include "Medium Energy Ball">><<elseif $random == 5>><<include "Medium Energy Ball">><<else>><<include "Missile">><</if>>
<</if>>


:: Scan Zeb {"position":"350,1225","size":"100,100"}
The Zeb is a creature that lives in great numbers inside vent openings all over this asteroid. They have a sense of hearing akin to radar. If I approach these enemies, they will leap out of the vent openings and rush at me. Since they are Command Level I, the same as the Geemer, I can beat them rather easily, even if my only equipment is the Normal Beam. What 's more, this creature leaves behind Energy Balls or Missiles in its remains, so it 's fine to just dispatch a few of these creatures. They are convenient opponents when I want to save time.


:: Fight Zeb {"position":"475,1225","size":"100,100"}
<<if $items.includes("Wave Beam ")>><<include "Zeb Beams Wave">><</if>>
	<<if $items.includes("Ice Beam ")>><<include "Zeb Beams Ice">><</if>>
	<<if $items.includes("Normal Beam ")>><<include "Zeb Beams Normal">><</if>>
Ignore it and run  <<linkreplace "Ignore it and run  ">>run<hr ><<include "Run from Zeb">><</linkreplace>>


:: Run from Zeb {"position":"600,1225","size":"100,100"}
I ignore the Zeb coming at me and run. However, the Zeb moves fast. If I have the Ice Beam and use it to freeze the Zeb, I can run, but if not...

<<if $items.includes("Ice Beam ")>><<include "Escape Zeb Successful">><<else>>I don 't have the Ice Beam. <<include "Escape Zeb Fails">><</if>>


:: Escape Zeb Successful [Combat-Ended] {"position":"725,1225","size":"100,100"}
A flash of light shoots out of the Ice Beam. The Zeb stops in mid-air for a split second, then falls down. Although the Zeb is a creature that attacks continuously, they won 't attack when their comrade is frozen. In the meantime, I can successfully escape. Naturally, enemies wonï¿½t attack when they are frozen, so I completely avoid taking damage. 

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><<set $displayMap = 1>>


:: Escape Zeb Fails [Combat-Ended] {"position":"850,1225","size":"100,100"}
Zebs have a sense of hearing like radar, and the enemy feels me draw near. However, their range of hearing is extremely narrow. If I move away even just a little, they might not be able to detect me. I fire my suit 's boosters and make a run for it.

...However, the Zebï¿½s speed is greater. The Zeb commences with a ramming attack. My maneuvering controls go wild! I take damage. <span style="color:red">(-1 Energy)</span><<set $energy = $energy -1>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Even so, I am able to leave the range of their hearing before the next Zeb can come out.

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><</if>><<set $displayMap = 1>>


:: Beam Hits Zeb {"position":"975,1225","size":"100,100"}
My attack is successful. The beam hit the Zeb as it flies through my line of fire, blowing it to bits.
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Zeb Energy Ball">><<elseif $random == 2>><<include "Zeb Nothing">><<elseif $random == 3>><<include "Zeb Missiles">><</if>>


:: Zeb Energy Ball {"position":"1100,1225","size":"100,100"}
An Energy Ball springs forth from the remains of the destroyed Zeb. <span style="color:yellow">(+2 Energy)</span><<set $energy = $energy + 2>><<if $energy >$maxEnergy>><<set $energy = $maxEnergy>><</if>>

<<include "Fight Another Zeb">>


:: Fight Another Zeb {"position":"1225,1225","size":"100,100"}
The figure of the next Zeb emerges from the mouth of the air vent. Once again, it rushes at my at high speed. I should fight if I want to stock up on Energy as well as Missiles. If not, ignore it and run.

Fight  <<linkreplace "Fight  ">>
	<<if $items.includes("Normal Beam ")>><<goto "Zeb Normal Beam">><<else>><<goto "Beam Shoots Toward Zeb">><</if>>
<</linkreplace>>
Ignore it and run  <<linkreplace "Ignore it and run ">><hr ><<include "Run from Zeb">><</linkreplace>>


:: Zeb Missiles {"position":"100,1350","size":"100,100"}
The Zeb is destroyed, leaving Missiles behind in its remains. <span style="color:red">(+2 Missiles)</span><<set $missiles = $missiles + 2>><<if $missiles >$maxMissiles>><<set $missiles = $maxMissiles>><</if>>

<<include "Fight Another Zeb">>


:: Zeb Nothing {"position":"225,1350","size":"100,100"}
The Zeb has been destroyed, leaving <span style="color:red">nothing</span> behind in its remains.

<<include "Fight Another Zeb">>


:: Beam Misses Zeb {"position":"350,1350","size":"100,100"}
However, my attack fails. I take damage from the Zeb 's high-speed ramming attack. <span style="color:red">(-1 Energy)</span><<set $energy = $energy -1>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Should I continue with another attack, or is it better to run away?

Fight  <<linkreplace "Fight  ">>Fight<hr ><<include "Beam Shoots Toward Zeb">><</linkreplace>>
Ignore it and run  <<linkreplace "Ignore it and run ">><hr ><<include "Run from Zeb">><</linkreplace>><</if>>


:: Beam Shoots Toward Zeb {"position":"475,1350","size":"100,100"}
My beam shoots towards the Zeb.
	<<set $random = random( 1,3)>>
	<<if $random == 3>><<include "Beam Misses Zeb">><<else>><<include "Beam Hits Zeb">><</if>>


:: Normal Beam Hits Zeb {"position":"600,1350","size":"100,100"}
Even though I 'm using the Normal Beam, the enemy isn 't that scary once I can land a direct hit. The destructive power of the Normal Beam isnï¿½t just for show. The Zeb is defeated.
	<<set $random = random( 1,3)>>
	<<if $random == 3>><<include "Zeb Nothing">><<else>><<include "Zeb Energy Ball">><</if>>


:: Normal Beam Misses Zeb {"position":"725,1350","size":"100,100"}
However, the Zeb avoids my attack. At the same time, I take a blow from the Zeb chasing me through the air at high speed. I take damage. <span style="color:red">(-1 Energy)</span><<set $energy = $energy -1>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Should I still attack? Or else, is it OK to run?

Fight  <<linkreplace "Fight  ">>Fight<hr ><<include "Zeb Normal Beam">><</linkreplace>>
Ignore it and run  <<linkreplace "Ignore it and run ">><hr ><<include "Run from Zeb">><</linkreplace>><</if>>


:: Zeb Normal Beam {"position":"850,1350","size":"100,100"}
I attack the Zeb with the Normal Beam. Since my opponent is a Command Level I Zeb, even the Normal Beam should be able to defeat it.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Normal Beam Hits Zeb">><<else>><<include "Normal Beam Misses Zeb">><</if>>


:: Kraid's Sidehopper {"position":"975,1350","size":"100,100"}
<<set $displayMap = 0>>The instant I decided to proceed, the shutter in front of me clangs open. Simultaneously, a Sidehopper appears. I canï¿½t go forward unless I defeat the Sidehopper. I have to use Missiles.
	<<if $missiles >0>><<include "Kraid 's Sidehopper Weapon Missiles">><<else>><<include "Kraid 's Sidehopper Missiles Out">><</if>>


:: Missile Kraid's Sidehopper {"position":"1100,1350","size":"100,100"}
I fire a Missile at the Sidehopper. <span style="color:red">(-1 Missile)</span><<set $missiles = $missiles - 1>>
	<<set $random = random( 1,2)>>
	<<if $random == 1>>First, there is a deafening sound like clanging metal. Then comes the slow, muffled roar of the Sidehopper. Finally, the ear-splitting boom of a loud explosion shakes the room. [[The Missile hits the Sidehopper, smashing it to atoms.->Doublehopper]]<<else>><<include "Kraid 's Sidehopper Missile Misses">><</if>>


:: Kraid's Sidehopper No Missiles {"position":"1225,1350","size":"100,100"}
The Sidehopperï¿½s leaping power is incredible. It first jumps as if to swing around to my right. I take a stance to guard this side, but in the next moment, it jumps to my left. The creature 's attack is a feint making full use of its leaping abilities.

I feel the impact in my left shoulder. The Sidehopperï¿½s enormous two-meter-tall body slams into me. I take an extremely large amount of damage. <<if $items.includes("Varia ")>><span style="color:red">(-8 Energy)</span><<set $energy = $energy - 8>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>>
	<<if $energy >0>><<include "Escape Kraid 's Sidehopper">><<else>><<set $energy = 0>>[<<include "Kraid 's Sidehopper Death">>]<</if>>


:: Escape Kraid's Sidehopper {"position":"100,1475","size":"100,100"}
I take a lot damage, but successfully avoid the Sidehopper 's next ramming attack. I manage to escape since the creature is slowed down under its own weight. I get away before it can raise itself up. This enemy is the same as the other enemies I 've encountered, so if I can get away, [[there is no way it will come after me.->Doublehopper]]


:: Doublehopper {"position":"225,1475","size":"100,100"}
<img src="assets/images/Doublehopper.webp">I enter a small room. Then, another shutter drops. This time, I use a beam weapon, and the shutter melts. There is something on the other side of the melted hole. Itï¿½s a creature I havenï¿½t seen before. My Command Computer begins a high-speed data analysis. The figure resembles a Sidehopper. And yet, while the Sidehopper has two legs, this one has four cyborg legs.

Computer Output:

ï¿½Doublehopper. An evolved Sidehopper with additional modifications. This cyborg creature guards the area immediately outside Kraidï¿½s Room.ï¿½

The Doublehopperï¿½s attack abilities are completely unknown. Should I fight with my current equipment? Or else, go back to refill my Energy and Missiles?

Fight with current equipment  <<linkreplace "Fight with current equipment  ">><<include "Fight Doublehopper">><</linkreplace>>
Go back  <<linkreplace "Go back  ">><hr >However, before I can get away, the Doublehopper comes around behind me. It takes a giant leap...
	<<set $random = random( 1,3)>>
	<<if $random == 2>><<include "Doublehopper Escape Fails">><<else>><<include "Escape Doublehopper Success">><</if>>
<</linkreplace>>


:: Kraid's Sidehopper Death [GAME-OVER] {"position":"350,1475","size":"100,100"}
The Sidehopperï¿½s next attack has enough force to stop my movement instantly. And, the creature doesn 't miss. The Sidehopperï¿½s next strike damages my legs with a direct hit. Given my current state of immobility, this attack has more than double the power of the previous one. As a result, my legs are completely paralyzed. 

My legs may have been modified with multiple cyborg enhancements, but they have become brittle after so much damage has been loaded onto them. Now that I am unable to move, the Sidehopper inflicts a series of consecutive attacks.

My chances of being rescued arenï¿½t even one in a million.<<set $energy = 0>>

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Kraid's Sidehopper Missile Misses {"position":"475,1475","size":"100,100"}
The Missile passes under the Sidehopper 's legs, and after a short flight, smashes into the wall. Part of the wall crumbles down. The Missile attack failed.
	<<if $missiles >0>><<include "Kraid 's Sidehopper Weapon Missiles">><<else>><<include "Kraid 's Sidehopper Missiles Out">><</if>>


:: Fight Doublehopper {"position":"600,1475","size":"100,100"}
Select a weapon to use against the Doublehopper. It attacks too quickly to switch weapons in mid-combat, so I 'll have to pick wisely!
	<<if $items.includes("Wave Beam ")>><<include "Doublehopper Beam Wave">><</if>>
	<<if $items.includes("Ice Beam ")>><<include "Doublehopper Beam Ice">><</if>>
	<<if $missiles >0>><<include "Doublehopper Weapon Missiles">><</if>>
Run  <<linkreplace "Run  ">><hr ><<include "Attempt Sidehopper Escape">><</linkreplace>>


:: Attempt Escape Doublehopper {"position":"725,1475","size":"100,100"}
A warning issues from my Command Computer:

ï¿½It is virtually impossible to achieve victory over the Doublehopper with your current equipment. For the moment, it would be best to challenge the creature again after pulling back and better equipping yourself.ï¿½

I immediately take the advice and pull back. Once I collect the weapons, I can go back again to the entrance of Kraidï¿½s room.

The problem is...will I escape the Doublehopper without any trouble?

<<include "Escape Doublehopper">>


:: Escape Doublehopper {"position":"850,1475","size":"100,100"}
However, before I can get away, the Doublehopper comes around behind me. It takes a giant leap...
	<<set $random = random( 1,3)>>
	<<if $random == 2>><<include "Doublehopper Escape Fails">><<else>><<include "Escape Doublehopper Success">><</if>>


:: Doublehopper Escape Fails [GAME-OVER] {"position":"975,1475","size":"100,100"}
I try to avoid the Doublehopperï¿½s jump attack, but my footing is a little unstable. The creature 's enormous body falls on me from about ten meters in the air. I canï¿½t avoid the attack. The Sidehopperï¿½s massive density increases its gravitational acceleration. The damage from that single attack exceeds all my Energy. My body is crushed without a trace. The Doublehopper continues to jump in triumph...<<set $energy = 0>>

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Wave Beam Misses Doublehopper {"position":"1100,1475","size":"100,100"}
The Wave Beam slices through the air. However, the Doublehopper avoids the Wave Beam with its enhanced legs. Then, still avoiding the attack, it repeats the jump, striking at me. In a flash, the creature 's upper body swings down on me. I immediately raise my arm in defense, but the Doublehopper 's power is tremendous. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-5 Energy)</span><<set $energy = $energy - 5>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

But I still continue to attack.  <<linkreplace "But I still continue to attack.">>attack.<hr ><<include "Doublehopper Wave Beam">><</linkreplace>><</if>>


:: Doublehopper Wave Beam {"position":"1225,1475","size":"100,100"}
I spray the Doublehopper with the Wave Beam.
	<<set $random = random( 1,3)>>
	<<if $random == 3>><<include "Wave Beam Misses Doublehopper">><<else>><<include "Wave Beam Damaged Doublehopper">><</if>>


:: Wave Beam Damaged Doublehopper {"position":"100,1600","size":"100,100"}
I successfully deal the Doublehopper a considerably large blow. The creature makes a big jump trying to avoid the Wave Beam. However, based on previous experience, I predicted the Doublehopper would make this move, and the Wave Beam oscillates up and down and two bursts slam into it. As expected, the creature can 't dodge the attack, even with its jumping power.

<<linkreplace "As expected, the creature can 't dodge the attack, even with its jumping power.">><hr ><<include "Wave Beam Doublehopper Again">><</linkreplace>>


:: Wave Beam Doublehopper Again {"position":"225,1600","size":"100,100"}
Although the Doublehopper has taken damage and its movement has slowed, I still havenï¿½t defeated it. I press on with another attack. I pump the Wave Beam into the Doublehopper again.
	<<set $random = random( 1,3)>>
	<<if $random == 2>><<include "Wave Beam Misses Doublehopper 2">><<else>>The Wave Beam finishes off the Doublehopper. The creature finally bursts, exploding from the inside. The beast is slain. [[I can proceed forward.->Kraid]]<</if>>


:: Wave Beam Misses Doublehopper 2 {"position":"350,1600","size":"100,100"}
However, this attack missed. My prediction of the Doublehopperï¿½s move was wrong. Although I simply confused left with right, I actually take a large amount of damage. The attack, taken from an unexpected direction, is a heavy blow. If I could have accurately predicted the direction of the blow, I could have defended against it, or at least prepared for it...

The creature 's attack lands squarely on my right flank. <<if $items.includes("Varia ")>><span style="color:red">(-8 Energy)</span><<set $energy = $energy - 8>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Well, that wasn 't the least bit painless... Nevertheless, I am able to respond with my best counterattack. Even while I am blown back by the attack, I am able to give the Doublehopper a taste of the Wave Beam. However, the creature also manages to execute a large jump. The Doublehopper continues to press on with the attack.  <<if $items.includes("Varia ")>><span style="color:red">(-8 Energy)</span><<set $energy = $energy - 8>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

<<linkreplace "The Doublehopper continues to press on with the attack.  ">>attack.<hr ><<include "Wave Beam Doublehopper Again">><</linkreplace>><</if>><</if>>


:: Doublehopper Ice Beam {"position":"475,1600","size":"100,100"}
I attack the Doublehopper with the Ice Beam.
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Ice Beam Hits Doublehopper">><<else>><<include "Ice Beam Misses Doublehopper">><</if>>


:: Ice Beam Hits Doublehopper {"position":"600,1600","size":"100,100"}
Even though itï¿½s an Ice Beam attack, if I continue to adjust the exposure levels just right, I can damage the Doublehopper. If I can do that, the creature will remain frozen and wonï¿½t be able to attack. I keep firing. 

<<linkreplace "I keep firing. ">><hr ><<include "Ice Beam Doublehopper Again">><</linkreplace>>


:: Ice Beam Doublehopper Again {"position":"725,1600","size":"100,100"}
I continue attacking with the Ice Beam.
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Ice Beam Misses Doublehopper 2">><<else>><<include "Ice Beam Destroys Doublehopper">><</if>>


:: Ice Beam Misses Doublehopper {"position":"850,1600","size":"100,100"}
Using the Ice Beam was a mistake. While it 's possible to beat the Doublehopper when it 's well-frozen if I fire the beam just right, I ended up taking an attack from the speedy Doublehopper. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-5 Energy)</span><<set $energy = $energy - 5>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

The Doublehopper regains its abilities the instant the ice melts and strikes using the springs on its forelegs. The impact of the springs on the creature 's forelegs sends me flying backward even as I succeed in firing the Ice Beam once more. 

Attack again.  <<linkreplace "Attack again.  ">>Attack again.<hr ><<include "Doublehopper Ice Beam">><</linkreplace>><</if>>


:: Ice Beam Misses Doublehopper 2 {"position":"975,1600","size":"100,100"}
The Ice Beam attack fails. My aim shifts slightly, and during the interval where the beam missed, the Doublehopper recovers and strikes. The creature 's forelimbs draw before my eyes. In the next instant, they send me flying. The enhanced springs are effective, and its impact is tremendous, sending me flying ten meters easily. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-5 Energy)</span><<set $energy = $energy - 5>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

My back slams to a stop against the wall. However, in that instant, I somehow manage to successfully land a blow with the Ice Beam on the Doublehopper. I seize the opportunity and attack again. <<linkreplace "I seize the opportunity and attack again. ">>again.<hr ><<include "Ice Beam Doublehopper Again">><</linkreplace>><</if>>


:: Ice Beam Destroys Doublehopper {"position":"1100,1600","size":"100,100"}
<i >SKREEEE!</i >A shriek flies from the insectoid mouth of the Doublehopper. I definitely dealt it some damage. I press on with the attack and continue with the Ice Beam for a few seconds more. Before long, the Doublehopperï¿½s body begins to twitch and tremble. When the Doublehopper 's voltage reaches its peak, [[the creature explodes from the inside.->Kraid]]


:: Doublehopper Missiles {"position":"1225,1600","size":"100,100"}
I fire a stream of Missiles at the Doublehopper.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Missiles Miss Doublehopper">><<else>><<include "Missiles Destroy Doublehopper">><</if>>


:: Missiles Miss Doublehopper {"position":"100,1725","size":"100,100"}
I predict the Doublehopper 's jump as best I can and fire Missiles to meet its arc. The room turns into a pandemonium with the sounds of Missiles firing, explosions, and screeching metal. <<if $missiles >6>>I score seven hits<<elseif $missiles == 1>>I score a hit!)<<else>>I score $missiles hits<</if>> <<if $missiles >9>>After ten Missiles are fired, an<<elseif $missiles == 1>>An<<else>>After all my missiles are fired, an<</if>> incredibly loud explosion echoes throughout the chamber. The Doublehopper is unable to withstand the assault and explodes. Although I consumed <<if $missiles >10>>ten Missiles<<else>>all my Missiles<</if>>, [[the Doublehopper has been defeated.->Kraid]] <span style="color:red"><<if $missiles >9>>(-10 Missiles)<<elseif $missiles == 1>>-1 Missile<<else>>(-$missiles Missiles)<</if>></span>
	<<set $missiles = $missiles -10>>
	<<if $missiles <0>><<set $missiles = 0>><<else>><</if>>


:: Missiles Destroy Doublehopper {"position":"225,1725","size":"100,100"}
The Missiles strike one after another. With a sound like creaking metal, five dull, intermittent explosions synchronize with the sound of the Doublehopper shattering into pieces. The creature succumbed to an attack from <<if $missiles >= 5>>5<<else>>$missiles<</if>> Missiles. <span style="color:red">(-<<if $missiles >= 5>>5<<else>>$missiles<</if>> Missiles.)</span>
	<<set $missiles = $missiles - 5>>
	<<if $missiles <0>><<set $missiles = 0>><<else>><</if>>
	
[[I proceed to the next chamber.->Kraid]]


:: Kraid No Missiles {"position":"350,1725","size":"100,100"}
My Command Computer warns, ï¿½You canï¿½t win against Kraid without Missiles.ï¿½

I distract Kraid by firing a beam at his backside. In that instant, I try to somehow escape the room while avoiding Kraidï¿½s attack. 

I should leave Kraidï¿½s Room for now and come back after replenishing my Energy and Missiles.

<<include "Attempt to Escape Kraid">>


:: Attempt to Escape Kraid [Combat-Ended] {"position":"475,1725","size":"100,100"}
Can I escape from Kraidï¿½s room?<<linkreplace "Can I escape from Kraidï¿½s room?">><hr >{
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Escape Kraid Fails">><<else>>I slip past the enemyï¿½s attack. In any case, I can come back to fight the creature again once my Missiles and Energy are replenished. [[Go back to Room A-20->20]]<</if>>
<</linkreplace>><<set $displayMap = 1>>


:: Escape Kraid Fails [GAME-OVER] {"position":"600,1725","size":"100,100"}
However, I couldnï¿½t escape from Kraid. His enormous, pudgy body moves faster than I thought possible, and he circles around right back in front of me. Kraid hurls thick spikes at me from all over his body. Their number gradually increases, and soon I am unable to avoid the spikes dancing through the air. He has completely cut off my escape route. Then I realize that Kraid isnï¿½t the only thing surrounding me. A large army of Sidehoppers has been gathering unnoticed. My chances of rescue arenï¿½t even one in a million.<<set $energy = 0>>

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Kraid Missiles 1 {"position":"725,1725","size":"100,100"}
I attack Kraid with Missiles. 2 Missiles fly towards him. <span style="color:red">(-2 Missiles)</span><<set $missiles = $missiles - 2>> 
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Missiles Hit Kraid 1">><<else>><<include "Missiles Miss Kraid 1">><</if>>


:: Missiles Hit Kraid 1 {"position":"850,1725","size":"100,100"}
Before Kraid fires the spikes on his body, my Missiles score a direct hit. The creature bellows a cry of anguish.
	<<if $missiles >= 2>><<include "Kraid Weapon Missiles 2">><<else>><<include "Kraid Weapon No Missiles">><</if>>


:: Kraid Missiles 2 {"position":"975,1725","size":"100,100"}
I fire Missiles at Kraid again. Although he was not frightened by the previous attack, he is a little hesitant about taking damage again. The 2 Missiles fly towards Kraid. <span style="color:red">(-2 Missiles)</span><<set $missiles = $missiles - 2>>

Kraid rears up as if in a panic, and to guard his body from the Missiles, fires the spikes growing on his hide.  <<linkreplace "fires the spikes growing on his hide.  ">>hide.<hr >{
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Kraid Defeated">><<else>><<include "Missiles Miss Kraid 2">><</if>>
<</linkreplace>>


:: Kraid Defeated {"position":"1100,1725","size":"100,100"}
The 2 Missiles hit their target squarely. <span style="color:red">(-2 Missiles)</span><<set $missiles = $missiles - 2>> 

Kraid stops moving mid-strideï¿½time seems to stop for an instant. However, it was just for a moment, and in the next instant, he begins to ï¿½moveï¿½ again!

Cracks spider out all across Kraidï¿½s body. The extremely fine cracks cover his entire form. In the next instant, brilliant beams of light begin to seep through the cracks one after the other. It is the sign of an explosion. 

To prepare myself, I get down to avoid taking the full impact. The light gradually grows in intensity and brilliance, and when it reaches its peak, the entire chamber shakes and an enormous blast fills the room.<<linkreplace "an enormous blast fills the room.">>

<span class="fx-rumble ">ï¿½KABOOM!</span>

When the noise subsides, I walk up to the place where Kraid had once been. 

It was how I expected. A small black stone is rolling around in the center of the spot where Kraid exploded. And this egg-sized, oddly-shaped, jet-black rock is the Keystone.

(<span style="color:green ">Kraid 's Key Stone</span> collected. My Energy and Missiles are refilled to their current maximum.)<<set $energy = $maxEnergy; $missiles = $maxMissiles; $items = $items + [ "KraidStone "]>>

Kraid, Brinstarï¿½s boss, has been defeated.<<set $kraidDefeated = 1>>

The door locks behind me with a hollow echo as I return to [[Room A-20.->20]] <<set $displayMap = 1>><</linkreplace>>


:: Missiles Miss Kraid 1 {"position":"1225,1725","size":"100,100"}
The Missiles I fired are taken out by the spikes Kraid uses as weapons. The Missiles explode harmlessly before they can reach him. I take damage from his attack. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

	<<if $missiles >= 2>>Continue the attack  <<linkreplace "Continue the attack  ">>Continue the attack<hr ><<include "Kraid Missiles 1">><</linkreplace>><<else>><<include "Kraid Weapon No Missiles">><</if>><</if>>


:: Missiles Miss Kraid 2 {"position":"100,1850","size":"100,100"}
The Missiles don 't reach Kraid. Kraidï¿½s spikes detonate them in mid-air. Simultaneously, another set of spikes comes flying towards me. The spikesï¿½ speed is faster than expected, and I end up unable to avoid all of them. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

	<<if $missiles >= 2>>Continue the attack  <<linkreplace "Continue the attack  ">>Continue the attack<hr ><<include "Kraid Missiles 2">><</linkreplace>><<else>><<include "Kraid Weapon No Missiles">><</if>><</if>>


:: Geemer Wave Beam {"position":"225,1850","size":"100,100"}
The Wave Beam is 100% effective against the Geemer. My aim is precise. However, the beam also has the power to completely disintegrate the Geemer, even if it only hits one part of it. Of course, the Geemer can 't walk away from this attack, either.

The Geemer is vaporized the instant I fire the beam.
	<<set $random = random( 5,6)>>
	<<if $random == 5>><<include "Nothing">><<elseif $random == 4>><<include "Missile">><<elseif $random == 6>><<include "Missile">><<else>><<include "Energy Ball">><</if>>


:: Geemer Ice Beam {"position":"350,1850","size":"100,100"}
I fire the Ice Beam at the Geemer.
	<<set $random = random( 1,6)>>
	<<if $random == 2>><<include "Missed the Geemer">><<elseif $random == 5>><<include "Missed the Geemer">><<else>><<include "Ice Beam Hits Geemer">><</if>>


:: Geemer Normal Beam {"position":"475,1850","size":"100,100"}
I attack the Geemer with the Normal Beam. The Normal Beam is 50% effective against a Geemer.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Normal Beam Hits Geemer">><</if>>
	<<if $random == 2>><<include "Missed the Geemer">><</if>>


:: Normal Beam Hits Geemer {"position":"600,1850","size":"100,100"}
The Geemer is the lowest-ranking enemy creature. If my aim is perfect, this enemy is easy to beat, even with the Normal Beam.

The Normal Beam fired from my arm is sucked into the small creature barreling down at me. The Geemer is instantly vaporized. 

<<include "Energy Ball">>


:: Normal Beam Rio {"position":"725,1850","size":"100,100"}
I fire the Normal Beam at the Rio. However, the Normal Beamï¿½s output is weak. The battle will be desperate!
	<<set $random = random( 1,3)>>
	<<if $random == 3>><<include "Rio Destroyed">><<else>><<include "Attack Missed Rio 2">><</if>>


:: Wave Beam Rio {"position":"850,1850","size":"100,100"}
I fire the Wave Beam. It 's definitely an effective weapon against the Rio.
	<<set $random = random( 1,6)>>
	<<if $random == 6>><<include "Missed the Rio">><<else>><<include "Rio Destroyed">><</if>>


:: Ice Beam Rio {"position":"975,1850","size":"100,100"}
I fire at the Rio with the Ice Beam. Will it work?!
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Rio Destroyed">><<elseif $random == 2>><<include "Rio Destroyed">><<else>><<include "Missed the Rio">><</if>>


:: Missiles Rio {"position":"1100,1850","size":"100,100"}
I fire a Missile at the Rio. <span style="color:red">(-1 Missile)</span><<set $missiles = $missiles - 1>>

If it hits successfully, I can blow it to smithereens with just one shot...
	<<set $random = random( 1,6)>>
	<<if $random == 2>><<include "Attack Missed Rio 2">><<elseif $random == 5>><<include "Attack Missed Rio 2">><<else>><<include "Rio Destroyed">><</if>>


:: Screw Attack Rio {"position":"1225,1850","size":"100,100"}
I strike the Rio with the Screw Attack. If I hit it just right, it 's possible to defeat the Rio in a single blow.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Attack Missed Rio 2">><<else>><<include "Screw Attack Hits Rio">><</if>>


:: Escape Rio Fails [Combat-Ended] {"position":"100,1975","size":"100,100"}
Somehow, I 'm not able to slip past the Rio and can 't avoid the attack from its talons. I take damage, but escape. <<if $items.includes("Varia ")>><span style="color:red">(-1 Energy)</span><<set $energy = $energy - 1>><<else>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><</if>><<set $displayMap = 1>>


:: Escape Rio Success [Combat-Ended] {"position":"225,1975","size":"100,100"}
However, I successfully avoid the Rioï¿½s attack. I escape!  

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><<set $displayMap = 1>>


:: GAME OVER [GAME-OVER] {"position":"350,1975","size":"100,100"}
<<set $displayStats = 0; $displayMap = 0>>
==><==
###GAME OVER 

{<<linkreplace "Save Game ">>
  <<if Save.save("Slot A ")>>
    Game saved!
  <<else>>
    Sorry, I couldn 't save your game.
  <</if>>
<</linkreplace>>}
 <<linkreplace "Load Game ">>
          <<loadgame "Slot A ">>
    <</linkreplace>>
Continue
	<<linkreplace "Continue ">>
	<<set $energy = 10; $displayStats = 1; $displayMap = 1>>
	<<goto $startRoom>><</linkreplace>>
[[Title->Title Screen]]


:: Debug Room Tourian {"position":"475,1975","size":"100,100"}
Weclome to the Debug Room! Select your quest!

[[Brinstar Combat Test]]
[[Norfair Combat Test]]
[[Tourian Test]]
[[To seek the Holy Grail]]
Break Energy <<linkreplace "Break Energy ">><</linkreplace>>

<<set $energy = 30; $maxEnergy = 30; $missiles = 0; $items = [ "Normal Beam "]; $startRoom = "Debug Room "; $combat = 1; $MotherBrainHealth = 10; $displayMap = 1>>

Brinstar Map <<linkreplace "Brinstar Map ">><<run setup.grantMapItem("BrinstarMap ")>> - Got it!<</linkreplace>>
Norfair Map <<linkreplace "Norfair Map ">><<run setup.grantMapItem("NorfairMap ")>> - Got it!<</linkreplace>>
Tourian Map <<linkreplace "Tourian Map ">><<set $items = $items + [ "TourianMap "]>> - Got it!<</linkreplace>>
	<<set $maxEnergy = 30; $energy = $maxEnergy; $maxMissiles = 0; $missiles = $maxMissiles; $items = [ "Normal Beam "]; $missilePods = [ "0 "]; $energyPacks = [ "0 "]; $startRoom = "01"; $combat = 1; $Beam = "Normal Beam "; $Bombs = ""; $Varia = ""; $ScrewAttack = ""; $MotherBrainHealth = 10; $combat = 1; $displayStats = 1; $location = "Brinstar "; $displayMap = 1>>


:: Missile Hits Sidehopper {"position":"600,1975","size":"100,100"}
My Missile attack is successful. The Missile draws a twisted parabola towards the Sidehopper, and a surprisingly large explosion opens at the moment of impact.

Yes...the power of this small Missile must have exceeded its normal strength by tenfold! The Sidehopper disappears without a trace as it leaps into the air.
	<<set $random = random( 1,6)>>
	<<if $random == 3>><<include "Nothing">><<elseif $random == 1>><<include "Missile">><<elseif $random == 5>><<include "Missile">><<else>><<include "Medium Energy Ball">><</if>>


:: Escape Doublehopper Success [Combat-Ended] {"position":"725,1975","size":"100,100"}
I slip past the enemyï¿½s attack. In any case, I can come back to fight the creature again once my Missiles and Energy are replenished. 

[[Go back to Room A-20->20]]<<set $displayMap = 1>>


:: Geemer Beams Normal {"position":"850,1975","size":"100,100"}
Normal Beam  <<linkreplace "Normal Beam  ">>Beam<hr ><<include "Geemer Normal Beam">><</linkreplace>>


:: Geemer Beams Ice {"position":"975,1975","size":"100,100"}
Ice Beam  <<linkreplace "Ice Beam  ">>Beam<hr ><<include "Geemer Ice Beam">><</linkreplace>>


:: Geemer Beams Wave {"position":"1100,1975","size":"100,100"}
Wave Beam  <<linkreplace "Wave Beam  ">>Beam<hr ><<include "Geemer Wave Beam">><</linkreplace>>


:: Rio Beams Wave {"position":"1225,1975","size":"100,100"}
Wave Beam  <<linkreplace "Wave Beam  ">>Beam<hr ><<include "Wave Beam Rio">><</linkreplace>>


:: Rio Beams Ice {"position":"100,2100","size":"100,100"}
Ice Beam  <<linkreplace "Ice Beam  ">>Beam<hr ><<include "Ice Beam Rio">><</linkreplace>>


:: Rio Beams Normal {"position":"225,2100","size":"100,100"}
Normal Beam only  <<linkreplace "Normal Beam only  ">>only<hr ><<include "Normal Beam Rio">><</linkreplace>>


:: Rio Weapons Missiles {"position":"350,2100","size":"100,100"}
Missiles  <<linkreplace "Missiles  ">>Missiles<hr ><<include "Missiles Rio">><</linkreplace>>


:: Rio Weapons Screw Attack {"position":"475,2100","size":"100,100"}
Screw Attack  <<linkreplace "Screw Attack  ">>Attack<hr ><<include "Screw Attack Rio">><</linkreplace>>


:: Sidehopper Beam Wave {"position":"600,2100","size":"100,100"}
Wave Beam  <<linkreplace "Wave Beam  ">>Beam<hr ><<include "Wave Beam Hits Sidehopper">><</linkreplace>>


:: Sidehopper Beam Ice {"position":"725,2100","size":"100,100"}
Ice Beam  <<linkreplace "Ice Beam  ">>Beam<hr ><<include "Ice Beam Sidehopper">><</linkreplace>>


:: Sidehopper Weapon Missiles {"position":"850,2100","size":"100,100"}
Missiles  <<linkreplace "Missiles  ">>Missiles<hr ><<include "Missiles Sidehopper">><</linkreplace>>


:: Sidehopper Weapon Screw Attack {"position":"975,2100","size":"100,100"}
Screw Attack  <<linkreplace "Screw Attack  ">>Beam<hr ><<include "Screw Attack Sidehopper">><</linkreplace>>


:: Zeb Beams Wave {"position":"1100,2100","size":"100,100"}
Wave Beam  <<linkreplace "Wave Beam  ">>Beam<hr ><<include "Beam Shoots Toward Zeb">><</linkreplace>>


:: Zeb Beams Ice {"position":"1225,2100","size":"100,100"}
Ice Beam  <<linkreplace "Ice Beam  ">>Beam<hr ><<include "Beam Shoots Toward Zeb">><</linkreplace>>


:: Zeb Beams Normal {"position":"100,2225","size":"100,100"}
Normal Beam  <<linkreplace "Normal Beam  ">>Beam<hr ><<include "Zeb Normal Beam">><</linkreplace>>


:: Zeb Beams Ice Escape {"position":"225,2225","size":"100,100"}
Use the Ice Beam  <<linkreplace "Use the Ice Beam  ">>Beam<hr ><<include "Escape Zeb Successful">><</linkreplace>>


:: Doublehopper Beam Wave {"position":"350,2225","size":"100,100"}
Wave Beam  <<linkreplace "Wave Beam  ">>Beam<hr ><<include "Doublehopper Wave Beam">><</linkreplace>>


:: Doublehopper Beam Ice {"position":"475,2225","size":"100,100"}
Ice Beam  <<linkreplace "Ice Beam  ">>Beam<hr ><<include "Doublehopper Ice Beam">><</linkreplace>>


:: Doublehopper Weapon Missiles {"position":"600,2225","size":"100,100"}
Missiles  <<linkreplace "Missiles  ">>Missiles<hr ><<include "Doublehopper Missiles">><</linkreplace>>


:: Kraid's Sidehopper Weapon Missiles {"position":"725,2225","size":"100,100"}
Fire a Missile  <<linkreplace "Fire a Missile  ">>Missile<hr ><<include "Missile Kraid 's Sidehopper">><</linkreplace>>


:: Kraid's Sidehopper Missiles Out {"position":"850,2225","size":"100,100"}
I 'm out of Missiles  <<linkreplace "I 'm out of Missiles  ">><hr ><<include "Kraid 's Sidehopper No Missiles">><</linkreplace>>


:: Kraid Weapon Missiles 1 {"position":"975,2225","size":"100,100"}
Fire 2 Missiles  <<linkreplace "Fire 2 Missiles  ">>Missiles<hr ><<include "Kraid Missiles 1">><</linkreplace>>


:: Kraid Weapon Missiles 2 {"position":"1100,2225","size":"100,100"}
Continue the attack  <<linkreplace "Continue the attack  ">>attack<hr ><<include "Kraid Missiles 2">><</linkreplace>>


:: Kraid Weapon No Missiles {"position":"1225,2225","size":"100,100"}
I need at least 2 Missiles to fight Kraid  <<linkreplace "I need at least 2 Missiles to fight Kraid  ">><hr ><<include "Kraid No Missiles">><</linkreplace>>


:: Title Screen {"position":"100,2350","size":"100,100"}
=><=
#Twinetroid

<font size = "6 ">[[Start->PROLOGUE]] 
<<linkreplace "Load Game ">><<loadgame "Slot A ">><</linkreplace>>
[[Instructions]]
[[About]]
[[Credits]]
</font ><==
<<set $displayStats = 0; $displayMap = 0>>


:: About {"position":"225,2350","size":"100,100"}
###About
<i >Twinetroid </i >is based on <i >Metroid: Zebesian Incursion </i >, Volume 5 of the <a href="https://ja.wikipedia.org/wiki/%E5%86%92%E9%99%BA%E3%82%B2%E3%83%BC%E3%83%A0%E3%83%96%E3%83%83%E3%82%AF%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE1986%E5%B9%B4%E5%88%8A%E8%A1%8C%E4%BD%9C%E5%93%81 ">Famicom Adventure Game Book </a >series published in Japan from 1986-1991. These are essentially Choose Your Own Adventure books based on Nintendo games. The original text was translated off and on over the course of several years before being converted to Twine in November 2018. 

The text remains loyal to the spirit of the original, with a few alterations. For instance, Energy Tanks were called Energy Packs, and you used to have to fire four Missiles to escape from a Metroid rather than use Bombs. The room that describes how to defeat the Metroids was originally a death trap; now the Bombs have been moved here from the Map Room. Other oddities, like Zebes being an asteroid, were maintained from the original.

The mechanics have also changed. The original used dice rolls for combat, and players had to keep track of their progress and item collection by filling out stats sheets and crossing off entries in the book. Combat was extremely tedious because the player had to flip through the book every time they chose a weapon or rolled the dice, and then they had to calculate their health and missile count. <i >Twinetroid </i >obviously automates these mechanics.

One interesting feature of the original was the secret passages system. The player was given a map and told where secret rooms were located, but the chapter numbers were incomplete. For instance, you might be told there is a hidden passage leading to Room B-47, but given the chapter number of 1X4. You would have to flip through the book looking at each chapter (104, 114, etc.) until you found the one leading to B-47. Even the author admitted it was tedious, but it was the best way of simulating finding hidden passages.

<i >Twinetroid </i >uses a hidden passage system as well, but since it 's a text-based game, I 've implemented a number of mechanics that resemble a lot of tricks the original used, such as bombable blocks, hidden passages, and fake lava. I hope you enjoy discovering these secrets for yourself!

[[Back->Title Screen]]


:: Credits {"position":"350,2350","size":"100,100"}
==><==
##Metroid
<b >Zebes Incursion Directive </b ><b >Original Staff </b ><==
<i >Metroid: Zebes Shin-nyuu Shirei </i >Famicom Adventure Game Book #5
January 5, 1987

Planning/Composition: <a href="https://ja.wikipedia.org/wiki/%E5%A1%A9%E7%94%B0%E4%BF%A1%E4%B9%8B_(%E8%91%97%E4%BD%9C%E5%AE%B6)">Nobuyuki Shioda </a >(Studio Hard)
Production: Ikeda Misa
Text: Nobuyuki Shioda
Illustrations: <a href="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%9D%82%E9%A0%88%E7%BE%8E ">Arisaka Sumi </a >ï¿½Nintendo, 1986

==><==
<b >Twinetroid </b ><==
Translation and Programming: Devin Monnens

Presented by: <a href="http://www.metroiddatabase.com ">The Metroid Database </a ><img src="assets/images/Gun.webp"><i >Twinetroid </i >v.1.03 (October 6, 2021) 
(Fixed Room 35 bug)

<i >History </i >v.1.02 (October 4, 2021) (Fixed Rio bug &Bomb Room bug, added an extra save point, updated negative Energy display.)
v.1.01 (December 26, 2018)
v.1.00 (December 24, 2018)

[[Back->Title Screen]]


:: To seek the Holy Grail {"position":"475,2350","size":"100,100"}
<<set $random = random( 1,3)>>
	<<if $random == 1>>What is your favorite color? 
	[[Blue]]<<elseif $random == 2>>What is capital of Assyria?
	[[I don 't know that!]]
	<a href="https://en.wikipedia.org/wiki/Damascus ">Let me Google that for you...</a ><<else>>What is the airspeed velocity of an unladen swallow?
	[[African or European Swallow?]]
	[[I don 't know that!]]<</if>>


:: Blue {"position":"600,2350","size":"100,100"}
<<set $random = random( 1,2)>>
	<<if $random == 1>>[[Ok, you may go!->Debug Room Tourian]]<<else>>[[No, yellooooooooowww!!!->Debug Room Tourian]]<</if>>


:: Yellow {"position":"725,2350","size":"100,100"}
[[Ok, you may go!->Debug Room Tourian]]


:: I don't know that! {"position":"850,2350","size":"100,100"}
[[BLAAAAAAAAAAARRRRHHHH!!->Debug Room Tourian]]


:: African or European Swallow? {"position":"975,2350","size":"100,100"}
[[I don 't know that!!]]
<a href="http://style.org/unladenswallow/">Let me Google that for you...</a >


:: I don't know that!! {"position":"1100,2350","size":"100,100"}
Double-click this passage to edit it.


:: 43 [Secret-Passage Missiles] {"position":"1225,2350","size":"100,100"}
###Room B-43
At first glance, this room appears to only have a Blue Door to the South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geruda">><</linkreplace>><<else>><<set $combat = 1>><<if $missilePods.includes("3 ")>>There is an empty pedestal here, encrusted with lime.<<else>>A pedestal stands in the center of the room, thickly encrusted with lime. On top of it is a pristine Missile Pod. <<linkreplace "Missile Pod ">>(<span style="color:red">Missile Pod (3)</span> acquired.<<run setup.grantMissilePod("3 ", 2)>> Maximum Missiles increased to $maxMissiles.) <</linkreplace>><</if>>

I move about the room. My Radar Scanner detects a passage to a hidden room facing North. It 's <b >Room B-45 </b >. I 'll have to go further in the room to see if there 's a way forward. <span class="hides ">But there 's nothing here. Maybe I need check this from a different angle...</span >[[Go South->41]]
<span class="reveals ">When I turn around, I find a fake hole in the floor on the North side of the room. [[Go North.->45]]</span ><</if>>


:: 42 {"position":"100,2475","size":"100,100"}
###Room B-42
In this room, there are only Blue Doors to the North and South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geruda">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->41]]
[[Go South->44]]<</if>>


:: 44 [Secret-Passage] {"position":"225,2475","size":"100,100"}
###Room B-44
From this room, there is a Blue Door to the North and a corridor to the West.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geruda">><</linkreplace>><<else>><<set $combat = 1>>However, it seems there is also a hidden passage leading to a room to the East. Its room number is <b >B-47 </b >. <span class="reveals">There 's an odd rock formation. <<if $items.includes("Bombs ")>><<linkreplace "rock formation.">>It looks like I can blast it with a bomb.<</linkreplace>> <<linkreplace "bomb.">>[[I open a passageway heading East.->47]]<</linkreplace>><</if>></span >[[Go North->42]]
[[Go West->46]]<</if>>


:: 46 [Secret-Passage] {"position":"350,2475","size":"100,100"}
###Room B-46
There is a Blue Door facing North and a corridor to the East. My Radar picks up a room to the West. <b >It 's Room B-48 </b >.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geemer">><</linkreplace>><<else>><<set $combat = 1>>This chamber is full of odd green bubbles; I can 't tell if they are organic or mineral in construct. There are a number of odd fissures   in the wall that capture odd reflections of my suit. <<linkreplace "">>Upon further investigation, I discover one of these fissures contains a hidden passage leading West. [[Go West.->48]]<</linkreplace>>

[[Go North->57]]
[[Go East->44]]<</if>>


:: 57 [Secret-Passage] {"position":"475,2475","size":"100,100"}
###Room B-57
In this room, there is a Blue Door to the South, in addition to a passage to a hidden chamber facing North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geruda">><</linkreplace>><<else>><<set $combat = 1>>The hidden chamber is <b >Room B-59 </b >. There 's a small tunnel in this corner of the room, but it leads to a dead end.  <<if $items.includes("Bombs ")>><<linkreplace ".  ">>I blast a hole with my bombs, opening a small tunnel. As I head through, it collapses again behind me. [[Go North to Room 59.->59]]<</linkreplace>><</if>>

[[Go South->46]]<</if>>


:: 59 [Missiles] {"position":"600,2475","size":"100,100"}
###Room B-59
<<if $missilePods.includes("9 ")>>An empty pedestal stands in the center of the room, surrounded by a pool of lava.<<else>>A pedestal stands in the center of the room, surrounded by a pool of lava. If I carefully jump over the pool, I can grab the Missile Pod. <<linkreplace "Missile Pod ">>(<span style="color:red">Missile Pod (9)</span> acquired.<<run setup.grantMissilePod("9 ", 2)>> Maximum Missiles increased to $maxMissiles.) <</linkreplace>><</if>>

From here, South is the hidden path to <b >Room B-57 </b >. <b >Room B-60 </b >is to the North.

[[Go North->60]]
[[Go South->57]]


:: 60 [Missiles] {"position":"725,2475","size":"100,100"}
###Room B-60
This room is impassible. The only open path just goes back South to <b >Room B-59 </b >.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geruda">><</linkreplace>><<else>><<set $combat = 1>><<if $missilePods.includes("10 ")>>An empty pedestal stands in the center of the chamber.<<else>>A pedestal stands in the center of the chamber, holding a shiny new Missile Pod. <<linkreplace "Missile Pod ">>(<span style="color:red">Missile Pod (10)</span> acquired.<<run setup.grantMissilePod("10 ", 2)>> Maximum Missiles increased to $maxMissiles.) <</linkreplace>><</if>>

Since there are no more hidden rooms, [[go back South.->59]]<</if>>


:: 48 {"position":"850,2475","size":"100,100"}
###Room B-48
East is a passageway to <b >Hidden Room B-46 </b >. This chamber also continues West, and there is also a Blue Door to the North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">>
	<<set $random = random( 1,6)>>
	<<if $random == 3>><<goto "Multiviola">><<elseif $random == 1>><<goto "Geruda">><<elseif $random == 4>><<goto "Geruda">><<else>><<goto "Geemer">><</if>>
<</linkreplace>><<else>><<set $combat = 1>>[[Go North->58]]
[[Go East->46]]
[[Go West->52]]<</if>>


:: 58 [Red-Door] {"position":"975,2475","size":"100,100"}
###Room B-58
South is a Blue Door, and North is a Red Door.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geruda">><</linkreplace>><<else>><<set $combat = 1>><<if hasVisited("63")>>Since I have already gone North to the chamber behind the Red Door, I can either [[check the room again->63]] or [[retrace my steps and go back South->48]]<<else>><<if $missiles >1>>[[Blast open the Red Door->63]]<<else>>I do not have enough Missiles to open the Red Door. [[Go back South.->48]]<</if>><</if>><</if>>


:: 63 B [Item-Room] {"position":"1100,2475","size":"100,100"}
###Room B-63 - Norfair Map Room
<<if hasVisited("63")>><<else>>I fire Missiles at the Red Door. The Red Door takes 2 Missiles, and <span class="fx-rumble">KABOOM</span>, it opens. <<set $missiles = $missiles - 2>><</if>>

I move forward and take a look. In the center of the room stands the figure of a strange creature fashioned from stone and perhaps modeled after one of the life-forms of this asteroid. An iron plate is embedded at its feet. On the plate is a map of Norfair. (Norfair Map Acquired. I can now view the map below the Navigation Options.)<<run setup.grantMapItem("NorfairMap ")>>

I store this information into my computer.

Beyond this, there is nothing else in the room. [[I go back South to Room B-58.->58]]


:: 52 {"position":"1225,2475","size":"100,100"}
###Room B-52
<<set $enemyFrozen = 0>>From this room, there is a Blue Door to the North, and a corridor stretches East.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Multiviola">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->61]]
[[Go East->48]]<</if>>


:: 61 [Secret-Passage] {"position":"100,2600","size":"100,100"}
###Room B-61
North is a passage to a hidden chamber. South is a Blue Door, and there is a corridor to the West.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Dessgeega">><</linkreplace>><<else>><<set $combat = 1>>The hidden chamber to the North is <b >Room B-66 </b >. <span class="reveals">There 's a ledge high up<<if $enemyFrozen == 1>>, and I can use the frozen Dessgeega as a platform to reach the it. [[Go North.->66]]<<else>>...but it 's too far to jump.<</if>></span >[[Go West->64]]
[[Go South->52]]<</if>>


:: 64 {"position":"225,2600","size":"100,100"}
###Room B-64
<<set $enemyFrozen = 0>><<if $items.includes("RidleyStone ")>>Ridley has been defeated. The door to the North has deactivated for good.<<else>>There is a Blue Door to the North, and the room continues East.<</if>>

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">>
	<<set $random = random( 1,6)>>
	<<if $random == 3>><<goto "Multiviola">><<elseif $random == 2>><<goto "Holtz">><<elseif $random == 6>><<goto "Holtz">><<else>><<goto "Dessgeega">><</if>>
<</linkreplace>><<else>><<set $combat = 1>><<if !($items.includes("RidleyStone "))>>[[Go North->65]]<</if>>
[[Go East->61]]<</if>>


:: 65 {"position":"350,2600","size":"100,100"}
###Room B-65
{<<linkreplace "Save game?">>
  <<if Save.save("Slot A ")>>
    Game saved!
<</if>><</linkreplace>>
<<set $displayStats = 1>>}

My Command Computer chimes. 

ï¿½Warning. Ahead is the room of Ridley, the Boss-Level monster of Area B, Norfair. Ridley should be fought under ideal conditions. Decide whether you have the proper equipment and either confront Ridley or temporarily pull back and come again after preparing your equipment.ï¿½

<<if $missiles >1>>[[Go forward with your current equipment->Ridley]]<</if>>
[[Go back->Fight Ridley Later]]


:: 66 {"position":"475,2600","size":"100,100"}
###Room B-66
<<set $enemyFrozen = 0>>To the South is the hidden passageway to <b >Room B-67 </b >. Aside from that, there is a Blue Door to the North.

<<if $combat == 1>>Fight.  <<linkreplace "Fight.  ">>
	<<set $random = random( 1,6)>>
	<<if $random == 1>><<goto "Multiviola">><<elseif $random == 3>><<goto "Holtz">><<elseif $random == 4>><<goto "Holtz">><<else>><<goto "Dessgeega">><</if>>
<</linkreplace>><<else>><<set $combat = 1>>
[[Go North->67]]
[[Go South->61]]<</if>>


:: 67 [Secret-Passage] {"position":"600,2600","size":"100,100"}
###Room<<if $combat == 0>>   <</if>> B-67
There are Blue Doors to the North and South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Multiviola">><</linkreplace>><<else>><<set $combat = 1>>In this chamber there is a passage to the hidden room to the East. It is <b >Room B-71 </b >. If I canï¿½t discover it, I can only go South to <b >Room B-66 </b >or North to <b >Room B-68 </b >.

<<linkreplace "">>I spy a small gate in the ceiling. I shoot it with my Beam, and it opens a hidden door leading [[East.->71]]<br ><</linkreplace>>
[[Go North->68]]
[[Go South->66]]<</if>>


:: 68 [Secret-Passage] {"position":"725,2600","size":"100,100"}
###Room B-68
North is a passage to a hidden room. South is a Blue Door, and there is a corridor to the West.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geruda">><</linkreplace>><<else>><<set $combat = 1>>There is a passage to a hidden chamber to the North of here, <b >Room B-73 </b >. Alongside the wall is a large mass of weak <<link "bricks.  ">><<set $random = $random + 1>><<if $random == 12>>Alongside the wall is a large mass of weak bricks.
<br >Blasting away the wall reveals a hidden passage leading [[North.->73]]<</if>><</link>>

[[Go West->69]]
[[Go South->67]]<</if>>


:: 69 {"position":"850,2600","size":"100,100"}
###Room B-69
There is a Blue Door to the South, and the room extends to the East.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Dessgeega">><</linkreplace>><<else>><<set $combat = 1>>[[Go East->68]]
[[Go South->70]]<</if>>


:: 70 [Missiles] {"position":"975,2600","size":"100,100"}
###Room B-70
This room is a dead end. There is just a Blue Door leading back North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Multiviola">><</linkreplace>><<else>><<set $combat = 1>><<if $missilePods.includes("12 ")>>There is a cracked pedestal in the center of the chamber.<<else>>There is a pedestal in the center of the chamber that has been cracked by a rockfall. On top of it is a Missile Pod, still intact. <<linkreplace "Missile Pod ">>(<span style="color:red">Missile Pod (12)</span> acquired.<<run setup.grantMissilePod("12 ", 2)>> Maximum Missiles increased to $maxMissiles.) <</linkreplace>><</if>>

Aside from the pedestal, this chamber is just a dead end. [[I have to go back to the previous room.->69]]<</if>>


:: 71 [Red-Door] {"position":"1100,2600","size":"100,100"}
###Room B-71
West is the hidden passage to <b >Room B-67 </b >. Apart from that, there is a Red Door facing North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">>
	<<set $random = random( 1,6)>>
	<<if $random == 6>><<goto "Multiviola">><<elseif $random == 3>><<goto "Holtz">><<elseif $random == 1>><<goto "Holtz">><<else>><<goto "Geruda">><</if>>
<</linkreplace>><<else>><<set $combat = 1>><<if hasVisited("72")>>I 've already opened the Red Door, so the next room is empty. [[I go back West to Room B-67.->67]]<<else>><<if $missiles >1>>[[Blast open the Red Door->72]]<<else>>I need at least 2 Missiles to open the Red Door. [[I must go back West to Room B-67.->67]]<</if>><</if>><</if>>


:: 72 [Item-Room] {"position":"1225,2600","size":"100,100"}
###Room B-72
Boom<<linkreplace "Boom ">>, boom!<<linkreplace "boom!">>

With a heavy thud, the Missiles slam into the Red Door. When the smoke from the explosion clears, the door has opened to reveal a fine entrance. <<set $missiles = $missiles - 2>>

Upon entering the chamber, I behold the statue of a grotesque life-form placed in the center of the room, reverently offering some kind of machine in its stone arms (if that is indeed what they are). <span style="color:green">(Screw Attack collected)</span><<set $items = $items + [ "Screw Attack "]>>

After collecting it, there is nothing else in this room. [[I go back to the previous chamber.->71]]<</linkreplace>><</linkreplace>>


:: 47 [Secret-Passage] {"position":"100,2725","size":"100,100"}
###Room B-47
There is a hidden passage to <b >Room B-44 </b >facing West. A Blue Door faces North. There is a hidden room to the East. <span class="reveals "><<if $combat == 0>><<if $items.includes("Bombs ")>>  .<<else>>  .<</if>><</if>></span ><<if $combat == 1>>Fight  <<linkreplace "Fight  ">>
	<<set $random = random( 1,6)>>
	<<if $random == 5>><<goto "Rio">><<elseif $random == 3>><<goto "Geruda">><<elseif $random == 1>><<goto "Geruda">><<else>><<goto "Geemer">><</if>>
<</linkreplace>><<else>><<set $combat = 1>>The room appears to end in a rock wall.<<if $items.includes("Bombs ")>><<linkreplace ".">> Careful inspection reveals a hole on the floor that looks weak to explosives. I lay a bomb to blast open a hole to [[Room B-49.->49]]<</linkreplace>><</if>>

[[Go North->50]]
[[Go West->44]]<</if>>


:: 50 [Missiles] {"position":"225,2725","size":"100,100"}
###Room B-50
This room is a dead end. There is only a Blue Door facing South. I notice there is a hidden room to the North, but the passage is impassible from this direction.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Geruda">><</linkreplace>><<else>><<set $combat = 1>><<if $missilePods.includes("4 ")>>There is an empty pedestal in the center of the room, covered with a variety of cables.<<else>>A pedestal stands in the center of the room, covered by a wide assortment of cables snaking towards the center. Nested there is a Missile Pod. <<linkreplace "Missile Pod ">>(<span style="color:red">Missile Pod (4)</span> acquired.<<run setup.grantMissilePod("4 ", 2)>> Maximum Missiles increased to $maxMissiles.) <</linkreplace>><</if>>

There is a tunnel in this room leading to a hidden chamber to the North, but unless I can perform some special feat of engineering, I canï¿½t pass back through. It 's a one-way passage from the chamber to the North. Therefore, I have to go South to <b >Room B-47 </b >.

[[Go back to the room to the South.->47]]<</if>>


:: 45 {"position":"350,2725","size":"100,100"}
###Room B-45
Facing South is the passage to the <b >Hidden Room B-43 </b >. Apart from that, the room continues West.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Multiviola">><</linkreplace>><<else>><<set $combat = 1>>[[Go West->62]]
[[Go South->43]]<</if>>


:: 62 [Missiles] {"position":"475,2725","size":"100,100"}
###Room B-62
This room is a dead end. It leads only to the East.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Multiviola">><</linkreplace>><<else>><<set $combat = 1>><<if $missilePods.includes("11 ")>>There is an empty pedestal in the center of the room that once held a Missile Pod.<<else>>A pedestal stands in the center of the room, holding a Missile Pod that glitters in the dim light. <<linkreplace "Missile Pod ">>(<span style="color:red">Missile Pod (11)</span> acquired.<<run setup.grantMissilePod("11 ", 2)>> Maximum Missiles increased to $maxMissiles.) <</linkreplace>><</if>>

This room is a dead end, and since I can only go East, [[I retrace my steps.->45]]<</if>>


:: 73 [Missiles] {"position":"600,2725","size":"100,100"}
###Room B-73
Facing South is the passageway to <b >Hidden Room B-68 </b >. Aside from this, the room just continues to the West.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Multiviola">><</linkreplace>><<else>><<set $combat = 1>><<if $missilePods.includes("13 ")>>An empty pedestal sits in the center of the room.<<else>>A pedestal sits in the center of the room. A Missile Pod sits on top of it. <<linkreplace "Missile Pod ">>(<span style="color:red">Missile Pod (13)</span> acquired.<<run setup.grantMissilePod("13 ", 2)>> Maximum Missiles increased to $maxMissiles.) <</linkreplace>><</if>>

If I already collected the Missile Pod, I move about the room. I can either go South to <b >Room B-68 </b >or West to Room <b >B-74 </b >.

[[Go West->74]]
[[Go South->68]]<</if>>


:: 74 [Missiles Secret-Passage] {"position":"725,2725","size":"100,100"}
###Room B-74
At first glance, the room only continues East, but there is a passage to a hidden chamber to the North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Holtz">><</linkreplace>><<else>><<set $combat = 1>><<if $missilePods.includes("14 ")>>An empty pedastal sits in the center of the room.<<else>>A pedestal sits in the center of the room. I grab the Missile Pod sitting atop it. <<linkreplace "Missile Pod ">>(<span style="color:red">Missile Pod (14)</span> acquired.<<run setup.grantMissilePod("14 ", 2)>> Maximum Missiles increased to $maxMissiles.) <</linkreplace>><</if>>

<<set $random = 7>>I decide to move about the room. The way East is open. However, there is a hidden chamber to the North, but it is at the top of a very high ledge. It is <b >Room B-75 </b >. However, the wall looks weak in spots. Perhaps I could blast them open to make handholds...<span class="hides "><<link ".  ">><<set $random = random( 1,10)>><<if $random == 6>>[[Go North.->75]]<<else>>.  <</if>><</link>></span >[[Go East->73]]<</if>>


:: 75 [Secret-Passage] {"position":"850,2725","size":"100,100"}
###Room<<if $combat == 0>>   <</if>>B-75
There are only hidden tunnels leading from this chamber. North<<if $combat == 0>><<linkreplace ",">> which upon closer inspection is revealed as [[a fake wall->78]],<</linkreplace>><<else>>,<</if>> South, and East: all are hidden passages.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">>
	<<set $random = random( 1,6)>>
	<<if $random == 6>><<goto "Multiviola">><<elseif $random == 3>><<goto "Holtz">><<elseif $random == 5>><<goto "Holtz">><<else>><<goto "Geruda">><</if>>
<</linkreplace>><<else>><<set $combat = 1>>I already know about the passageway facing South, since that 's the way I came in came in. However, if I can 't discover the other two hidden rooms, I can only go South.

<<linkreplace "">>I check the East side of the ceiling and discover a weak wall. Blasting it open with my Beam reveals a [[hidden passage.->76]]<</linkreplace>>

[[Go South->74]]<</if>>


:: 76 [Red-Door] {"position":"975,2725","size":"100,100"}
###Room B-76
In this room, there is a hidden tunnel that continues West and a Red Door facing North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Dessgeega">><</linkreplace>><<else>><<set $combat = 1>><<if hasVisited("77")>>Since the Red Door is already open, there is nothing else in the next room, so [[go back West.->75]]<<else>><<if $missiles >1>>[[I blast open the Red Door.->77]]<<else>>I do not have enough Missiles to open the Red Door. [[Go back West.->75]]<</if>><</if>><</if>>


:: 77 [Item-Room] {"position":"1100,2725","size":"100,100"}
###Room B-77
<<if hasVisited("77")>><<else>>Two heavy thuds echo through the chamber as the Missiles explode on the portal. That sound mixes with the clatter of the collapsing door. I destroy the Red Door with an attack from 2 Missiles. <<set $missiles = $missiles - 2>><</if>>

I head through the other side of the portal. In adjoining chamber, <b >Room B-77 </b >, a stone statue modeled after a uniquely ghastly creature has been placed in the center of the desolate room. To my astonishment, this stone statue reverently holds a powerful beam weapon in its arms.
 
(<span style="color:purple">Wave Beam collected.</span> <<set $items = $items + [ "Wave Beam "]>><<set $items = $items - [ "Normal Beam ", "Ice Beam "]>> My other beam vanishes.)

Now that Iï¿½ve collected the weapon, there is nothing else in this room.

[[Go back South->76]]


:: 78 [Missiles Secret-Passage] {"position":"1225,2725","size":"100,100"}
###Room B-78
<<if $missilePods.includes("15 ")>>An empty pedestal sits in the center of the room.<<else>>A pedestal sits in the center of the room. A Missile Pod sits atop it. <<linkreplace "Missile Pod ">>(<span style="color:red">Missile Pod (15)</span> acquired.<<run setup.grantMissilePod("15 ", 2)>> Maximum Missiles increased to $maxMissiles.) <</linkreplace>><</if>>

I proceed along the narrow passageway to a dead end. Steam hisses from cracks in the walls, fogging my visor. At the end of the chamber is a gurgling pool of lava, but it 's too far to jump over.<span class="hides ">[.  ]</span >My Radar picks up a hidden chamber on the other side of the pool, <b >Room B-75 </b >, but I can 't seem to find the entrance.

<<linkreplace ".  ">>As I approach the pool, I discover it 's not magma at all! It 's some kind of ooze that resembles molten rock. [[I wade through it to reveal a hidden passage to the chamber beyond.->79]]<</linkreplace>>

[[Go South->75]]


:: 79 [Energy-Tank] {"position":"100,2850","size":"100,100"}
###Room B-79
This room is a dead end with only a passageway leading South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Dessgeega">><</linkreplace>><<else>><<set $combat = 1>> The battle is over.

<<if $energyPacks.includes("C ")>>Since I 've already collected the Energy Tank that was here, there is nothing else in this room, so [[go back South.->78]]<<else>>I grab the Energy Tank sitting in the corner of the room. (<span style="color:yellow">Energy Tank (C) collected. </span><<run setup.grantEnergyPack("C ")>>Energy restored to maximum.)<</if>>

Since I 've taken the Energy Tank, there 's nothing else in this room. [[I can only go back South.->78]]<</if>>


:: 49 {"position":"225,2850","size":"100,100"}
###Room B-49
From this room, there is a hidden passageway to the West leading to <b >Room B-47 </b >, and there is a Blue Door facing North.

<<if $combat == 1>>Fight.  <<linkreplace "Fight.  ">>
	<<set $random = random( 1,6)>>
	<<if $random == 4>><<goto "Multiviola">><<elseif $random == 3>><<goto "Geemer">><<elseif $random == 6>><<goto "Geemer">><<else>><<goto "Holtz">><</if>>
<</linkreplace>><<else>><<set $combat = 1>>[[Go North->51]]
[[Go West->47]]<</if>>


:: 51 [Missiles] {"position":"350,2850","size":"100,100"}
###Room B-51
The room continues North, and there is a Blue Door to the South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Holtz">><</linkreplace>><<else>><<set $combat = 1>><<if $missilePods.includes("5 ")>>An empty pedestal stands in the center of the chamber.<<else>>A metal pedestal stands in the center of the chamber, a Missile Pod on top. Steam hisses from the odd vent slits at its base. <<linkreplace "Missile Pod ">>(<span style="color:red">Missile Pod (5)</span> acquired.<<run setup.grantMissilePod("5 ", 2)>> Maximum Missiles increased to $maxMissiles.) <</linkreplace>><</if>>

From this room, I can head North to <b >Room B-54 </b >or South to <b >Room B-49 </b >.

[[Go North->54]]
[[Go South->49]]<</if>>


:: 54 [Missiles Secret-Passage] {"position":"475,2850","size":"100,100"}
###Room B-54
This room is a Missile Pod room, too. The room turns into a corridor leading South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Holtz">><</linkreplace>><<else>><<set $combat = 1>><<if $missilePods.includes("6 ")>><<else>>A Missile Pod  lies in the center of the room. <<linkreplace "Missile Pod  ">>(<span style="color:red">Missile Pod (6)</span> acquired.<<run setup.grantMissilePod("6 ", 2)>> Maximum Missiles increased to $maxMissiles.) <</linkreplace>><br ><</if>>
At first, it appears there is only the corridor leading South, but to the North there is also a passage leading to hidden <b >Room B-55 </b >. There 's a small tunnel leading this direction, but it 's too dark to see anything... <span class="hidden ">[[I lay a bomb, opening a hole to <b >Room B-55 </b >->55]]</span >[[Go South->51]]<</if>>


:: 55 [Missiles] {"position":"600,2850","size":"100,100"}
###Room B-55
<<if $missilePods.includes("7 ")>>There is a perfectly preserved pedestal in the center of the room. It stands empty.<<else>>In the center of the room is a large pedestal of gleaming metal. Although ancient it looks as if it were built yesterday. A Missile Pod sits on top. <<linkreplace "Missile Pod ">>(<span style="color:red">Missile Pod (7)</span> acquired.<<run setup.grantMissilePod("7 ", 2)>> Maximum Missiles increased to $maxMissiles.) <</linkreplace>><</if>>

From this room, I can head South to <b >Room B-54 </b >or West to <b >Room B-56 </b >.

[[Go West->56]]
[[Go South->54]]


:: 56 [Missiles Secret-Passage] {"position":"725,2850","size":"100,100"}
###Room B-56 <span class="hidden ">[[Go South->53]]</span ><<if $missilePods.includes("8 ")>>An empty pedestal towers in the center of the room.<<else>>A large pedestal towers in the center of the room, capped by a Missile Pod. <<linkreplace "Missile Pod ">>(<span style="color:red">Missile Pod (8)</span> acquired.<<run setup.grantMissilePod("8 ", 2)>> Maximum Missiles increased to $maxMissiles.) <</linkreplace>><</if>>

From this chamber, I can go to <b >Room B-55 </b >, but the long passageway to <b >Room B-53 </b >is hidden. Thick stalagtites hang obscenely in the oppressive gloom, obscuring my vision above.

[[Go East->55]]


:: 53 [Item-Room] {"position":"850,2850","size":"100,100"}
###Room B-53
The statue of a strange monster has been placed in the center of the room; it seems to be offering the beam weapon placed in its stone arms. Itï¿½s the Ice Beam.

<<if $items.includes("Ice Beam ")>>I currently have the Ice Beam. Therefore, it is pointless to take it now. Eventually there might be a time when I will need it, but for now, I leave it placed in the room as it is.<<else>><span style="color:blue">Ice Beam collected.</span> <<set $items = $items + [ "Ice Beam "]>><<set $items = $items - [ "Normal Beam ", "Wave Beam "]>><</if>>

Ice Beam collected, I consider which other room to go to from here. However, the tunnel from the North I just used is a one-way passage, and I canï¿½t go through it. [[I go through the other passageway leading South to Room B-50.->50]]


:: Dessgeega {"position":"975,2850","size":"100,100"}
<<set $displayMap = 0>>A Dessgeega approaches. The Dessgeega is Command Level IV. Itï¿½s a tough enemy.

<<if hasVisited("Dessgeega")>>The Dessgeega comes at me without giving me time to escape.<<else>><<include "Scan Dessgeega">><</if>>

There 's no time to switch to Missiles. I 'll have to use a Beam Weapon.
<<if $items.includes("Wave Beam ")>><<include "Dessgeega Beam Wave">><</if>>
<<if $items.includes("Ice Beam ")>><<include "Dessgeega Beam Ice">><</if>>
<<if $items.includes("Normal Beam ")>><<include "Dessgeega Beam Normal">><</if>>


:: Geruda {"position":"1100,2850","size":"100,100"}
<<set $displayMap = 0>>In front of me, an enemy creature, the Geruda, is blocking my way.

<<if hasVisited("Geruda")>>The Geruda is Command Level III. Compared with the Geemer and Rio, this enemy is quite strong.<<else>><<include "Scan Geruda">><</if>>

What should I do? <<include "Fight Geruda">>


:: Holtz {"position":"1225,2850","size":"100,100"}
<<set $displayMap = 0>>A Holtz flies in the air in front of me. However, whether its aware of my presence or not, it doesn 't immediately show signs of attacking.

<<if hasVisited("Holtz")>>According to the Command Computer, the Holtzï¿½s is Command Level III. The enemy is quite strong, so I had better be careful.<<else>><<include "Scan Holtz">><</if>>

What should I do? Fight it or run? <<include "Fight Holtz">>


:: Multiviola {"position":"100,2975","size":"100,100"}
<<set $displayMap = 0; $lastRoom = previous()>>A Multiviola flies around in front of me.

<<if hasVisited("Multiviola")>>The Multiviola is Command Level III. <<else>><<include "Scan Multiviola">><</if>>

What should I do? Fight or run? <<set $random = 7>><<include "Fight Multiviola">>


:: Ridley {"position":"225,2975","size":"100,100"}
<<set $displayMap = 0>>I step forward. In the center of the room is a table constructed from lustrous black rocks. On top sits an egg-sized black stone in the shape of an oval. It appears to be the Key Stone...

However, it doesn 't look like Ridley is here. This chamber seems to be Ridleyï¿½s Room, and yet...

If I take the Key Stone, I might get into a fight. Should I go ahead and take it?

[[Go and take it]]
[[It could be a trap, so wait and see what happens->Wait and see what happens]]


:: Norfair Combat Test {"position":"350,2975","size":"100,100"}
You can fight what you want here.

Geruda  <<linkreplace "Geruda  ">><<goto "Geruda">><</linkreplace>>
Holtz  <<linkreplace "Holtz  ">><<goto "Holtz">><</linkreplace>>
Multiviola  <<linkreplace "Multiviola  ">><<goto "Multiviola">><</linkreplace>>
Dessgeega  <<linkreplace "Dessgeega  ">><<goto "Dessgeega">><</linkreplace>>
Ridley  <<linkreplace "Ridley  ">><<goto "Ridley">><</linkreplace>>
Fight Ridley  <<linkreplace "Fight Ridley  ">><<goto "Fight Ridley">><</linkreplace>>
[[41]]
[[76]]
[[71]]
[[58]]

Repeat-Click tests
[[74]]
[[68]]

Get Varia <<linkreplace "Get Varia ">><<set $items = $items + [ "Varia "]>><</linkreplace>>
Get Bombs <<linkreplace "Get Bombs ">><<set $items = $items + [ "Bombs "]>><</linkreplace>>

Get Normal Beam <<linkreplace "Get Normal Beam ">><<set $items = $items + [ "Normal Beam "]>><<set $items = $items - [ "Ice Beam ", "Wave Beam "]>> --You got Normal Beam<</linkreplace>>
Get Ice Beam <<linkreplace "Get Ice Beam ">><<set $items = $items + [ "Ice Beam "]>><<set $items = $items - [ "Normal Beam ", "Wave Beam "]>> --You got Ice Beam!<</linkreplace>>
Get Wave Beam <<linkreplace "Get Wave Beam ">><<set $items = $items + [ "Wave Beam "]>><<set $items = $items - [ "Ice Beam ", "Normal Beam "]>> --You got Wave Beam<</linkreplace>>
Get Screw Attack <<linkreplace "Get Screw Attack ">><<set $items = $items + [ "Screw Attack "]>><</linkreplace>>

Get 2 Missiles <<linkreplace "Get 2 Missiles ">><<run setup.grantMissilePod("92 ", 2)>><</linkreplace>>[|SamusMissiles >[$missiles]]
Get 2 Missiles <<linkreplace "Get 2 Missiles ">><<run setup.grantMissilePod("93 ", 2)>><</linkreplace>>[|SamusMissiles >[$missiles]]
Get 2 Missiles <<linkreplace "Get 2 Missiles ">><<run setup.grantMissilePod("94 ", 2)>><</linkreplace>>[|SamusMissiles >[$missiles]]
Get Missiles (10) <<linkreplace "Get Missiles (10)">><<run setup.grantMissilePod("95 ", 10)>><</linkreplace>>
Get Missiles (20)  <<linkreplace "Get Missiles (20)">><<run setup.grantMissilePod("96 ", 20)>><</linkreplace>>
Refill Missiles <<linkreplace "Refill Missiles ">><<set $missiles = $maxMissiles>><</linkreplace>>
Lose All Missiles <<linkreplace "Lose All Missiles ">><<set $missiles = 0>><</linkreplace>>

Get Energy Tank (30)<<linkreplace "Get Energy Tank (30)">><<run setup.refillEnergy()>><</linkreplace>>
Get Energy Tank (60)<<linkreplace "Get Energy Tank (60)">><<run setup.refillEnergy()>><</linkreplace>>
Refill Energy<<linkreplace "Refill Energy ">><<set $energy = $maxEnergy; $energy = $maxEnergy>><</linkreplace>>
Dangerously Low <<linkreplace "Dangerously Low ">><<set $energy = 1>><</linkreplace>>

<<set $location = "Norfair "; $displayMap = 1>>


:: Scan Geruda {"position":"475,2975","size":"100,100"}
The Geruda is much stronger than the Geemer and Rio. The creature converts the incredible amount of energy given off by its body into blistering heat and constantly emits high body temperatures. Furthermore, the Geruda has organs to use this energy like jet propulsion, spraying flames from its feet. Thus, it can fly through the air using the energy it emits. The Geruda deals damage to its opponents with its talons, which are more enormous than the Rio 's, along with the blistering heat radiating from its skin.

The Geruda is Command Level III. It is a very tough enemy.


:: Fight Geruda {"position":"600,2975","size":"100,100"}
<<if $random == 0>>I can change my attack mode. Select one before the Gerudaï¿½s next attack.<</if>>
<<if $items.includes("Wave Beam ")>><<include "Geruda Beam Wave">><</if>>
<<if $items.includes("Ice Beam ")>><<include "Geruda Beam Ice">><</if>>
<<if $items.includes("Normal Beam ")>><<include "Geruda Beam Normal">><</if>>
<<if $missiles >0>><<include "Geruda Weapon Missiles">><</if>>
<<if $items.includes("Screw Attack ")>><<include "Geruda Weapon Screw Attack">><</if>>
Run  <<linkreplace "Run  ">>Run<hr ><<include "Run from Geruda">><</linkreplace>>


:: Geruda Beam Normal {"position":"725,2975","size":"100,100"}
Normal Beam  <<linkreplace "Normal Beam  ">>Beam<hr ><<include "Normal Beam Geruda">><</linkreplace>>


:: Geruda Beam Ice {"position":"850,2975","size":"100,100"}
Ice Beam  <<linkreplace "Ice Beam  ">>Beam<hr ><<include "Ice Beam Geruda">><</linkreplace>>


:: Geruda Beam Wave {"position":"975,2975","size":"100,100"}
Wave Beam  <<linkreplace "Wave Beam  ">>Beam<hr ><<include "Wave Beam Geruda">><</linkreplace>>


:: Geruda Weapon Missiles {"position":"1100,2975","size":"100,100"}
Missiles  <<linkreplace "Missiles  ">>Missiles<hr ><<include "Missiles Geruda">><</linkreplace>>


:: Geruda Weapon Screw Attack {"position":"1225,2975","size":"100,100"}
Screw Attack  <<linkreplace "Screw Attack  ">>Attack<hr ><<include "Screw Attack Geruda">><</linkreplace>>


:: Screw Attack Geruda {"position":"100,3100","size":"100,100"}
I Screw Attack the Geruda. The Screw Attack is 100% effective against this opponent. However, its success rate is 50%.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Screw Attack Hits Geruda">><<else>><<include "Screw Attack Misses Geruda">><</if>>


:: Screw Attack Hits Geruda {"position":"225,3100","size":"100,100"}
<img src="assets/images/GerudaScrewAttack.webp">The Screw Attack is a success. The surge of the Screw Attack meets the Geruda in mid-air in no time flat, dragging it into its rotation and tearing it to bits. The Geruda emits a final cry like a frog being crushed and annihilated.
	<<set $random = random( 1,6)>>
	<<if $random == 5>><<include "Nothing">><<elseif $random == 1>><<include "Missile">><<elseif $random == 3>><<include "Missile">><<else>><<include "Medium Energy Ball">><</if>>


:: Screw Attack Misses Geruda {"position":"350,3100","size":"100,100"}
The Screw Attack fails. The Gerudaï¿½s attack hits with enormous talons and a searing collision. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-1 Energy)</span><<set $energy = $energy - 1>><<else>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

<<set $random = 0>><<include "Fight Geruda">><</if>>


:: Run from Geruda {"position":"475,3100","size":"100,100"}
However, I won 't be able to get away so easily. 
	<<if $items.includes("Ice Beam ")>><<include "Escape from Geruda">><<else>><<include "Run from Geruda Fails">><</if>>


:: Run from Geruda Fails [Combat-Ended] {"position":"600,3100","size":"100,100"}
If I had an Ice Beam, I could freeze the Geruda and run, but I can 't use that weapon right now. Thankfully, the Gerudaï¿½s range is limited, so if I get far enough away, it won 't be able to attack me. However, just before I can get out of its range, I sustain an attack from the Gerudaï¿½s enormous talons. <<if $items.includes("Varia ")>><span style="color:red">(-1 Energy)</span><<set $energy = $energy - 1>><<else>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>
	
<<linkreplace "The battle is over.">><<set $combat = 0; $displayMap = 1>><<goto $lastRoom>><</linkreplace>><</if>>


:: Escape from Geruda [Combat-Ended] {"position":"725,3100","size":"100,100"}
I fire the Ice Beam. The beam 's blunt projectile is absorbed by the Geruda. Instantly the creature stops moving, and in the next moment falls to the ground.

I immediately get away from there and succeed in escaping the fight.

<<linkreplace "The battle is over.">><<set $combat = 0; $displayMap = 1>><<goto $lastRoom>><</linkreplace>>


:: Wave Beam Misses Geruda {"position":"850,3100","size":"100,100"}
The attack misses. The Gerudaï¿½s enormous talons rush in. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-1 Energy)</span><<set $energy = $energy - 1>><<else>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Continue with the attack? Or else run?<<include "Fight Geruda">><</if>>


:: Beam Hits Geruda {"position":"975,3100","size":"100,100"}
My beam catches the Geruda. The creatureï¿½s body instantly scatters to bits.
	<<set $random = random( 1,6)>>
	<<if $random == 6>><<include "Nothing">><<elseif $random == 2>><<include "Missile">><<elseif $random == 5>><<include "Missile">><<else>><<include "Medium Energy Ball">><</if>>


:: Ice Beam Misses Geruda {"position":"1100,3100","size":"100,100"}
The attack misses. The Gerudaï¿½s enormous talons rush in. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-1 Energy)</span><<set $energy = $energy - 1>><<else>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Continue with the attack? Or else run?<<include "Fight Geruda">><</if>>


:: Normal Beam Misses Geruda {"position":"1225,3100","size":"100,100"}
Fighting the Geruda with just the Normal Beam is extremely difficult. I will have to keep hitting it with my beam, constraining its movements. If I fail, I will take the Gerudaï¿½s incoming attack. 

The Normal Beamï¿½s aim is off. Simultaneously, the Gerudaï¿½s enormous talons swoop in, striking directly at my abdomen. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-1 Energy)</span><<set $energy = $energy - 1>><<else>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

<<set $random = 0>><<include "Fight Geruda">><</if>>


:: Normal Beam Hits Geruda {"position":"100,3225","size":"100,100"}
Though the attack is difficult, I somehow manage to succeed. I time my shots with the Gerudaï¿½s mid-air turn, and it takes a hit from the Normal Beam. When about 10 shots strike, the Gerudaï¿½s seems to dissolve, and its body crumbles.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Medium Energy Ball">><<else>><<include "Nothing">><</if>>


:: Normal Beam Geruda {"position":"225,3225","size":"100,100"}
I parry the Geruda with the Normal Beam. Will it succeed?
	<<set $random = random( 1,6)>>
	<<if $random == 3>><<include "Normal Beam Hits Geruda">><<else>><<include "Normal Beam Misses Geruda">><</if>>


:: Missiles Geruda {"position":"350,3225","size":"100,100"}
I attack the Geruda with a Missile. <span style="color:red">(-1 Missile)</span><<set $missiles = $missiles - 1>>

Missiles are 100% effective against the Geruda. However, they have only 50% accuracy.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Missile Hits Geruda">><<else>><<include "Missile Misses Geruda">><</if>>


:: Wave Beam Geruda {"position":"475,3225","size":"100,100"}
I rapidly fire the Wave Beam at the Geruda. Will I beat it?!
	<<set $random = random( 1,3)>>
	<<if $random == 3>><<include "Wave Beam Misses Geruda">><<else>><<include "Beam Hits Geruda">><</if>>


:: Ice Beam Geruda {"position":"600,3225","size":"100,100"}
The Ice Beam flies towards the Geruda. Now if I can skillfully take it down...
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Beam Hits Geruda">><<else>><<include "Ice Beam Misses Geruda">><</if>>


:: Missile Hits Geruda {"position":"725,3225","size":"100,100"}
My Missile hits! Although the Missile fired from my arm is small, the destructive power hidden inside it is large. The Geruda is easily blown to pieces.
	<<set $random = random( 1,6)>>
	<<if $random == 5>><<include "Nothing">><<elseif $random == 3>><<include "Medium Energy Ball">><<elseif $random == 6>><<include "Medium Energy Ball">><<else>><<include "Missile">><</if>>


:: Missile Misses Geruda {"position":"850,3225","size":"100,100"}
My Missile misses its mark. The projectile goes wide of the Geruda and hits the wall, emitting a flash of light. The Geruda seems to sneer as it howls a strange cry and attacks with its enormous talons and the extremely high temperatures given off by its skin. My defense fails, and I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-1 Energy)</span><<set $energy = $energy - 1>><<else>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

<<set $random = 0>><<include "Fight Geruda">><</if>>


:: Fight Holtz {"position":"975,3225","size":"100,100"}
<<if $items.includes("Wave Beam ")>><<include "Holtz Beam Wave">><</if>>
<<if $items.includes("Ice Beam ")>><<include "Holtz Beam Ice">><</if>>
<<if $items.includes("Normal Beam ")>><<include "Holtz Beam Normal">><</if>>
<<if $missiles >0>><<include "Holtz Weapon Missiles">><</if>>
<<if $items.includes("Screw Attack ")>><<include "Holtz Weapon Screw Attack">><</if>>
Run  <<linkreplace "Run  ">>Run<hr ><<include "Run from Holtz">><</linkreplace>>


:: Weak Beam Holtz {"position":"1100,3225","size":"100,100"}
I commence my attack against the Holtz. I quickly aim my beam at the enemy.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Weak Beam Hits Holtz">><<else>><<include "Weak Beam Misses Holtz">><</if>>


:: Holtz Weapon Screw Attack {"position":"1225,3225","size":"100,100"}
Screw Attack  <<linkreplace "Screw Attack  ">>Attack<hr ><<include "Screw Attack Holtz">><</linkreplace>>


:: Holtz Beam Wave {"position":"100,3350","size":"100,100"}
Wave Beam  <<linkreplace "Wave Beam  ">>Beam<hr ><<include "Wave Beam Holtz">><</linkreplace>>


:: Holtz Beam Ice {"position":"225,3350","size":"100,100"}
Ice Beam  <<linkreplace "Ice Beam  ">>Beam<hr ><<include "Weak Beam Holtz">><</linkreplace>>


:: Holtz Beam Normal {"position":"350,3350","size":"100,100"}
Normal Beam  <<linkreplace "Normal Beam  ">>Beam<hr ><<include "Weak Beam Holtz">><</linkreplace>>


:: Holtz Weapon Missiles {"position":"475,3350","size":"100,100"}
Missiles  <<linkreplace "Missiles  ">>Missiles<hr ><<include "Missiles Holtz">><</linkreplace>>


:: Weak Beam Hits Holtz {"position":"600,3350","size":"100,100"}
I successfully defeat the Holtz, but also take the full brunt of its attack. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><<else>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Still, I managed to successfully defeat the Holtz. 
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Medium Energy Ball">><<else>><<include "Nothing">><</if>>
<</if>>


:: Weak Beam Misses Holtz {"position":"725,3350","size":"100,100"}
My attack misses. The Holtz counterattacks. The high temperatures emitted by the Holtz are around 500 degrees. I am struck by the heat and the spikes growing on the Holtzï¿½s skin. <<if $items.includes("Varia ")>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><<else>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Should I keep fighting or run?<<include "Fight Holtz">><</if>>


:: Run from Holtz {"position":"850,3350","size":"100,100"}
<<if $items.includes("Ice Beam ")>>My current beam weapon is the Ice Beam. If I use it skilfully, I can easily run from the Holtz.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Escape Holtz Fails">><<else>><<include "Escape Holtz">><</if>>
<<else>><<include "Run from Holtz No Ice">><</if>>


:: Run from Holtz No Ice [Combat-Ended] {"position":"975,3350","size":"100,100"}
If I had an Ice Beam, I could freeze the Holtz and escape, but unfortunately, I donï¿½t. In any case, since enemy creatures almost always have a fixed range of movement, I think I can just escape the enemy 's range.

However, I 'm a little reckless to think I can escape without taking some kind of measures to defend against a Command Level III opponent. In the little time it takes to escape from the Holtzï¿½s range of movement, I also take two ramming attacks. <<if $items.includes("Varia ")>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><<else>><span style="color:red">(-6 Energy)</span><<set $energy = $energy - 6>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Nevertheless, I am somehow able to run. 

<<linkreplace "The battle is over.">><<set $combat = 0; $displayMap = 1>><<goto $lastRoom>><</linkreplace>><</if>>


:: Escape Holtz Fails [Combat-Ended] {"position":"1100,3350","size":"100,100"}
The Ice Beamï¿½s initial attack cleanly misses the Holtz. Then, I take the Holtzï¿½s ramming attack. <<if $items.includes("Varia ")>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><<else>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

However, the next attack successfully freezes the Holtz. After that, I just run. 

<<linkreplace "The battle is over.">><<set $combat = 0; $displayMap = 1>><<goto $lastRoom>><</linkreplace>><</if>>


:: Escape Holtz [Combat-Ended] {"position":"1225,3350","size":"100,100"}
The Ice Beamï¿½s flash absorbs the Holtz, and I escape with a sigh of relief. Now I simply pass by the side of my frozen opponent...

<<linkreplace "The battle is over.">><<set $combat = 0; $displayMap = 1>><<goto $lastRoom>><</linkreplace>>


:: Screw Attack Holtz {"position":"100,3475","size":"100,100"}
I fly at the Holtz with the Screw Attack.
	<<set $random = random( 1,3)>>
	<<if $random == 2>><<include "Big Attack Misses Holtz">><<else>><<include "Big Attack Hits Holtz">><</if>>


:: Wave Beam Holtz {"position":"225,3475","size":"100,100"}
I use the Wave Beam on the Holtz. A large wave fired from my beam flies towards the the creature...
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Big Attack Misses Holtz">><<else>><<include "Big Attack Hits Holtz">><</if>>


:: Missiles Holtz {"position":"350,3475","size":"100,100"}
I attack the Holtz with a Missile. <span style="color:red">(-1 Missile)</span><<set $missiles = $missiles - 1>>

The Holtz flies about in mid-air without indicating where it will attack. The Missileï¿½s accuracy rate is roughly 50%.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Big Attack Hits Holtz">><<else>><<include "Missile Misses Holtz">><</if>>


:: Scan Holtz {"position":"475,3475","size":"100,100"}
<img src="assets/images/Holtz.webp">The Holtz is an evolution of the Geruda. It doesnï¿½t have the Gerudaï¿½s enormous talons, but it does have spikes growing on its body and swoops to attack, radiating temperatures even higher than the Gerudaï¿½s. Its means of locomotion is the same as the Geruda, propelling itself with jets using the energy generated inside its body and freely flying about in mid-air. 

However, even though it 's an evolution of the Geruda, its level and damage are different. If anything, instead of saying the Holtz evolved from the Geruda, it seems better to say that both are creatures with the same ancestor whose genes had already diverged.


:: Big Attack Misses Holtz {"position":"600,3475","size":"100,100"}
The Holtz is defeated. However, in a final act of defiance, it shoots a single spike at me. The pointed spike makes a direct hit to my shoulder. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><<else>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

At any rate, the Holtz is defeated. It is mercilessly blown to bits in my attack.
	<<set $random = random( 1,6)>>
	<<if $random == 1>><<include "Nothing">><<elseif $random == 2>><<include "Missile">><<elseif $random == 3>><<include "Missile">><<else>><<include "Medium Energy Ball">><</if>>
<</if>>


:: Big Attack Hits Holtz {"position":"725,3475","size":"100,100"}
The Holtz is destroyed when it absorbs the attack. One hit is enough. The creature doesn 't stand a chance and is splattered through the air.
	<<set $random = random( 1,6)>>
	<<if $random == 6>><<include "Nothing">><<elseif $random == 4>><<include "Missile">><<elseif $random == 5>><<include "Missile">><<else>><<include "Medium Energy Ball">><</if>>


:: Missile Misses Holtz {"position":"850,3475","size":"100,100"}
My Missileï¿½s aim is off. The shot is wasted, and the Holz follows its trajectory back and strikes. The heat emitting from the Holtz 's body feels unbearable as it draws near. There is an impactï¿½a blow from the Holtzï¿½s spikes. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><<else>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Keep fighting?<<include "Fight Holtz">><</if>>


:: Scan Multiviola {"position":"975,3475","size":"100,100"}
The Multiviola is rock melted under high temperatures that Mother Brain has breathed her life force into. It has strange floating abilities and flies around the room. It is also incredibly fast. It is Command Level III.

If I come across these, I should definitely be prepared to take damage. Also, the Multiviola is blindingly fast, so it might be better to run.


:: Fight Multiviola {"position":"1100,3475","size":"100,100"}
<<if $random == 0>>I attack the Multiviola.<</if>><<if $random == 7>><<else>>Which attack mode should I use against the Multiviola?<</if>>
<<if $items.includes("Wave Beam ")>><<include "Multiviola Beam Wave">><</if>>
<<if $items.includes("Ice Beam ")>><<include "Multiviola Beam Ice">><</if>>
<<if $items.includes("Normal Beam ")>><<include "Multiviola Beam Normal">><</if>>
<<if $missiles >0>><<include "Multiviola Weapon Missiles">><</if>>
<<if $items.includes("Screw Attack ")>><<include "Multiviola Weapon Screw Attack">><</if>>
Run  <<linkreplace "Run  ">>Run<hr ><<include "Run from Multiviola">><</linkreplace>>


:: Multiviola Weapon Screw Attack {"position":"1225,3475","size":"100,100"}
Screw Attack  <<linkreplace "Screw Attack  ">>Attack<hr >{
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Strong Attack Misses Multiviola">><<else>><<include "Screw Attack Hits Multiviola">><</if>>
<</linkreplace>>


:: Multiviola Beam Wave {"position":"100,3600","size":"100,100"}
Wave Beam  <<linkreplace "Wave Beam  ">>Beam<hr >{
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Strong Attack Misses Multiviola">><<else>><<include "Wave Beam Hits Multiviola">><</if>>
<</linkreplace>>


:: Multiviola Weapon Missiles {"position":"225,3600","size":"100,100"}
Missiles  <<linkreplace "Missiles  ">>Missiles<hr >I fire a Missile at the Multiviola. <span style="color:red">(-1 Missile)</span><<set $missiles = $missiles - 1>>
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Strong Attack Misses Multiviola">><<else>><<include "Missile Hits Multiviola">><</if>>
<</linkreplace>>


:: Multiviola Beam Ice {"position":"350,3600","size":"100,100"}
Ice Beam  <<linkreplace "Ice Beam  ">>Beam<hr ><<include "Ice Beam Multiviola">><</linkreplace>>


:: Multiviola Beam Normal {"position":"475,3600","size":"100,100"}
Normal Beam  <<linkreplace "Normal Beam  ">>Beam<hr >The Normal Beam is no match for the Multiviola. Since this is all I can use, I run. <<include "Escape Multiviola">><</linkreplace>>


:: Strong Attack Misses Multiviola {"position":"600,3600","size":"100,100"}
My attack fails! The Multiviola spins like a top at high speed and rushes toward me. Since its attack uses every wall bounce to about at high speeds, it is extremely difficult to predict. The Multiviola bounces off the walls several times before striking me. Since the creature continuously maintains a half-melted state owing to the high temperatures, the impact of the blow is great. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><<else>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Should I keep fighting, or is it better to run?<<set $random = 7>><<include "Fight Multiviola">><</if>>


:: Ice Beam Multiviola {"position":"725,3600","size":"100,100"}
I attack the Multiviola with the Ice Beam! However, the Ice Beam is not very effective when my opponent is moving at such high speeds.
	<<set $random = random( 1,3)>>
	<<if $random == 3>><<include "Ice Beam Hits Multiviola">><<else>><<include "Ice Beam Misses Multiviola">><</if>>


:: Ice Beam Hits Multiviola {"position":"850,3600","size":"100,100"}
I have a very hard time defeating the Multiviola. What 's more, I am showered by its searing spray, and take damage. <<if $items.includes("Varia ")>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><<else>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

In any event, I somehow defeat the Multiviola with the Ice Beam.
	<<set $random = random( 1,6)>>
	<<if $random == 6>><<include "Multiviola Nothing">><<elseif $random == 4>><<include "Multiviola Missiles">><<elseif $random == 5>><<include "Multiviola Missiles">><<else>><<include "Multiviola Energy">><</if>>
<</if>>


:: Ice Beam Misses Multiviola {"position":"975,3600","size":"100,100"}
If I attack with the Ice Beam continuously, it has the special property of easily freezing even melted rock. However, if this beam is used in a fight with an enemy of Command Level III or higher, I absolutely must execute a series of consecutive attacks.

The frozen Multiviola thaws. Simultaneously, its movements are even faster than before, and it deals me damage. <<if $items.includes("Varia ")>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><<else>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Is it better to keep fighting or run?<<set $random = 7>><<include "Fight Multiviola">><</if>>


:: Run from Multiviola {"position":"1100,3600","size":"100,100"}
<<if $items.includes("Ice Beam ")>><<include "Escape Multiviola Ice Beam">><<else>><<include "Escape Multiviola">><</if>>


:: Escape Multiviola [Combat-Ended] {"position":"1225,3600","size":"100,100"}
Finally, I enter the Multiviolaï¿½s blind spot, but before I can run, I take two attacks. I take considerable damage. <<if $items.includes("Varia ")>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><<else>><span style="color:red">(-6 Energy)</span><<set $energy = $energy - 6>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Still, I am somehow able to get inside the blind spot of the Multiviolaï¿½s range of movement. After that, it flies away, and it 's now safe for me to move about the room as I please.

<<linkreplace "The battle is over.">><<set $combat = 0; $displayMap = 1>><<goto $lastRoom>><</linkreplace>><</if>>


:: Escape Multiviola Ice [Combat-Ended] {"position":"100,3725","size":"100,100"}
I take damage from the Multiviola 's ramming attack. <<if $items.includes("Varia ")>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><<else>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

However, I am able to somehow get away with only that little damage. I find a blind spot in the Multiviolaï¿½s movement pattern. After it flies away, it 's safe to move around the room freely.

<<linkreplace "The battle is over.">><<set $combat = 0; $displayMap = 1>><<goto $lastRoom>><</linkreplace>><</if>>


:: Escape Frozen Multiviola [Combat-Ended] {"position":"225,3725","size":"100,100"}
I freeze the Multiviola with the Ice Beam. While it 's frozen and can 't move, I successfully escape. I don 't take any damage. Now it 's safe to run to the next room before it thaws.

<<linkreplace "The battle is over.">><<set $combat = 0; $displayMap = 1>><<goto $lastRoom>><</linkreplace>>


:: Multiviola Nothing {"position":"350,3725","size":"100,100"}
<span style="color:red">Nothing</span> is left in the remains of the Multiviola.

A new Multiviola comes rushing towards me.  <<linkreplace "A new Multiviola comes rushing towards me.  ">>me.<hr ><<goto "Fight Another Multiviola">><</linkreplace>>


:: Multiviola Missiles {"position":"475,3725","size":"100,100"}
The Multiviola is destroyed, leaving Missiles behind in its remains. <span style="color:red">(+2 Missiles)</span><<set $missiles = $missiles + 2>><<if $missiles >$maxMissiles>><<set $missiles = $maxMissiles>><</if>>

A new Multiviola comes rushing towards me.  <<linkreplace "A new Multiviola comes rushing towards me.  ">>me.<hr ><<goto "Fight Another Multiviola">><</linkreplace>>


:: Multiviola Energy {"position":"600,3725","size":"100,100"}
An Energy Ball appears in the remains of the Multiviola. <span style="color:yellow">(+5 Energy)</span><<set $energy = $energy + 5>><<if $energy >$maxEnergy>><<set $energy = $maxEnergy>><</if>>

A new Multiviola comes rushing towards me.  <<linkreplace "A new Multiviola comes rushing towards me.  ">>me.<hr ><<goto "Fight Another Multiviola">><</linkreplace>>


:: Fight Another Multiviola {"position":"725,3725","size":"100,100"}
The creature called the Multiviola has the same traits as the Zeb and will attack in a group. If I defeat one, they will keep coming one after the other. Because of this, I 'll eventually have to break off the attack and run for it. However, if I can keep defeating the Multiviolas, I can replenish my Energy and Missiles.

Well, what should I do?<<set $random = 7>><<include "Fight Multiviola">>


:: Screw Attack Hits Multiviola {"position":"850,3725","size":"100,100"}
I attack the Multiviola.

I explode forward with the Screw Attack. The Multiviola canï¿½t withstand the blast and disintegrates in mid-air.
	<<set $random = random( 1,6)>>
	<<if $random == 4>><<include "Multiviola Nothing">><<elseif $random == 1>><<include "Multiviola Missiles">><<elseif $random == 2>><<include "Multiviola Missiles">><<else>><<include "Multiviola Energy">><</if>>


:: Wave Beam Hits Multiviola {"position":"975,3725","size":"100,100"}
I attack the Multiviola with the Wave Beam! It 's a little difficult since I have to hit the Multiviola flying around at very high speeds with consecutive beam shots. Still, I successfully defeat the Multiviola while avoiding its attacks. In comparison with the Normal Beam and Ice Beam, the Wave Beam is a weapon with incredible power.
	<<set $random = random( 1,6)>>
	<<if $random == 5>><<include "Multiviola Nothing">><<elseif $random == 1>><<include "Multiviola Missiles">><<elseif $random == 3>><<include "Multiviola Missiles">><<else>><<include "Multiviola Energy">><</if>>


:: Missile Hits Multiviola {"position":"1100,3725","size":"100,100"}
I instantly calculate the angle of reflection when the Multiviola uses the walls to rebound. I again calculate the relative speeds of it and the Missile, which explodes at the point I predicted.

My calculations are correct. The Multiviola strikes the wall and changes course, floating up. Then the Missile hits dead-on. A large <i >BOOM </i >echoes through the room, and the Multiviola is blown to smithereens.
	<<set $random = random( 1,6)>>
	<<if $random == 6>><<include "Multiviola Nothing">><<elseif $random == 2>><<include "Multiviola Energy">><<elseif $random == 4>><<include "Multiviola Energy">><<else>><<include "Multiviola Missiles">><</if>>


:: Scan Dessgeega {"position":"1225,3725","size":"100,100"}
<img src="assets/images/Dessgeega.webp">The Dessgeega is this floorï¿½s miniboss and the second-toughest enemy next to Ridley. This creature has also been modified by Mother Brain. It appears to be a cyborg like the Sidehopper, with powerful springs set into its legs. Furthermore, its huge talons and thick legs dwarf the Rio and Geruda, and its claws have been modified to deliver electric shocks.

The creature rushes at me faster than I can ready myself.


:: Dessgeega Beam Wave {"position":"100,3850","size":"100,100"}
Wave Beam  <<linkreplace "Wave Beam  ">>Beam<hr >I attack the Dessgeega with the Wave Beam!
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Wave Beam Hits Dessgeega">><<else>><<include "Wave Beam Misses Dessgeega">><</if>>
<</linkreplace>>


:: Dessgeega Beam Ice {"position":"225,3850","size":"100,100"}
Ice Beam  <<linkreplace "Ice Beam  ">>Beam<hr >I promptly fire the Ice Beam at the Dessgeega. There is no time to select another weapon.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Ice Beam Misses Dessgeega">><<else>><<include "Ice Beam Hits Dessgeega">><</if>>
<</linkreplace>>


:: Dessgeega Beam Normal {"position":"350,3850","size":"100,100"}
I havenï¿½t collected the Wave Beam or the Ice Beam. Fight with the Normal Beam.  

<<linkreplace "Fight with the Normal Beam.">><hr >The Dessgeegaï¿½s attack is fierce. It has reinforced leg muscles, thick arms more powerful than those of all other enemies, and enormous talons that can deliver an electric shock. The lightning speed of its attack means I can 't use anything other than beam weapons on it.

It just so happens that the only beam weapon I currently possess is the Normal Beam...and the Normal Beam seems to be no match for the Dessgeega. <hr ><<include "Dessgeega Normal Beam Damage">><</linkreplace>>


:: Wave Beam Hits Dessgeega {"position":"475,3850","size":"100,100"}
The Wave Beam strikes the stubborn Dessgeega, preventing it from getting close to me. The creature finally dies in an explosion. It is a triumph of the Wave Beamï¿½s power and my athletic abilities and reflexes.
	<<set $random = random( 1,6)>>
	<<if $random == 4>><<include "Nothing">><<elseif $random == 2>><<include "Missile">><<elseif $random == 6>><<include "Missile">><<else>><<include "Medium Energy Ball">><</if>>


:: Wave Beam Misses Dessgeega {"position":"600,3850","size":"100,100"}
The Wave Beam attack is a little soft on the Dessgeega. However, I am somehow able to defeat it. But at the same time, I also take a blow from the creature 's enormous talons. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>
	<<set $random = random( 1,6)>>
	<<if $random == 1>><<include "Nothing">><<elseif $random == 3>><<include "Missile">><<elseif $random == 5>><<include "Missile">><<else>><<include "Medium Energy Ball">><</if>>
<</if>>


:: Ice Beam Misses Dessgeega {"position":"725,3850","size":"100,100"}
The initial shot from the Ice Beam fails. The Dessgeega avoids being frozen and I absorb its ramming attack. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

However, my second attack succeeds. The Dessgeega turns into a ball of ice and falls to the ground. Now I can run, but it 's also vulnerable... <<include "Fight Frozen Dessgeega">><</if>>


:: Ice Beam Hits Dessgeega {"position":"850,3850","size":"100,100"}
I succeed in freezing the Dessgeega with my Ice Beam. The Dessgeegaï¿½s enormous legs stop about 20 centimeters in front of my eyes. I stopped it by a hairï¿½s breadth. If I had attacked just a little later, I would have taken a large blow from the Dessgeegaï¿½s enormous talons.

Well, if the Dessgeega is frozen now, I can escape unscathed, but now it 's also vulnerable to attack...<<include "Fight Frozen Dessgeega">>


:: Run from Frozen Dessgeega [Combat-Ended] {"position":"975,3850","size":"100,100"}
Taking a backward glance at the Dessgeega frozen by the Ice Beam, I clear out of there. It is more profitable to run away than it is to fight the Dessgeega head-on.

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><<set $displayMap = 1>><</linkreplace>><<set $enemyFrozen = 1>>


:: Fight Frozen Dessgeega {"position":"1100,3850","size":"100,100"}
<<if $items.includes("Ice Beam ")>><<include "Ice Beam Frozen Dessgeega">><</if>>
<<if $missiles >0>><<include "Dessgeega Weapon Missiles">><</if>>
<<if $items.includes("Screw Attack ")>><<include "Dessgeega Screw Attack">><</if>>
Run  <<linkreplace "Run  ">>Run<hr ><<include "Run from Frozen Dessgeega">><</linkreplace>>


:: Dessgeega Screw Attack {"position":"1225,3850","size":"100,100"}
Screw Attack  <<linkreplace "Screw Attack  ">>Attack<hr ><<include "Screw Attack Frozen Dessgeega">><</linkreplace>>


:: Missiles Frozen Dessgeega {"position":"100,3975","size":"100,100"}
<img src="assets/images/DessgeegaMissileDestroy.webp">It is easy to destroy a frozen and immobile enemy with a Missile. <span style="color:red">(-1 Missile)</span><<set $missiles = $missiles - 1>>

The Dessgeega gives a strange, shrill cry and perishes.
	<<set $random = random( 1,6)>>
	<<if $random == 1>><<include "Nothing">><<elseif $random == 3>><<include "Energy Ball">><<elseif $random == 5>><<include "Energy Ball">><<else>><<include "Missile">><</if>>


:: Screw Attack Frozen Dessgeega {"position":"225,3975","size":"100,100"}
I have no trouble defeating a frozen enemy with the Screw Attack. The Dessgeega is destroyed.
	<<set $random = random( 1,6)>>
	<<if $random == 4>><<include "Nothing">><<elseif $random == 2>><<include "Missile">><<elseif $random == 6>><<include "Missile">><<else>><<include "Medium Energy Ball">><</if>>


:: Dessgeega Weapon Missiles {"position":"350,3975","size":"100,100"}
Missiles  <<linkreplace "Missiles  ">>Missiles<hr ><<include "Missiles Frozen Dessgeega">><</linkreplace>>


:: Ice Beam Frozen Dessgeega {"position":"475,3975","size":"100,100"}
Continue attacking with the Ice Beam  <<linkreplace "Continue attacking with the Ice Beam  ">>Beam<hr ><<include "Attack Frozen Dessgeega with Ice Beam">><</linkreplace>>


:: Ice Beam Misses Frozen Dessgeega {"position":"600,3975","size":"100,100"}
I have to attack the Dessgeega while keeping it in a frozen state, or I can 't beat it with just the Ice Beam. But I am careless. By the time I realize this, it is already too late. The Dessgeegaï¿½s enormous legs send me flying back. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

While I am flying through the air, I fire the Ice Beam. Again, the Dessegeegaï¿½s movement ceases.

Should I continue to fight with the Ice Beam? <<include "Fight Frozen Dessgeega">><</if>>


:: Attack Frozen Dessgeega with Ice Beam {"position":"725,3975","size":"100,100"}
I attack again with the Ice Beam.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Ice Beam Misses Frozen Dessgeega">><<else>><<include "Ice Beam Hits Frozen Dessgeega">><</if>>


:: Ice Beam Hits Frozen Dessgeega {"position":"850,3975","size":"100,100"}
Nonetheless, I succeed in beating the Dessgeega with just the Ice Beam. I press on with the attack while being careful not to thaw it.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Dessgeega Energy Ball">><<else>><<include "Dessgeega Nothing">><</if>>


:: Dessgeega Energy Ball [Combat-Ended] {"position":"975,3975","size":"100,100"}
The enemy is destroyed, leaving an Energy Ball in its remains. <span style="color:yellow">(+1 Energy)</span><<set $energy = $energy + 1>><<if $energy >$maxEnergy>><<set $energy = $maxEnergy>><</if>>

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><<set $displayMap = 1>><</linkreplace>>


:: Dessgeega Nothing [Combat-Ended] {"position":"1100,3975","size":"100,100"}
The enemy vanishes, leaving <span style="color:red">nothing</span> behind.

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><<set $displayMap = 1>><</linkreplace>>


:: Go and take it {"position":"1225,3975","size":"100,100"}
The instant I take the Key Stone, the door behind me closes with a clang. In addition, the Key Stone I tried to take is a forgery. I fell into the trap hook, line, and sinker. I canï¿½t get out of this room.

<<if $items.includes("Bombs ")>>[[Lay a Bomb->Use Bombs to Escape]]<</if>>
<<if $missiles >1>>[[Fire Missiles->Use Missiles to Escape]]<</if>>


:: Wait and see what happens {"position":"100,4100","size":"100,100"}
I wait and see what happens and hear a noise behind me. Ridley?!

[[Turn around to face him and make an attack->Turn Around and Attack Ridley]]
[[Take a step forward, then turn around so I can make a sudden attack->Fell in a Trap]]


:: Use Bombs to Escape {"position":"225,4100","size":"100,100"}
I search for a thin part of the wall with my Radar and set some Bombs there. The room is inundated by a series of three explosions. The thin wall is blown back. Instantly, a dense cloud of dust billows up. [[I successfully created an exit.->Ridley Appears]]


:: Use Missiles to Escape {"position":"350,4100","size":"100,100"}
I search for a thin spot on the surface of the wall with my Radar. I face that spot and fire Missiles. <span style="color:red">(-2 Missiles)</span><<set $missile = $missile - 2>>

<i ><span class="fx-rumble ">ZOOM, ZOOM.</span></i >As if hitting a beat, I fire the Missiles in succession. A dense cloud of dust boils up. [[I succeed in opening an exit.->Ridley Appears]]


:: Turn Around and Attack Ridley {"position":"475,4100","size":"100,100"}
<img src="assets/images/Ridley.webp">The instant I turn and make my attack, something slams into me. Like a spike thrust into my torso, the pain runs through every inch of my body. It 's Ridleyï¿½s fire breath.

This fire breath is otherworldly. Ridley is the original inhabitant of this asteroid and has psychic abilities, which gives him a special power to stimulate pain in his opponents. Such is the flame attack I receive. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-5 Energy)</span><<set $energy = $energy - 5>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>>
	<<if $energy >0>><<include "Fight Ridley">><<else>><<include "Ridley Roast">><</if>>


:: Fell in a Trap {"position":"600,4100","size":"100,100"}
However, this room is a trap. Just as I take a step forward, the doors to the entrance behind me close, and I am shut in. The stone sitting on the table is a forgery made from some kind of plastic material. If I canï¿½t get out of this room...

<<if $items.includes("Bombs ")>>[[Use Bombs->Use Bombs to Escape]]<</if>>
<<if $missiles >1>>[[Use Missiles->Use Missiles to Escape]]<</if>>


:: Fight Ridley {"position":"725,4100","size":"100,100"}
<<if $missiles <2>>However, I 'll need at least 2 Missiles to fight Ridley.<<else>>Should I Ridley with my current equipment or pull back?<</if>>

<<if $missiles >1>>Fight as-is  <<linkreplace "Fight as-is  ">><hr ><<include "Fire Missiles at Ridley 1">><</linkreplace>><</if>>
Pull back  <<linkreplace "Pull back  ">><hr >{
	<<if $energy >9>><<include "Escape Ridley">><<else>><<include "Escape from Ridley Fails">><</if>>
<</linkreplace>>


:: Ridley Roast [GAME-OVER] {"position":"850,4100","size":"100,100"}
I am torn apart in Ridleyï¿½s first attack. I should try again and come back after after upgrading my equipment.<<set $energy = 0>>

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Ridley Appears {"position":"975,4100","size":"100,100"}
<img src="assets/images/Ridley.webp">The cloud of dust settles. The open exit comes into view.

ï¿½At the same moment, there is an enormous creature there. Its overall height is easily three meters. Its silhouette looks like an ancient dinosaur...except for the shadow of the enormous wings on its back...

ï¿½Itï¿½s Ridley. 

The instant I realize this, I feel sharp a pain throughout my entire body. It 's Ridleyï¿½s attack. He breathes fire.

As the only creature that lived on the asteroid Zebes in the early days when this environment was uninhabitable (although now it has been improved by the Space Pirates), Ridley has psychic powers and the ability to fly. But now his mind is controlled by Mother Brain, and though he was originally docile, he has been transformed into a creature of indescribable cruelty. 

Ridleyï¿½s flame attack is among his psionic abilities, so when I feel those flames, the pain he induces throughout my entire body all at once is incredible. I take this attack. <<if $items.includes("Varia ")>><span style="color:red">(-5 Energy)</span><<set $energy = $energy - 5>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>>
	<<if $energy >0>><<include "Fight Ridley">><<else>><<include "Ridley Roast">><</if>>


:: Escape Ridley [Combat-Ended] {"position":"1100,4100","size":"100,100"}
While dodging left and right to avoid Ridleyï¿½s attacks, I successfully escape. [[Thereupon, I go back South to <b >Room B-64 </b >.->64]]<<set $displayMap = 1>>


:: Escape from Ridley Fails [GAME-OVER] {"position":"1225,4100","size":"100,100"}
I thought I could try and run, but could not force my way through Ridley 's fire breath. Ridley again inflicts a flame attack. And so now, my Energy spent, I perish, my strength exhausted.<<set $energy = 0>>

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Fire Missiles at Ridley 1 {"position":"100,4225","size":"100,100"}
I fire Missiles at Ridley. The 2 Missiles fly towards him as if each has a will of its own. <span style="color:red">(-2 Missiles)</span><<set $missiles = $missiles - 2>>
	<<set $random = random( 1,6)>>
	<<if $random == 4>><<include "Missiles Miss Ridley 1">><<else>><<include "Missiles Hit Ridley 1">><</if>>


:: Missiles Miss Ridley 1 {"position":"225,4225","size":"100,100"}
My attack is swallowed by Ridleyï¿½s flames. Instead, I take damage from his attack. <<if $items.includes("Varia ")>><span style="color:red">(-5 Energy)</span><<set $energy = $energy - 5>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>>
	
<<if $energy <1>><<set $energy = 0>><<include "Burnt to a Crisp">><<else>>Fire 2 Missiles  <<linkreplace "Fire 2 Missiles  ">>Fire 2 Missiles<hr ><<include "Fire Missiles at Ridley 1">><</linkreplace>>
Wave Beam  <<linkreplace "Wave Beam  ">>Wave Beam<hr ><<include "Ridley Wave Beam 1">><</linkreplace>>Run  <<linkreplace "Run  ">><hr ><<include "Escape Ridley Check">><</linkreplace>><</if>>
	<<if $missiles <2>>Missiles Empty<</if>>
	<<if !($items.includes("Wave Beam "))>><</if>>
	<<if $missiles >1>><</if>>
	<<if $items.includes("Wave Beam ")>><</if>>


:: Burnt to a Crisp [GAME-OVER] {"position":"350,4225","size":"100,100"}
The Missile attack fails. I take a large amount of damage in Ridleyï¿½s flames and run out of Energy. Recovery is completely impossible. I should have been careful and saved just a little bit more Energy. However, it is already too late to regret it. Now, I can only wait for death.<<set $energy = 0>>

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Ridley Wave Beam 1 {"position":"475,4225","size":"100,100"}
I attack Ridley again with the Wave Beam. He flinches from it a little.
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Wave Beam Misses Ridley 1">><<else>><<include "Wave Beam Hits Ridley 1">><</if>>


:: Missiles Hit Ridley 1 {"position":"600,4225","size":"100,100"}
Ridleyï¿½s shriek echoes through the room. The Missile attack hits spectacularly.

Fire 2 Missiles  <<linkreplace "Fire 2 Missiles  ">>Fire 2 Missiles<hr ><<include "Fire Missiles at Ridley 2">><</linkreplace>>
Wave Beam  <<linkreplace "Wave Beam  ">>Wave Beam<hr ><<include "Ridley Wave Beam 2">><</linkreplace>>
Run  <<linkreplace "Run  ">><hr ><<include "Escape Ridley Check">><</linkreplace>>
	<<if $missiles <2>>Missiles Empty<</if>>
	<<if !($items.includes("Wave Beam "))>><</if>>
	<<if $missiles >1>><</if>>
	<<if $items.includes("Wave Beam ")>><</if>>


:: Fire Missiles at Ridley 2 {"position":"725,4225","size":"100,100"}
I attack Ridley again. 2 Missiles fly at him as if each has a will of its own. <span style="color:red">(-2 Missiles)</span><<set $missiles = $missiles - 2>>

Ridley breathes fire to try and avoid them...
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Missiles Hit Ridley 2">><<else>><<include "Missiles Miss Ridley 2">><</if>>


:: Ridley Wave Beam 2 {"position":"850,4225","size":"100,100"}
I attack Ridley with the Wave Beam. He cries out and moves to avoid it.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Wave Beam Hits Ridley 2">><<else>><<include "Wave Beam Misses Ridley 2">><</if>>


:: Escape Ridley Check {"position":"975,4225","size":"100,100"}
I don 't have enough equipment. I should escape come back again after preparing my equipment. However, I donï¿½t know whether I can run from Ridley now.
		<<if $energy >9>><<include "Escape Ridley">><<else>><<include "Burnt to a Crisp">><</if>>


:: Missiles Hit Ridley 2 {"position":"1100,4225","size":"100,100"}
Ridley takes damage a second time. His painful moan rumbles through the chamber like an earthquake.

Fire 2 Missiles  <<if $missiles <2>>Missiles Empty<</if>><<linkreplace "Fire 2 Missiles  ">>Fire 2 Missiles<hr ><<include "Fire Missiles at Ridley 3">><</linkreplace>>
Wave Beam  <<linkreplace "Wave Beam  ">>Wave Beam<hr ><<include "Ridley Wave Beam 3">><</linkreplace>>Run  <<linkreplace "Run  ">><hr ><<include "Escape Ridley Check">><</linkreplace>>
	<<if !($items.includes("Wave Beam "))>><</if>>
	<<if $missiles >1>><</if>>
	<<if $items.includes("Wave Beam ")>><</if>>


:: Missiles Miss Ridley 2 {"position":"1225,4225","size":"100,100"}
The attack is swallowed by Ridleyï¿½s flames. Instead, I take damage from his attack. <<if $items.includes("Varia ")>><span style="color:red">(-5 Energy)</span><<set $energy = $energy - 5>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>>
	
<<if $energy <1>><<set $energy = 0>><<include "Burnt to a Crisp">><<else>>Fire 2 Missiles  <<linkreplace "Fire 2 Missiles  ">>Fire 2 Missiles<hr ><<include "Fire Missiles at Ridley 2">><</linkreplace>>
Wave Beam  <<linkreplace "Wave Beam  ">>Wave Beam<hr ><<include "Ridley Wave Beam 2">><</linkreplace>>Run  <<linkreplace "Run  ">><hr ><<include "Escape Ridley Check">><</linkreplace>><</if>>
	<<if $missiles <2>>Missiles Empty<</if>>
	<<if !($items.includes("Wave Beam "))>><</if>>
	<<if $missiles >1>><</if>>
	<<if $items.includes("Wave Beam ")>><</if>>


:: Fire Missiles at Ridley 3 {"position":"100,4350","size":"100,100"}
I launch another attack against Ridley. 2 Missiles fly towards him. His eyes fill with dread at the sight of them. He breathes fire to try and avoid them. <span style="color:red">(-2 Missiles)</span><<set $missiles = $missiles - 2>>
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Missiles Miss Ridley 3">><<else>><<include "Ridley Destroyed Missiles">><</if>>


:: Ridley Wave Beam 3 {"position":"225,4350","size":"100,100"}
I attack Ridley with the Wave Beam.
	<<set $random = random( 1,3)>>
	<<if $random == 3>><<include "Wave Beam Hits Ridley 3">><<else>><<include "Wave Beam Misses Ridley 3">><</if>>


:: Missiles Miss Ridley 3 {"position":"350,4350","size":"100,100"}
All of my attacks are rendered useless by Ridley 's flames. Instead, I take damage from Ridleyï¿½s attack. <<if $items.includes("Varia ")>><span style="color:red">(-5 Energy)</span><<set $energy = $energy - 5>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>>   
	
<<if $energy <1>><<set $energy = 0>><<include "Burnt to a Crisp">><<else>>Fire 2 Missiles  <<linkreplace "Fire 2 Missiles  ">>Fire 2 Missiles<hr ><<include "Fire Missiles at Ridley 3">><</linkreplace>>
Wave Beam  <<linkreplace "Wave Beam  ">>Wave Beam<hr ><<include "Ridley Wave Beam 3">><</linkreplace>>Run  <<linkreplace "Run  ">><hr ><<include "Escape Ridley Check">><</linkreplace>><</if>>
	<<if $missiles <2>>Missiles Empty<</if>>
	<<if !($items.includes("Wave Beam "))>><</if>>
	<<if $missiles >1>><</if>>
	<<if $items.includes("Wave Beam ")>><</if>>


:: Ridley Destroyed Missiles {"position":"475,4350","size":"100,100"}
Ridley has been severely weakened. Missiles strike him again. At last, his final moment has come. When the last attack hits, Ridley is enveloped in white light. [[Then, there is a brief but brilliant explosion.->Ridley Defeated]]


:: Ridley Defeated {"position":"600,4350","size":"100,100"}
I walk to the spot where Ridley blew up. Right in the middle, a small black stone has fallen. This is the Key Stone.

(<span style="color:Purple ">Ridley 's Key Stone</span> collected. <<set $items = $items + [ "RidleyStone "]>> If I have both Key Stones, I can go South through the gate in <b >Room A-10 </b >. Energy and Missiles Refilled.)<<set $energy = $maxEnergy; $missiles = $maxMissiles>>

I won 't have to come back to Ridleyï¿½s Room a second time, and the door closes behind me with a clang, deactivating for good.

I go back South to Room B-64. <<linkreplace "I go back South to Room B-64.">><<set $displayMap = 1>><<goto "64">><</linkreplace>>


:: Wave Beam Misses Ridley 1 {"position":"725,4350","size":"100,100"}
The Wave Beam attack fails. It is overpowered by Ridleyï¿½s flame attack. Again, Ridley 's flames engulf me, and I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-5 Energy)</span><<set $energy = $energy - 5>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>>

<<if $energy >0>>Wave Beam  <<linkreplace "Wave Beam  ">>Wave Beam<hr ><<include "Ridley Wave Beam 1">><</linkreplace>><<else>><<include "Ridley Burgers">><</if>>


:: Ridley Burgers [GAME-OVER] {"position":"850,4350","size":"100,100"}
The Wave Beam attack fails, and I take damage when I meet Ridleyï¿½s flame attack head-on. There is no way I can beat him.<<set $energy = 0>>

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Wave Beam Hits Ridley 1 {"position":"975,4350","size":"100,100"}
The Wave Beam damages Ridley. He is howling in pain. If I can damage him three more times, I can beat him. 

Continue with the next attack  <<linkreplace "Continue with the next attack  ">>attack<hr ><<include "Ridley Wave Beam 2">><</linkreplace>>


:: Wave Beam Hits Ridley 2 {"position":"1100,4350","size":"100,100"}
I continue the attack with the Wave Beam. I deal damage to Ridley. If I can damage him two more times, I can defeat him.

Again, I continue to attack with the Wave Beam.  <<linkreplace "Again, I continue to attack with the Wave Beam.  ">>Wave Beam.<hr ><<include "Ridley Wave Beam 3">><</linkreplace>>


:: Wave Beam Misses Ridley 2 {"position":"1225,4350","size":"100,100"}
The Wave Beam attack fails. I am pushed down by Ridleyï¿½s attack. Again, his flames reach me, and I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-5 Energy)</span><<set $energy = $energy - 5>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>>

<<if $energy >0>>Wave Beam  <<linkreplace "Wave Beam  ">>Wave Beam<hr ><<include "Ridley Wave Beam 2">><</linkreplace>><<else>><<include "Ridley Burgers">><</if>>


:: Wave Beam Hits Ridley 3 {"position":"100,4475","size":"100,100"}
I relentlessly attack with the Wave Beam! Ridley is groaning in pain. If I can damage him one more time, I can defeat him. 

Wave Beam  <<linkreplace "Wave Beam  ">>Wave Beam<hr ><<include "Ridley Wave Beam 4">><</linkreplace>>


:: Wave Beam Misses Ridley 3 {"position":"225,4475","size":"100,100"}
My Wave Beam attack fails. Ridleyï¿½s attack is more powerful than I expect. Again, his flame attack hits me. I absorb the damage. <<if $items.includes("Varia ")>><span style="color:red">(-5 Energy)</span><<set $energy = $energy - 5>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>>

<<if $energy >0>>Wave Beam  <<linkreplace "Wave Beam  ">>Wave Beam<hr ><<include "Ridley Wave Beam 3">><</linkreplace>><<else>><<include "Ridley Burgers">><</if>>


:: Ridley Wave Beam 4 {"position":"350,4475","size":"100,100"}
Ridley has already become thoroughly weak. I attack him with the Wave Beam.
	<<set $random = random( 1,6)>>
	<<if $random == 3>><<include "Ridley Destroyed Wave Beam">><<else>><<include "Wave Beam Misses Ridley 4">><</if>>


:: Ridley Destroyed Wave Beam {"position":"475,4475","size":"100,100"}
Ridley has been severely weakened. The Wave Beam strikes him again. At last, his final moment has come. When the last attack hits, Ridley is enveloped in white light. [[Then, there is a brief but brilliant explosion.->Ridley Defeated]]


:: Wave Beam Misses Ridley 4 {"position":"600,4475","size":"100,100"}
The Wave Beam attack fails. I shrink back from Ridleyï¿½s flame attack. Again, his attack reaches me, and I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-5 Energy)</span><<set $energy = $energy - 5>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>>

<<if $energy >0>>Wave Beam  <<linkreplace "Wave Beam  ">>Wave Beam<hr ><<include "Ridley Wave Beam 4">><</linkreplace>><<else>><<include "Ridley Burgers">><</if>>


:: Escape Multiviola Ice Beam {"position":"725,4475","size":"100,100"}
I 'll be fine if I can freeze the Multiviola with the Ice Beam, but...
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Escape Multiviola Ice">><<else>><<include "Escape Frozen Multiviola">><</if>>


:: Fight Ridley Later {"position":"850,4475","size":"100,100"}
Given my current equipment, I conclude I am no match for Ridley. For now, I [[go back South->64]] and will challenge him again after preparing my equipment.


:: 80 {"position":"975,4475","size":"100,100"}
###Room C-80: Tourian, Elevator Room
	<<set $displayStats = 1>>
	<<set $startRoom = "80"; $location = "Tourian ">>
  	<<linkreplace "Save game?">>
  	<<if Save.save("Slot A ")>>
    	Game saved!
  		<<else>>
    	Sorry, I couldn 't save your game.
  		<</if>>
<</linkreplace>>}

I can go up to Area A, Brinstar. Aside from that, the room only continues East.

[[Ascend->11]]
[[Go East->81]]


:: 81 [Red-Door] {"position":"1100,4475","size":"100,100"}
###Room C-81
From this room, there is only the Elevator Room to the West and a Yellow Door facing North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Metroid">><</linkreplace>><<else>><<set $combat = 1>><<if $yd1 == 1>>The door is already destroyed, so I keep moving through the rooms. [[Go West->80]] or [[go North.->82]]<<elseif $missiles >3>>Blast open the door  <<linkreplace "Blast open the door  ">><<include "Open Yellow Door 1">><</linkreplace>><<else>>I will need at least 4 Missiles to open the Yellow Door. [[I can only go back West to the Elevator Room.->80]]<</if>><</if>>


:: 82 {"position":"1225,4475","size":"100,100"}
###Room C-82
From this point, the room continues to the North, and there is a destroyed Yellow Door to the South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rinka">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->83]]
[[Go South->81]]<</if>>


:: 83 [Red-Door] {"position":"100,4600","size":"100,100"}
###Room C-83
North is a Red Door. To the South is a corridor.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Metroid B">><</linkreplace>><<else>><<set $combat = 1>><<if $rd1 == 1>>The Red Door is already open, so I can either [[Go North->84]] or [[go South.->82]]<<elseif $missiles >1>>Blast open the Red Door  <<linkreplace "Blast open the Red Door  ">><hr ><<include "Open Red Door 1">><</linkreplace>><<else>>I 'll need at least 2 Missiles to open this door. [[Go back South->82]]<</if>><</if>>


:: 84 {"position":"225,4600","size":"100,100"}
###Room C-84
In this room, there is a destroyed Red Door facing South, and the room continues to the East.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Metroid B">><</linkreplace>><<else>><<set $combat = 1>>[[Go East->85]]
[[Go South->83]]<</if>>


:: 85 {"position":"350,4600","size":"100,100"}
###Room C-85
This room continues West, and there is a Blue Door to the South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Rinka">><</linkreplace>><<else>><<set $combat = 1>>[[Go West->84]]
[[Go South->86]]<</if>>


:: 86 {"position":"475,4600","size":"100,100"}
###Room C-86
This room continues East, and there is a Blue Door to the North.

<<if $combat == 1>>[[Fight->Rinka]]<<else>><<set $combat = 1>>[[Go North->85]]
[[Go East->87]]<</if>>


:: 87 {"position":"600,4600","size":"100,100"}
###Room C-87
This deliberately confusing room is full of twists and turns. This room continues West, and there is a Blue Door to the North.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Metroid B">><</linkreplace>><<else>><<set $combat = 1>>[[Go North->88]]
[[Go West->86]]<</if>>


:: 88 [Red-Door] {"position":"725,4600","size":"100,100"}
###Room C-88
There is a Red Door to the North. To the South is an ordinary Blue Door.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Metroid B">><</linkreplace>><<else>><<set $combat = 1>><<if $rd2 == 1>>The Red Door is already destroyed, so I can either [[go back South->87]] or [[go North.->89]]<<elseif $missiles >1>>Blast open the Red Door.  <<linkreplace "Blast open the Red Door.  ">><<include "Open Red Door 2">><</linkreplace>><<else>>I 'll need at least 2 Missiles to open this door. [[Go back South.->87]]<</if>><</if>>


:: 89 {"position":"850,4600","size":"100,100"}
###Room C-89
To the South are the remains of a collapsed Red Door. Beyond that, the room only continues to the East.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Metroid B">><</linkreplace>><<else>><<set $combat = 1>>[[Go East->90]]
[[Go South->88]]<</if>>


:: 90 [Red-Door] {"position":"975,4600","size":"100,100"}
###Room C-90
The room continues West, and there is a Red Door facing South.

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Metroid B">><</linkreplace>><<else>><<set $combat = 1>><<if $rd3 == 1>>The Red Door is already destroyed, so I can either [[go back West->89]] or [[go South.->91]]<<elseif $missiles >1>>Blast open the Red Door.  <<linkreplace "Blast open the Red Door.">><<include "Open Red Door 3">><</linkreplace>><<else>>I 'll need at least 2 Missiles to open this door. [[I can only go back West.->89]]<</if>><</if>>


:: 91 [Red-Door] {"position":"1100,4600","size":"100,100"}
###Room C-91
This room contains Red Doors to both the North and South. Of course, if the door facing North isnï¿½t destroyed yet, it is impossible for me to have entered this room...

<<if $combat == 1>>Fight  <<linkreplace "Fight  ">><<goto "Metroid B">><</linkreplace>><<else>><<set $combat = 1>><<if $rd4 == 1>>The Red Door is already destroyed, so I can either [[go back North->90]] or [[go South.->92]]<<elseif $missiles >1>>Blast open the Red Door.  <<linkreplace "Blast open the Red Door.  ">><<include "Open Red Door 4">><</linkreplace>><<else>>I 'll need at least 2 Missiles to open this door. [[Go back North.->90]]<</if>><</if>>


:: 92 {"position":"1225,4600","size":"100,100"}
###Room C-92: Zebetite Room I
I have entered Mother Brain 's Lair at the heart of Tourian. This chamber is filled with snaking cables, machines, and other equipment. Gun turrets are mounted on the ceiling. Only three chambers separate me from my goal. However, each room is blocked by a Zebetite that must be destroyed before I can proceed. This is the first Zebetite Room.

<<if $Zebetite1 == 0>>Fight the Zebetite  <<linkreplace "Fight the Zebetite  ">><<goto "Zebetite">><</linkreplace>><br >[[Go back North->91]]<<else>>This Zebetite has been destroyed. Gelatinous blobs of Mother Brain 's life fluid ooze across the floor.

[[Go back North->91]]
[[Head South->93]]<</if>>
<<set $combat = 1>>


:: 93 {"position":"100,4725","size":"100,100"}
###Room C-93: Zebetite Room II
I leave the shattered remains of the Zebetite behind. Glass crunches under my boots. This next chamber is pierced by several more gun turrets and the thick coils of Mother Brain 's life-support system.

<<if $Zebetite2 == 0>>Fight the Zebetite  <<linkreplace "Fight the Zebetite  ">><<goto "Zebetite">><</linkreplace>><<else>>The Zebetite has been destroyed. Nothing remains but shattered glass and blood-red gel.

[[Go back North->92]]
[[Go South to the next room->94]]<</if>>


:: 94 {"position":"225,4725","size":"100,100"}
###Room C-94: Zebetite Room III
This is the final Zebetite chamber before Mother Brain. This appears to be some sort of auxilliary control chamber. Countless lights blink on the mechanical walls, displaying information about the entirety of Zebes and the vital stats of Mother Brain. My ultimate goal lies in the next room.

<<if $Zebetite3 == 0>>Fight the Zebetite  <<linkreplace "Fight the Zebetite  ">><<goto "Zebetite">><</linkreplace>><br >[[Go back North->93]]<<else>>The Zebetite has been destroyed in a shower of gelatinous debris. I can see Mother Brain through the jagged glass.

[[Go back North->93]]
[[Proceed to Mother Brainï¿½s Room->95]]<</if>>


:: 95 {"position":"350,4725","size":"100,100"}
###Room C-95: Mother Brain 's Room
I hear the voice of the Command Computer:

ï¿½This is Mother Brainï¿½s Room. In the next chamber, about ten meters ahead, is Mother Brain, the central computer of the asteroid Zebes.ï¿½

Before me is the figure of the Mother Brain. She is an enormous and grotesque dark red brain. The brain has a height of three meters. It towers over the surrounding moat filled with a thick, blood-like fluid. This moat will not be easy to get out of if I were to fall in. To put it bluntly, I would be trapped.

ï¿½No weapons except Missiles will work against Mother Brain. If you currently have only a small quantity of Missiles, it would be wise to come back after refilling your Missiles and Energy.ï¿½

Should I fight with my current equipment, or try again later?

[[Fight->Mother Brain]]
[[Try again later->Fight Mother Brain Later]]


:: Fight Mother Brain Later {"position":"475,4725","size":"100,100"}
I 'll try again later after replenishing my Missiles and Energy. [[Go back North.->94]]


:: Open Yellow Door 1 {"position":"600,4725","size":"100,100"}
I launch Missiles into the Yellow Door. One, two, threeï¿½ The fourth Missile explodes, and with a loud <i ><b ><span class="fx-rumble ">BOOM</span></i ></b >, the door opens up to enormous black hole.<<set $missiles = $missiles - 4>><<set $yd1 = 1>> (<span style="color:red ">-4 Missiles</span>)

[[I proceed to the next room, <b >C-82 </b >.->82]]


:: Open Red Door 1 {"position":"725,4725","size":"100,100"}
I fire Missiles at the door. When I drive 2 shots into it, the door crumbles down. (<span style="color:red ">-2 Missiles</span>)<<set $missiles = $missiles - 2>><<set $rd1 = 1>>

I can now proceed North to <b >Room C-84 </b >, or else go back South to <b >Room C-82 </b >.

[[Go North->84]]
[[Return South->82]]


:: Open Red Door 2 {"position":"850,4725","size":"100,100"}
I fire Missiles into the Red Door on the North side of the room. When 2 Missiles explode into the door, it can no longer bear the force, and a large hole crumbles open. (<span style="color:red ">-2 Missiles</span>)<<set $missiles = $missiles - 2>><<set $rd2 = 1>>

Reviewing my current amounts of Energy and Missiles, should I keep moving forward? Or is it better to pull back and stock up?

[[Keep going to the next room->89]]
[[Pull back for now->87]]


:: Open Red Door 3 {"position":"975,4725","size":"100,100"}
I fire a Missile at the Red Door on the South side of the room. This Red Door is the same as all previous ones, and is reduced to rubble with 2 Missiles. (<span style="color:red ">-2 Missiles</span>)<<set $missiles = $missiles - 2>><<set $rd3 = 1>>

[[To head to the next room, go South->91]]
[[To pull back for now, go back West->89]]


:: Open Red Door 4 {"position":"1100,4725","size":"100,100"}
I fire Missiles into this door, too. As usual, when I fire 2 Missiles into it, the door explodes, opening up a large hole. Somehow, this door 's wreckage resembles the gaping maw of some foul beast. (<span style="color:red ">-2 Missiles</span>)<<set $missiles = $missiles - 2>><<set $rd4 = 1>>

Should I move forward with my current equipment? Or is it better to turn back temporarily and fill up my Missiles?

[[Move forward->92]]
[[Turn back->90]]


:: Metroid {"position":"1225,4725","size":"100,100"}
<<set $displayMap = 0>>A Metroid attack! This Metroid seems to have been reproduced from the capsule the Pirates captured. There is hardly any way to defeat itï¿½but one method does exist.
	<<if $items.includes("Ice Beam ")>>Fire Ice Beam<<linkreplace "Fire Ice Beam ">>Beam<hr ><<set $random = random( 1,3)>>
			<<if $random == 2>><<include "Ice Beam Misses Metroid">><<else>><<include "Ice Beam Hits Metroid">><</if>><</linkreplace>><<elseif $missiles >3>>I don 't have the right equipment. I try to escape. 
		<<linkreplace "I try to escape.">><hr ><<include "Metroid No Ice Beam">><</linkreplace>><<else>>I need more Missiles to escape the Metroid.  
		<<linkreplace "I need more Missiles to escape the Metroid.">><hr ><<include "Metroid Lunch">><</linkreplace>><</if>>


:: Rinka {"position":"100,4850","size":"100,100"}
<<set $displayMap = 0>>Itï¿½s a Rinka. As inorganic attack matter, it only targets and flies at me. Its attack power isnï¿½t that great, either. However, it 's best to avoid them.<<linkreplace "However, it 's best to avoid them.">>
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Freeze Rinka">><<else>><<include "Miss Rinka">><</if>>
<</linkreplace>>


:: Metroid B {"position":"225,4850","size":"100,100"}
<<set $displayMap = 0>>A Metroid attack! It swoops down on me without warning. 

I fire the Ice Beam without a momentï¿½s hesitation.<<linkreplace "I fire the Ice Beam without a momentï¿½s hesitation.">>
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Ice Beam Misses Metroid">><<else>><<include "Ice Beam Hits Metroid">><</if>>
<</linkreplace>>


:: Zebetite {"position":"350,4850","size":"100,100"}
<img src="assets/images/Zebetite.webp"><<set $displayMap = 0>>Ahead of me is a Zebetite, Mother Brainï¿½s life-support system. I can 't use anything except Missiles to attack this device.

<<if $missiles >0>>Destroy it  <<linkreplace "Destroy it  ">><hr ><<include "Missile Zebetite 1">><</linkreplace>><</if>>
Try again later  <<linkreplace "Try again later  ">><hr ><<include "Escape Zebetite">><</linkreplace>>


:: Mother Brain {"position":"475,4850","size":"100,100"}
<<if $displayPic == 0>><img src="assets/images/MotherBrain.webp"><<set $displayPic = 1>><</if>>

<<set $displayMap = 0>>I fire a Missile into the Mother Brainï¿½s enormous frontal lobe. <span style="color:red">(-1 Missile)</span><<set $missiles = $missiles - 1>>

Mother Brain takes damage. <<set $MotherBrainHealth = $MotherBrainHealth - 1>><<if $MotherBrainHealth <1>><<include "Mother Brain Destroyed">><<else>>Mother Brain raises a howl. ROAR! Her cry blows violently like a storm out of hell. Simultaneously, snake-like heads appear with a flash from a cluster of what look like self-repair systems, and in the blink of an eye, laser beams flare up.

It is Mother Brainï¿½s attack.

Dodge  <<linkreplace "Dodge  ">>Dodge<hr >{
	<<if $items.includes("Screw Attack ")>><<include "Screw Attack Mother Brain">><<else>>
	<<set $random = random( 1,3)>>
	<<if $random == 3>><<include "Freeze Guns">><<else>><<include "Hit by Guns">><</if>><</if>>
<</linkreplace>><</if>>


:: Metroid No Ice Beam {"position":"600,4850","size":"100,100"}
I need the Ice Beam to defeat a Metroid. It grabs hold of me and sucks my Energy. <<if $items.includes("Varia ")>><span style="color:red">(-6 Energy)</span><<set $energy = $energy - 6>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

If I can 't escape...  <<linkreplace "If I can 't escape...  ">>...<hr >{
	<<set $random = random( 1,6)>>
	<<if $random == 3>><<include "Escape to Elevator">><<else>><<include "Metroid No Ice Fails 1">><</if>>
<</linkreplace>><</if>>


:: Ice Beam Misses Metroid {"position":"725,4850","size":"100,100"}
<img src="assets/images/MetroidTrapped.webp">The Ice Beam fails. I miss. In the next moment, the Metroid envelops me. It has latched on. It extends its freakish tentacles and starts sucking away my energy. The damage is great. If I canï¿½t escape... <<if $items.includes("Varia ")>><span style="color:red">(-6 Energy)</span><<set $energy = $energy - 6>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>><<if $energy <1>><<set $energy = 0>><hr ><<include "Metroid Lunch">><<else>>
	Blast my way out.<<linkreplace "Blast my way out.">>out.<hr ><<set $random = random( 1,2)>>
		<<if $random == 1>><<include "Escape Metroid Grip">><<else>><<include "Metroid Escape Fails 1">><</if>><</linkreplace>>
<</if>>


:: Ice Beam Hits Metroid {"position":"850,4850","size":"100,100"}
<img src="assets/images/MetroidFrozen.webp">The Ice Beamï¿½s aim finds its mark. With a single shot, the Metroid is frozen. Well...I can move around the room, or...

Since I know how to destroy Metroids, I can blast it with 4 Missiles.

<<if $missiles >3>>Fire Missiles  <<linkreplace "Fire Missiles  ">><hr ><<include "Metroid Destroyed">><</linkreplace>><br >Run  <<linkreplace "Run  ">><hr ><<include "Escape Metroid">><</linkreplace>><<else>>Not Enough Missiles  <<linkreplace "Not Enough Missiles  ">><hr ><<include "Escape Metroid">><</linkreplace>><</if>>


:: Metroid Destroyed {"position":"975,4850","size":"100,100"}
I fire a series of Missiles into the still-frozen Metroid. Ordinarily, Metroids have the ability to instantly recover from attacks from Missiles and other weapons, but they donï¿½t have this ability while frozen. I finish it off with 4 Missiles. <span style="color:red">(-4 Missiles)</span><<set $missiles = $missiles - 4>>
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Metroid Energy">><<else>><<include "Metroid Missiles">><</if>>


:: Metroid Energy [Combat-Ended] {"position":"1100,4850","size":"100,100"}
An Energy Ball appears in the Metroid 's blasted remains. And, itï¿½s quite large. <span style="color:yellow">(+15 Energy)</span><<set $energy = $energy + 15>><<if $energy >$maxEnergy>><<set $energy = $maxEnergy>><</if>>

<<linkreplace "Now I can move around the room.">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><<set $displayMap = 1>>


:: Metroid Missiles [Combat-Ended] {"position":"1225,4850","size":"100,100"}
Missiles are left behind in the shattered remains of the Metroid. <span style="color:red">(+10 Missiles)</span><<set $missiles = $missiles + 10>><<if $missiles >$maxMissiles>><<set $missiles = $maxMissiles>><</if>>

<<linkreplace "Now I can move around the room.">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><<set $displayMap = 1>>


:: Escape Metroid [Combat-Ended] {"position":"100,4975","size":"100,100"}
Leaving the Metroid frozen, I can move about the room. However, if I don 't get out before the Metroid thaws...

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><<set $displayMap = 1>>


:: Escape Metroid Grip {"position":"225,4975","size":"100,100"}
Still ensnared by the Metroid, I lay a series of Bombs. One, two... When I drop the fourth Bomb, the grip of its tentacles loosens.

I use this chance to slip away from the Metroidï¿½s grasp. Simultaneously, I turn around and blindly fire the Ice Beam. The Metroid is frozen.

I know how to destroy Metroids, but I 'll need at least 4 Missiles...

<<if $missiles >3>>Fire Missiles  <<linkreplace "Fire Missiles  ">><hr ><<include "Metroid Destroyed">><</linkreplace>><br >Run  <<linkreplace "Run  ">><hr ><<include "Escape Metroid">><</linkreplace>><<else>>Not enough Missiles.  <<linkreplace "Not enough Missiles ">><hr ><<include "Escape Metroid">><</linkreplace>><</if>>


:: Metroid Escape Fails 1 {"position":"350,4975","size":"100,100"}
My Bombs miss their mark, and I fail to escape. Again my energy is sucked away. <<if $items.includes("Varia ")>><span style="color:red">(-6 Energy)</span><<set $energy = $energy - 6>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>><<if $energy <1>><<set $energy = 0>><hr ><<include "Metroid Lunch">><<else>>

I struggle to escape again...  <<linkreplace "I struggle to escape again...  ">>...<hr >{
	<<set $random = random( 1,3)>>
	<<if $random == 2>><<include "Metroid Escape Fails 2">><<else>><<include "Escape Metroid Grip">><</if>>
<</linkreplace>><</if>>


:: Metroid Escape Fails 2 {"position":"475,4975","size":"100,100"}
My Bombs miss their mark. Once again I fail to escape. Again my energy is sucked away. <<if $items.includes("Varia ")>><span style="color:red">(-6 Energy)</span><<set $energy = $energy - 6>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>><<if $energy <1>><<set $energy = 0>><hr ><<include "Metroid Lunch">><<else>>

I struggle to escape again...  <<linkreplace "I struggle to escape again...  ">>...<hr >{
	<<set $random = random( 1,6)>>
	<<if $random == 6>><<include "Metroid Escape Fails 1">><<else>><<include "Escape Metroid Grip">><</if>>
<</linkreplace>><</if>>


:: Escape to Elevator {"position":"600,4975","size":"100,100"}
I somehow manage to fire Missiles into the Metroid. <span style="color:red">(-2 Missiles)</span><<set $missiles = $missiles - 2>>

At last, it takes damage and loosens the tentacles grabbing me. Not overlooking this chance, I successfully escape. Now I run away.

The Ice Beam seems to be in a hidden room. My records confirm there are two of them.

[[At any rate, I quickly board the elevator ascending to Brinstar.->11]]


:: Freeze Rinka [Combat-Ended] {"position":"725,4975","size":"100,100"}
I freeze the Rinka with the Ice Beam. I can avoid it. I don 't take any damage either and pass through.

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><<set $displayMap = 1>>


:: Miss Rinka [Combat-Ended] {"position":"850,4975","size":"100,100"}
I miss with the Ice Beam and am zapped by the Rinka. <<if $items.includes("Varia ")>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><<else>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><</if>><<set $displayMap = 1>>


:: Escape Zebetite [Combat-Ended] {"position":"975,4975","size":"100,100"}
I canï¿½t proceed to the next room unless I 've destroyed the Zebetite.

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><</linkreplace>><<set $displayMap = 1>>


:: Missile Zebetite 1 {"position":"1100,4975","size":"100,100"}
I fire a Missile at the Zebetite. <span style="color:red">(-1 Missile)</span><<set $missiles = $missiles - 1>>

The guns installed about the room fire all at once. Can I avoid them?!

Dodge Guns  <<linkreplace "Dodge Guns  ">>Guns<hr >{
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Missed Zebetite 1">><<else>><<include "Missile Zebetite 2">><</if>>
<</linkreplace>>


:: Missed Zebetite 1 {"position":"1225,4975","size":"100,100"}
I fail to avoid the attack. The guns hit me and send me flying back. I take damage.<<if $items.includes("Varia ")>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><<else>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

While I was absorbing this damage, the Zebetite recovered from my previous attack. Should I attack it again, or else try later after refilling my Missiles and Energy?

<<if $missiles >0>>Attack once more  <<linkreplace "Attack once more  ">>more<hr ><<include "Missile Zebetite 1">><</linkreplace>><</if>>
Try again later  <<linkreplace "Try again later  ">><hr ><<include "Escape Zebetite">><</linkreplace>><</if>>


:: Missile Zebetite 2 {"position":"100,5100","size":"100,100"}
I avoid the attack and fire a Missile at the Zebetite, damaging it a second time. <span style="color:red">(-1 Missile)</span><<set $missiles = $missiles - 1>>

The guns fire again.

Dodge Guns  <<linkreplace "Dodge Guns  ">>Guns<hr >{
	<<set $random = random( 1,3)>>
	<<if $random == 2>><<include "Zebetite Destroyed">><<else>><<include "Missed Zebetite 2">><</if>>
<</linkreplace>>


:: Zebetite Destroyed [Combat-Ended] {"position":"225,5100","size":"100,100"}
I avoid the attack and fire a Missile. The Zebetite takes a third blow. Then, a flash runs through the middle of the its tube of transparent glass, and in the next instant, the Zebetite crumbles down with a loud <i ><span class="fx-rumble ">BOOM!</span></i >I can proceed to the next room.

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><<set $displayMap = 1; $combat = 1>><</linkreplace>>
	<<if previous() == "92">><<set $Zebetite1 = 1>><</if>>
	<<if previous() == "93">><<set $Zebetite2 = 1>><</if>>
	<<if previous() == "94">><<set $Zebetite3 = 1>><</if>>


:: Missed Zebetite 2 {"position":"350,5100","size":"100,100"}
I fail to avoid the gunsï¿½ attacks. The recoil sends me flying back.<<if $items.includes("Varia ")>><span style="color:red">(-2 Energy)</span><<set $energy = $energy - 2>><<else>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

When I absorb this attack, the Zebetite also recovers from my second attack. Should I fighting? Or else try again later and refill my Energy and Missiles?

<<if $missiles >0>>Keep fighting  <<linkreplace "Keep fighting  ">>fighting<hr ><<include "Missile Zebetite 2">><</linkreplace>><</if>>
Pull back  <<linkreplace "Pull back  ">><hr ><<include "Escape Zebetite">><</linkreplace>><</if>>


:: Screw Attack Mother Brain {"position":"475,5100","size":"100,100"}
The Screw Attack has an ability similar to the Varia. Can I avoid Mother Brainï¿½s attack? 
	<<set $random = random( 1,3)>>
	<<if $random == 2>><<include "Hit by Guns">><<else>><<include "Freeze Guns">><</if>>


:: Hit by Guns {"position":"600,5100","size":"100,100"}
I canï¿½t avoid Mother Brainï¿½s attack. The aim of the snake-like laser guns is dead-on. Their muzzles twinkle, and the moment they flash, my body takes the laser blast.

Since the lasers donï¿½t have high output, one or two shots won 't be a fatal wound, but I still take considerable damage from them. <<if $items.includes("Varia ")>><span style="color:red">(-6 Energy)</span><<set $energy = $energy - 6>><<else>><span style="color:red">(-8 Energy)</span><<set $energy = $energy - 8>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

I attempt to regain my balance.  <<linkreplace "I attempt to regain my balance.  ">>balance.<hr >{
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Recover Balance">><<else>><<include "Fall into Moat">><</if>>
<</linkreplace>><</if>>


:: Recover Balance {"position":"725,5100","size":"100,100"}
When I absorb Mother Brainï¿½s attack, I stumble for a moment, and it seems as if I will fall into the moat. But I somehow manage to remain standing.

Should I continue the attack? Or else, try again later after refilling my Missiles and Energy?

<<if $missiles >0>>Continue the attack  <<linkreplace "Continue the attack  ">>attack<hr ><<include "Mother Brain">><</linkreplace>><</if>>
Try again later  <<linkreplace "Try again later  ">><hr ><<include "Escape Mother Brain">><</linkreplace>>


:: Escape Mother Brain [Combat-Ended] {"position":"850,5100","size":"100,100"}
I temporarily go back North, and will try yet again after stocking up on Energy and Missiles. However, the amount of damage Mother Brain has taken so far will also be fully recovered the next time I arrive.<<set $MotherBrainHealth = 10>>

[[Go North to <b >Room C-94 </b >->94]]<<set $displayMap = 1>>


:: Attempt to Dodge Guns {"position":"975,5100","size":"100,100"}
Can I avoid Mother Brainï¿½s attack?  <<linkreplace "Can I avoid Mother Brainï¿½s attack?  ">>attack?<hr >{
	<<set $random = random( 1,3)>>
	<<if $random == 3>><<include "Freeze Guns">><<else>><<include "Hit by Guns">><</if>>
<</linkreplace>>


:: Freeze Guns {"position":"1100,5100","size":"100,100"}
The narrow snake-necked guns fire their laser beams at me. The attack is extremely accurate, but incredibly easy to predict.

I freeze the cannons with the Ice Beam. However, they instantly thaw.

I can keep fighting so long as my Missiles last.

<<if $missiles >0>>Continue the attack  <<linkreplace "Continue the attack  ">>attack<hr ><<include "Mother Brain">><</linkreplace>><</if>>
Try again later  <<linkreplace "Try again later  ">><hr ><<include "Escape Mother Brain">><</linkreplace>>


:: Fall into Moat {"position":"1225,5100","size":"100,100"}
The moment Mother Brainï¿½s attack hits, I pitch forward and fall into the moat completely surrounding her. The red liquid that fills the moat isnï¿½t blood, but an electrolytic fluid with energy-absorbing properties. While I am submerged in this liquid, my Energy drains drastically. <<if $items.includes("Varia ")>><span style="color:red">(-6 Energy)</span><<set $energy = $energy - 6>><<else>><span style="color:red">(-8 Energy)</span><<set $energy = $energy - 8>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

<<if $energy >19>>Freeze the electrolytes.  <<linkreplace "Freeze the electrolytes.  ">>electrolytes.<hr ><<include "Escape Moat">><</linkreplace>><<else>>Attempt to escape the moat.  <<linkreplace "Attempt to escape the moat.  ">>moat.<hr ><<include "Attempt to Escape Moat">><</linkreplace>><</if>><</if>>


:: Escape Moat {"position":"100,5225","size":"100,100"}
My Ice Beam freezes the liquidï¿½s electrolytes, creating a platform I can stand on.  With that, I escape the moat. No sooner have I escaped then the platform thaws into electrolytic fluid, once again transforming into an eerie trap.

Given my current condition, should I continue to attack the Mother Brain or go back temporarily and refill my Missiles and Energy to try again later?

<<if $missiles >0>>Fight as is  <<linkreplace "Fight as is  ">>is<hr ><<include "Mother Brain">><</linkreplace>><</if>>
Try again later  <<linkreplace "Try again later  ">><hr ><<include "Escape Mother Brain">><</linkreplace>>


:: Attempt to Escape Moat {"position":"225,5225","size":"100,100"}
The moat is very deep, so I can 't get out easily. I think I can jump out of the moat, but I can 't quite reach the edge. I take massive damage. <<if $items.includes("Varia ")>><span style="color:red">(-6 Energy)</span><<set $energy = $energy - 6>><<else>><span style="color:red">(-8 Energy)</span><<set $energy = $energy - 8>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

I struggle to escape again.  <<linkreplace "I struggle to escape again.  ">>again.<hr >{
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Dissolved in Acid">><<else>><<include "Escape Moat">><</if>>
<</linkreplace>><</if>>


:: Dissolved in Acid [GAME-OVER] {"position":"350,5225","size":"100,100"}
However, my hopes of escaping the moat are dashed to bits. Mother Brainï¿½s attack system, those accursed snake-like gun turrets, appear high above me. Instantly laser beams rain down in a torrent.

In the electrolytic fluid below, hopes of rescue are not even a million to one. My body is cut to Swiss cheese by the laser beams, making doubly sure I fall into the electrolytic moat. My flesh slowly disintegrates and is soon unable to hold a human form.<<set $energy = 0>>

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Mother Brain Destroyed {"position":"475,5225","size":"100,100"}
The dark red color of the outer portion of Mother Brain 's cerebrum begins to transform, first bright red, then ashen, and finally black. The roomï¿½s lighting turns uncanny, and alarms began to blare.

ï¿½Mother Brainï¿½s final moment is at hand,ï¿½ says my Command Computer. Although it is just a machine, it murmurs with human-like emotion.

<span class="fx-rumble ">CRAAAAAASSSsssssshhhh!!!</span>

The entire asteroid shakes and large fissures spring forth. In the dying moments of Mother Brain, the center of the asteroid itself is caving in, as there is nothing there to control it.

<span class="fx-shudder ">GRRROOOOOoooaaannn!!!</span>

Mother Brain howls in the agony of death. Before long, the voltage slowly drops, and the howl slows, then fades away. [[Such are Mother Brainï¿½s final moments.->Time Bomb Set]]


:: Tourian Test {"position":"600,5225","size":"100,100"}
You can fight what you want here.

Metroid  <<linkreplace "Metroid  ">><<goto "Metroid">><</linkreplace>>
Metroid B  <<linkreplace "Metroid B  ">><<goto "Metroid B">><</linkreplace>>
Rinka  <<linkreplace "Rinka  ">><<goto "Rinka">><</linkreplace>>
Zebetite  <<linkreplace "Zebetite  ">><<goto "Zebetite">><</linkreplace>>
Mother Brain  <<linkreplace "Mother Brain  ">><<goto "Mother Brain">><</linkreplace>>
[[80]]
[[91]]

Get Varia <<linkreplace "Get Varia ">><<set $items = $items + [ "Varia "]>><</linkreplace>>

Get Normal Beam <<linkreplace "Get Normal Beam ">><<set $items = $items + [ "Normal Beam "]>><<set $items = $items - [ "Ice Beam ", "Wave Beam "]>> --You got Normal Beam<</linkreplace>>
Get Ice Beam <<linkreplace "Get Ice Beam ">><<set $items = $items + [ "Ice Beam "]>><<set $items = $items - [ "Normal Beam ", "Wave Beam "]>> --You got Ice Beam!<</linkreplace>>
Get Screw Attack <<linkreplace "Get Screw Attack ">><<set $items = $items + [ "Screw Attack "]>><</linkreplace>>

Get Missiles (10) <<linkreplace "Get Missiles (10)">><<run setup.grantMissilePod("97 ", 10)>><</linkreplace>>
Get Missiles (30)  <<linkreplace "Get Missiles (30)">><<run setup.grantMissilePod("98 ", 30)>><</linkreplace>>
Refill Missiles <<linkreplace "Refill Missiles ">><<set $missiles = $maxMissiles>><</linkreplace>>
Lose All Missiles <<linkreplace "Lose All Missiles ">><<set $missiles = 0>><</linkreplace>>

Get Energy Tank (30)<<linkreplace "Get Energy Tank (30)">><<run setup.refillEnergy()>><</linkreplace>>
Get Energy Tank (60)<<linkreplace "Get Energy Tank (60)">><<run setup.refillEnergy()>><</linkreplace>>
Refill Energy<<linkreplace "Refill Energy ">><<set $energy = $maxEnergy; $energy = $maxEnergy>><</linkreplace>>
Dangerously Low <<linkreplace "Dangerously Low ">><<set $energy = 1>><</linkreplace>>

<<set $location = "Tourian ">>


:: Time Bomb Set {"position":"725,5225","size":"100,100"}
==><==
	<i ><span style="color:yellow ">GAME SAVED</span></i ><<savegame "Slot A ">>
	<<set $displayStats = 0>>
	<<set $startRoom = "Time Bomb Set ">>
	<<set $random = 1>>
<==
Suddenly, a nearby shrill alarm blares. Itï¿½s Mother Brainï¿½s self-destruct sequence! Together with the alarm, the warning, ï¿½Three Minutes until Zebes Destruction,ï¿½ broadcasts. I must escape this asteroid before it explodes!

Fortunately, I am saved the trouble of achieving my initial goal, finding the Metroid capsule. The capsule is hanging in a cluster of equipment behind Mother Brain. I collect the capsule. Currently, the Metroids here seem to have stopped reproducing as well.

Behind Mother Brain is a secret passage through which I can escape Zebes. However, it seems to have been used already, and is so damaged as to be rendered useless. (As for who used it, there should have been Pirates on this asteroid. Since the escape appears to have been made quite awhile ago, I estimate it was used about the same time as when the Pirates obtained the Metroid capsule. While they were glad to have acquired the capsule, perhaps the Pirates bred too many Metroids here and escaped the asteroid when it became uninhabitable.) There was probably a set of stairs here originally, but now only the remnants of the stairwell and support struts are left.

I must ascend to the top in time.

If I can make it to the top, I can escape through the secret passage I used when I snuck into Zebes.

However, I can 't simply ascend. If I don 't make full use of my advanced acrobatic skills, it will be difficult to ascend this escape route made of only the fragments of stairs and support struts.

Climb the shaft.<<linkreplace "Climb the shaft.">>
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<goto "Lose Your Footing">><<else>><<goto "Escaped the Bomb!">><</if>>
<</linkreplace>>


:: Lose Your Footing {"position":"850,5225","size":"100,100"}
I ascend the escape hatch. However, when I hang my foot on the remains of a narrow support strut, the platform crumbles. Instantly my hand gropes for another brace, but there 's no resistance.

I fall. I 'm right back where I started. I make the ascent one more time.

However, time is slipping away. If I fail once more, there wonï¿½t be enough time to do it again...

Climb the shaft.<<linkreplace "Climb the shaft.">>
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<goto "Escaped the Bomb!">><<else>><<goto "Failed to Escape">><</if>>
<</linkreplace>>


:: Failed to Escape [GAME-OVER] {"position":"975,5225","size":"100,100"}
However, my second attempt fails tragically. In the end, it is impossible to climb this escape hatch again. Now, time is ticking away, and the moment of self-destruction draws near like the sound of giant footsteps.

<i >...KABOOM!</i >GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Escaped the Bomb! {"position":"1100,5225","size":"100,100"}
<img src="assets/images/EscapeZebes.webp">I estimate I 've ascended about 50 meters up the escape hatch. I spy a path leading off to the side. The escape hatch continues upward, but I sense something is down this side path and I can make it through there. I proceed and am convinced I made the correct choice. I pass through and somehow come out into the room from which I initially infiltrated Zebes. Now that I 'm here, I should be able to escape quickly. There isnï¿½t much time left.

I begin to move at once. I barely manage to reach to my tiny spaceship I had hidden upon first arriving on this asteroid and remove the camouflage covering it. I prime the engines and start them almost simultaneously. I take off from Zebes.

Ten seconds after liftoff, Zebes is engulfed in an enormous explosion. I escaped by just a hairï¿½s breadth. Even at this distance, I feel the considerable force of the explosion. If I had delayed even a moment, it would have taken my life.
==><==
	<i ><span style="color:yellow ">GAME SAVED</span></i ><<savegame "Slot A ">>
<<set $startRoom = "An Unpleasant Discovery ">>
<==
[[Now, the remaining question is what to do with the Metroid capsule...->An Unpleasant Discovery]]


:: An Unpleasant Discovery {"position":"1225,5225","size":"100,100"}
<img src="assets/images/MetroidMutant.webp">I have to avoid subjecting the capsule to any unnecessary stress during transport, and it has been inside a small spacecraft. The capsule is extremely small. I placed it inside the cabin. I head there now.

However, what awaits inside comes as a complete shock.

Something is emerging from the capsule just as I enter the cabin. The capsule is a container no more than 50 cubic centimeters in size. However, when the Metroid comes out of the capsule, the figure that emerges is enormous, perhaps owing to some effect of the room.

However, this creature is different from the Metroids I 've seen before. Even among the Metroids, there are grotesque variantsï¿½mutants. I decide to call this creature the Metroid Mutantï¿½and it has just crawled out of the capsule.

The Metroid Mutant notices me. It looks me over slowly, then its enormous bulk vanishes from the room with surprising speed.

Hurriedly, I freeze the capsule. No more of those things must ever come out again.

However, the Metroid Mutant is already lurking within this spaceship. How should I defeat it?

[[Chase after it immediately]]
[[Think up a strategy]]


:: Chase after it immediately {"position":"100,5350","size":"100,100"}
In the end, I decide it is best to kill the thing as quickly as possible and chase after it. Though I was unprepared earlier and the creature escaped, I have a general guess as to the direction it took. It seems to have gone towards the shipï¿½s internal energy tanks.

To check, I scan the room with my Command Computerï¿½s Radar. There it is. Strange life readings detected.

However, this place is dangerous. If I fight and the energy tanks catch fire, it will be the end for me as well.

What should I do?

[[Just fight it]]
[[Wait and see what happens->Observe the Metroid Mutant]]
[[Go back to the cockpit for now and formulate a strategy->Think up a strategy]]


:: Think up a strategy {"position":"225,5350","size":"100,100"}
I go back to the cockpit for now to consider my situation and come up with a strategy. However, I have absolutely no data concerning the Metroid Mutant. The truth is, there 's no point in devising a battle plan. [[Suddenly...->A Monster Outside the Cockpit]]


:: A Monster Outside the Cockpit {"position":"350,5350","size":"100,100"}
<i >WHAM!</i >Suddenly, a deafening noise echoes within the cockpit. Something is slamming its body into the cockpit entrance. 

There are only two lifeforms aboard this spaceship. One of them is me. As for the other...obviously, it 's the Metroid Mutant.

The cockpit door is firmly shut. Whether the creature understands this or not, after awhile the sounds cease.

Obviously I am the creature 's objective. I will have to fight it. And, the thing is strong. It might be good to call for help. What should I do?

[[Fight solo]]
[[Call for help]]


:: Just fight it {"position":"475,5350","size":"100,100"}
I shoot the Metroid Mutant with the Ice Beam. However, the cold doesn 't even phase it. This thing has the ability to resist the Ice Beam!

And itï¿½s aboard my spaceship.

However, this doesn 't mean there 's no other way to fight it.

The Command Computer 's shrill warning to turn off the engines blares. At the spur of the moment, I think of a strategy.

The Metroid Mutant finishes feeding off the energy conversion device inside the tank. The energy conversion device changes energy into solid mass, allowing large amounts of energy to be loaded onto even a tiny spacecraft. What 's more, this equipment can substantially decrease the mass 's volume even further. 

To the Metroid Mutantï¿½that is, to Metroidsï¿½some things have characteristics similar to what can be called life-energy, and if a Metroid tries to consume something that uses that sort of energy, it should have the same effect. However, removing the energy conversion device will make it impossible to control the energy flow. There is an extremely high probability the engine would run out of control. ï¿½No, it would <i >definitely </i >run wild.

When the timing is right, the Metroid Mutant feeds on the conversion device. [[The creature 's roar echoes throughout the ship.->Engine Overload]]


:: Observe the Metroid Mutant {"position":"600,5350","size":"100,100"}
I wait near the energy tank and watch what happens. However, the Metroid Mutant doesn 't intend to do things so slowly. While lying in wait observing, my position is revealed.

The Metroid Mutant has an attack method characteristic of the Metroids: grappling on to its victims and sucking away their energy...

[[Shoot at it->Shoot the Metroid Mutant]]
[[Run away->Run from the Metroid Mutant]]


:: Engine Overload {"position":"725,5350","size":"100,100"}
However, at the same time, something strange is starting to happen to the engines. It looks like they will run out of control fairly quickly. Should I finish off the Metroid Mutant first, or stop the engines from overloading?

[[Fight next]]
[[Stop the engines from overloading]]


:: Fight next {"position":"850,5350","size":"100,100"}
There are no visible changes to the Metroid Mutant. However, I am certain it took at least some damage. I fire the Ice Beam into the thing (it wonï¿½t freeze the creature, but it will deal more damage than the Normal Beam). Although the Metroid Mutant packs some serious power, eventually the energy conversion device does its work, and [[the Metroid Mutant runs from my Ice Beam.->Engine Going Critical]]


:: Stop the engines from overloading {"position":"975,5350","size":"100,100"}
First I will stop the engines from running wild. I 'll have to take emergency measures to shut off the energy conversion device, but it should prevent a crisis. Unfortunately, I 'm not paying attention, and am rushed by the Metroid Mutant, which I thought had been feeding off the energy conversion device.

However, the creature seems to have taken some damage, too. Its movements have slowed. But that won 't stop its attack.

Should I fight the Metroid Mutant or run away?

[[Fight->Fight the Metroid Mutant]]
[[Run->Run from the Metroid Mutant]]


:: Fight the Metroid Mutant {"position":"1100,5350","size":"100,100"}
The Metroid Mutant changes its attack. The creature has thick tentacles unlike those of the Metroids. However, the ends of its tentacles have sharpened, and it can damage its opponents with them. Metroids go for the abdomenï¿½I avoid it.

However, right past where I was standing is the section of the engine I just performed emergency maintenance on. The creature 's attack pierces the engineï¿½it begins to run wild again.

Also, when the Metroid Mutant strikes the engine, it is exposed to a large dose of radiation. 

[[It gives a single cry and flees somewhere in the ship.->Engine Going Critical]]


:: Run from the Metroid Mutant {"position":"1225,5350","size":"100,100"}
The Metroid Mutantï¿½s attack slices through the air. I manage to avoid it by a hairï¿½s breadth. I keep attacking with the Ice Beam so I can restrain the creature and escape from the room. In any case, because my data on the Metroid Mutant is insufficient, for now it would probably be better to go back to the cockpit for awhile and come up with a battle plan. However, despite my efforts to restrain the Metroid Mutant, [[my enemy hasnï¿½t given up its attack.->A Monster Outside the Cockpit]]


:: Shoot the Metroid Mutant {"position":"100,5475","size":"100,100"}
I immediately roll on the floor to avoid the Metroid Mutantï¿½s attack. Simultaneously, I shoot a gout of flames from my booster rockets into the creature and make my move when it flinches. [[Just fight it]]


:: Engine Going Critical {"position":"225,5475","size":"100,100"}
The out of control engine is ramping up to its limits at full speed. The squeals of an overload start ringing throughout the ship. Now the only sounds coming from the engine are abnormal. There is no way to prevent this ship from exploding.

Before that happens, I must get to the escape pod. But first, what should I do about the Metroid Mutant?

[[Escape immediately]]
[[Finish off the Metroid Mutant next]]


:: Escape immediately {"position":"350,5475","size":"100,100"}
I realize that if I just ignore the Metroid Mutant, the whole situation will be resolved when my ship explodes. In any event, I should escape.

I run for the escape pod. I check that the creature isnï¿½t around and go inside. The escape pod is a one-man, narrow, cylindrical space pod. Only a small nozzle is attached, providing almost no maneuverability, as it is made entirely for escape. I immediately escape from my ship upon boarding the pod.

My spaceship detonates in the distance. The soundless explosion is beautiful and serene.

However, when I escaped the ship, I also left behind the frozen capsule. Now, I can only transmit a rescue signal and wait for help to come...

[[That was an exhausting battle...->An Unwanted Hitchhiker]]


:: Finish off the Metroid Mutant next {"position":"475,5475","size":"100,100"}
The Metroid Mutant is still here. The thing is trying to escape to somewhere. It seems this creature also knows the ship is going to explode. I attack it with the Missiles I resupplied after returning to the ship.<<linkreplace "I attack it with the Missiles I resupplied after returning to the ship.">>
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<goto "Metroid Mutant Defeated?">><<else>><<goto "Missiles Fail">><</if>>
<</linkreplace>>


:: Fight solo {"position":"600,5475","size":"100,100"}
Suddenly, a warning blares. The computer explains the Metroid Mutant has penetrated the room holding the energy tanks and the energy is out of control. I display the Energy Room on the monitor.

However, a single glance at the image reveals I am too late. Immediately, the picture cuts out, probably rendered nonoperational due to the high temperatures.

I decide to board the escape pod and flee the ship.

I head through the passage on the side of the cockpit, and come out to the escape pod. I immediately start the engines, and the pod slowly separates from the ship.

<i >ï¿½KABOOM!</i >The spacecraft scatters into space in a soundless firework. [[But I wonder...what happened to the Metroid Mutant?->An Unwanted Hitchhiker]]


:: Call for help {"position":"725,5475","size":"100,100"}
I broadcast a distress signal on all frequencies...however, it may be a long time before help actually arrives. I have no idea how long it will take.

At that moment, my Command Computer barks a warning. It states the Metroid Mutant has penetrated the room where the oxygen tanks are stored. Indeed, when I look at my Radar, the creature 's readings are coming from the direction of the Oxygen Storage Room.

I wonder if the thing took this action knowing I would die if my oxygen supply was cut off. If so, the oxygen tanks are in danger.

[[Go protect the oxygen tanks]]
[[Barricade yourself in the room]]


:: An Unwanted Hitchhiker {"position":"850,5475","size":"100,100"}
<i >CLANK.</i >Sounds. Impossible!!

I have a bad feeling about this. I go see what is making those noises.

Sure enough, my worst fears are confirmed. I don 't know how the thing got inside, but the Metroid Mutant is right there.

I don 't know whether or not the creature has real eyes, so although it 's a somewhat amusing thought, at that moment, the Metroid Mutant and I are staring at each other.

Eye to eye... As enemies.

There is an airlock by my right hand. I can eject the creature into space. Of course, I can also leap out into space myself.

[[Eject the Metroid Mutant]]
[[Go out myself]]


:: Eject the Metroid Mutant {"position":"975,5475","size":"100,100"}
Although the Metroid Mutant has found me inside the escape pod, it doesnï¿½t seem like it intends to kill me immediately. It seems to be enjoying itself.

Now, the Metroid Mutant is slowly coming closer. 

ï¿½Enjoying itself.

However, I won 't stand for the thing 's insolence.

<i >WHOOOOOoooSSSShhhh...</i >The atmospheric pressure inside the pod drops abruptly.

I have opened the airlock.

Of course, I 've anchored my body in place.

The Metroid Mutant, not latched onto anything, is forcibly flung into space.

I close the airlock the moment the creature has been blown outside. 

[[However, I canï¿½t let my guard down just yet.]]


:: Go out myself {"position":"1100,5475","size":"100,100"}
I open the airlock. The air pressure inside the escape pod drops abruptly. Simultaneously, I go outside alone, and the airlock closes again. This means the Metroid Mutant is locked inside.

However, at that moment, something astonishing occurs

My tiny escape pod is enveloped by an enormous spacecraft.

ï¿½It is a Pirate ship. What 's more, it belongs to the band that had lived on Zebes.

[[Board the Pirate ship]]
[[Run->Run from the Pirates]]


:: Run from the Pirates [GAME-OVER] {"position":"1225,5475","size":"100,100"}
I flee. There might be some hope of being rescued, but I flee all the same. The Piratesï¿½ enormous spacecraft recovers over only the escape pod with the Metroid Mutant inside and speeds away leaving me behind undetected.

And so, I am left alone in the vastness of space. However, I need my ship 's transmitter to call for help, not some simple communicator. The SOS broadcasting equipment attached to my space suit is truly no consolation.

I am fated die alone in the vastness of space.

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Board the Pirate ship {"position":"100,5600","size":"100,100"}
I somehow get aboard successfully. At the proper moment, I let myself be discovered on purpose and become [[a prisoner of the Pirates.->A Prisoner of the Pirates]]


:: However, I canï¿½t let my guard down just yet. {"position":"225,5600","size":"100,100"}
<img src="assets/images/PirateWhale.webp">At this moment, one more threat is approaching the escape pod.

If I think of this escape pod as an ordinary fish, the spaceship looming over the pod is as big as a whale. On the side of that spaceship, a skull and crossbones have been intricately drawn.

Considering the sector of space I 'm in, could these be the band of Pirates who made Zebes their strongholdï¿½in other words, the ones who stole the Metroid capsule?

...When I successfully threw the Metroid Mutant outside, I felt a great sense of relief.

...However, I haven 't lost my nerve. If I meet the Pirates here, I should be able to talk to their boss and solve the riddle of how Zebes became the way it was. [[I allow myself to be captured by the Pirates.->A Prisoner of the Pirates]]


:: A Prisoner of the Pirates {"position":"350,5600","size":"100,100"}
==><==
	<i ><span style="color:yellow ">GAME SAVED</span></i ><<savegame "Slot A ">>
<<set $startRoom = "A Prisoner of the Pirates ">>

<==
Although they are Pirates, it seems they want to question me and immediately take me to the man who is their boss. Despite being their boss, this man doesn 't seem to be all that clever.

When I am wearing my helmet, I am unable to speak. The Pirates seem to wonder why I donï¿½t say anything. Since I am currently bound hand and foot in chains before the Bossï¿½s chair, there isnï¿½t anything I can do about it. Moreover, the Metroid capsule has also come into the hands of the Pirates.

ï¿½Take off his helmet,ï¿½ the Boss says.

[[Several of his underlings take off my helmet...]]


:: Go protect the oxygen tanks {"position":"475,5600","size":"100,100"}
I head towards the oxygen storage room. The Metroid Mutant floats inside mockinglyï¿½the thing was expecting me...

Abruptly, I fire the Ice Beam at the Metroid Mutant. Although I know the Ice Beam doesnï¿½t have much stopping power against the creature, it 's better than firing off a Missile in the narrow confines of the ship. But that doesn 't mean my weapon is completely ineffective. The beam seems to slow the creature 's movements a little. However, I canï¿½t keep this up for long... <<linkreplace "However, I canï¿½t keep this up for long...">>
	<<set $random = random( 1,3)>>
	<<if $random == 3>><<goto "A Metroid Mutant Meal">><<else>><<goto "Saved by Pirates?">><</if>>
<</linkreplace>>


:: Barricade yourself in the room {"position":"600,5600","size":"100,100"}
When I barricade myself in the cockpit, alarms fill the room. Of course, they warn the oxygen tanks have taken damage. Since I have been disregarding them until now and intend to stay put until rescue comes, I ignore these alarms, too.

Perhaps because the it has become impatient, the Metroid Mutant comes back to the cockpit. However, this time the creature has learned from before. Before I realize what 's happening, the thing has carried over the magnetic field line generator from the Navigational Engine Room and is now undoing the cockpit 's electromagnetic lock. If the Metroid Mutant 's gets even more intelligent, it is easy to predict that the lock will soon be undone. And if the lock is opened, I will have to either fight the Metroid Mutant or use the escape pod to flee the ship.

<i >CRACK.</i >The electric lock opens wider and wider...

[[Fight->Fight the Metroid Mutant in the Cockpit]]
[[Escape->Use the Escape Pod]]


:: Fight the Metroid Mutant in the Cockpit {"position":"725,5600","size":"100,100"}
<i >Clink!</i >With that soft clank, the electromagnetic lock is released. There is a brief moment of silence. I ready the Ice Beam.

<i >BOOM!!</i >The cockpit door blows open with enough force to bend back its double layers of ceramic. Facing me through the door is, of course, the Metroid Mutant.

Without stopping to think, I fire the Ice Beam. Instantly, the room fills with cold air. At first, the Ice Beam slows down the Metroid Mutant, but already the creature seems to be shrugging it off. The Metroid Mutant creeps forward slowly but steadily.

At that moment, a harsh voice rises from the shipï¿½s internal communication system: ï¿½We have picked up your distress signal. You 're much obliged!ï¿½

Displayed on the shipï¿½s external monitor is a pirate ship with an exquisite, old-fashioned skull and crossbones drawn on its hull. However, the Metroid Mutant has disappeared unnoticed, perhaps frightened off by the [[yelling.->Captured for Execution]]


:: Use the Escape Pod {"position":"850,5600","size":"100,100"}
The cockpitï¿½s double layered ceramic door opens with a <i >BANG.</i >Facing me is, of course, the Metroid Mutant.

I turn around and flee. I will have to use the escape pod on the side of the cockpit in order to escape the ship...

The Metroid Mutant raises a cry of surprise. It seems to know I am trying to escape and closes in with a vengeance. 

I open the door, escaping by a hair 's breadth. Several seconds of silence fill the space.

Whatï¿½s the creature doing? Has it given up?  Since the door is locked, I shouldn 't have anything to worry about. But I 'm still uneasy.

The escape podï¿½s nozzle light flares up. Slowly, it separates from the ship. The ship gets further and further away.

As time passes, I grow worried about whether I was able to leave the Metroid Mutant behind. Perhaps the thing has hidden itself in some corner of the escape pod. [[I fear this may be the case...->An Unwanted Hitchhiker]]


:: Captured for Execution {"position":"975,5600","size":"100,100"}
I have been captured by the Pirates. This had been their plan from the very beginning.

I do not resist.

And why not? I 've determined this band are the same ones who captured the Metroid capsule, the people who escaped Zebes. [[They intend to bring me to their leader and cut off my head.->A Prisoner of the Pirates]]


:: A Metroid Mutant Meal [GAME-OVER] {"position":"1100,5600","size":"100,100"}
Just as I expected, it is impossible to achieve victory over the Metroid Mutant in these conditions. The Metroid Mutant has regained its reaction speed. It avoids every attack, and at length, I am fully caught by the creature. Now the thing just sucks out my energy...

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Saved by Pirates? {"position":"1225,5600","size":"100,100"}
Just as I feared, attacking with just the Ice Beam has no effect. The Metroid Mutant is slowly building up resistance to the attack. The creature closes in. Already, the Ice Beam is losing its effect.

...However, at that moment, something unexpected happens. Well, it wasn 't completely outside the realm of possibility. However, it was still a surprise.

I hear a beep from the communications terminal, and extremely gruff voice yells, ï¿½<i >Heey!</i >Who sent out that distress call? Weï¿½ve come to rescue you!ï¿½

I check the shipï¿½s external monitor. There 's a ship jumping in right on top of me. On the side of the ship is an intricately drawn skull and crossbonesï¿½it 's a Pirate ship.

Well, this is a surprisingly narrow escape from death. The Metroid Mutant has disappeared, perhaps startled by the [[yelling.->Captured for Execution]]


:: Metroid Mutant Defeated? {"position":"100,5725","size":"100,100"}
I fire a continuous stream of Missiles. I refilled my Missiles after returning to the ship, and now fire every last one. Not even the Metroid Mutant is invincible. That thing could not have taken so many Missile blasts and lived. I have defeated the Metroid Mutant.<<linkreplace "I have defeated the Metroid Mutant.">>
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<goto "Failed to Escape - Game Over">><<else>><<goto "Escaped - Bad Ending">><</if>>
<</linkreplace>>


:: Missiles Fail [GAME-OVER] {"position":"225,5725","size":"100,100"}
Just as I expected, it is impossible to achieve victory over the Metroid Mutant in these conditions. The Metroid Mutant has regained its reaction speed. It avoids every attack, and at length, I am fully caught by the creature. Now the thing just sucks out my energy...

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Escaped - Bad Ending [GAME-OVER] {"position":"350,5725","size":"100,100"}
After defeating the Metroid Mutant, I hurriedly leap aboard the escape pod. It separates from the spaceship, which instantly explodes.

But I have forgotten something important. I left the Metroid capsule behind on the exploding spaceship. In the end, I was unable to carry out my mission. The mystery of the Metroid capsule will never be solved...

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Failed to Escape - Game Over [GAME-OVER] {"position":"475,5725","size":"100,100"}
Although I defeated the Metroid Mutant, there isn 't enough time to escape. In the end, I can 't even make it to the escape pod room. Just before I get there, my spacecraft explodes. The Metroid capsule and the Metroid Mutant both vanish in the glittering stars.

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Several of his underlings take off my helmet... {"position":"600,5725","size":"100,100"}
<img src="assets/images/HelmetOff.webp">For several minutes, the Pirate underlings struggle with my helmet, which is firmly in place. Nevertheless, they somehow unfasten the lock. Little by little, they raise my helmet, and a feeling of disbelief spreads among the Pirates.

...What they see is beyond their wildest imaginations.

They are able to hear my voice for the first time.
   
[["Yes. As you can see, I am a woman from Earth."]]

The Pirates stand there in disbelief, unable to either move or speak.

At length, the Boss says weakly, ï¿½Y...you destroyed Zebes...? A woman...?ï¿½

The man is horrified. However, this clearly is my chance. Suddenly, I power up my cyborg-enhanced arms to the limit. The chains that firmly bind me creak and shatter.<<linkreplace "The chains that firmly bind me creak and shatter.">>
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<goto "Metroid Mutant Attacks the Pirates">><<else>><<goto "Secret Identity Revealed">><</if>>
<</linkreplace>>


:: Metroid Mutant Attacks the Pirates {"position":"725,5725","size":"100,100"}
In the space that opens when the crew stand there dumbfounded, I try to flee the room, but the Pirates are not to be taken so lightly. If it is simply a matter of power, my body has been modified by cyborg implants and has the strength of five ordinary men. However, since there are ten men pinning me down, I can 't move even with my strength.

<i >CLANG, CLANG!!</i >Suddenly, an alarm blares through the room. 

ï¿½Whatï¿½s that?!ï¿½ the boss nervously asks a nearby crewman.

ï¿½I donï¿½t know. Weï¿½ve gotten word that some kind of hellish creature is wandering about the ship. But since every person who has come across it 's been killed, we don 't have any accurate information!ï¿½

It 's the Metroid Mutant...that thing is still on the prowl.

Even the Pirates surrounding me are ready to run.

[[Take advantage of the situation and escape]]
[[Watch what happens]]


:: Take advantage of the situation and escape {"position":"850,5725","size":"100,100"}
I knee the man in front of me, simultaneously using my elbow to strike the man to my left on the chin. The two scream, and the attention of the crewmen facing the shipï¿½s internal monitor returns to me again.

So I don 't get overpowered again, this time I mercilessly drive my attacks into the vitals of solar plexus, forehead, knee, and groin. A breach opens. The crowd in front of me thins. 

A crewman cries out, ï¿½The lifeform is coming into the command room!ï¿½

Again they turned to their attention towards the door. Not missing my chance, I rush through the breach without stopping.

I successfully escape. The crew aren 't interested in pursuing. [[They are feverishly preparing for the Metroid Mutant.->An Important Decision]]


:: Watch what happens {"position":"975,5725","size":"100,100"}
A crewman calls on the shipï¿½s internal monitor, ï¿½The monster is heading for the control room!ï¿½

Veins bulge out on the Bossï¿½s face. ï¿½You there! Fight it!ï¿½ he bellows.

Each one of the Pirates responds in unison, ï¿½Aye!ï¿½ their voices dull.

Their opponent in this battle is the Metroid Mutant. This enemy is no match even for me. I consider working together with the Pirates and defeat the creature...

[[Fight the Metroid Mutant together]]
[[Donï¿½t lend a hand]]


:: Secret Identity Revealed {"position":"1100,5725","size":"100,100"}
Now that the fact I am a woman is revealed, I forget all thoughts of speaking with the Boss, and choose that moment to run. It turns out the Boss is the type who doesn 't understand what a leader should do, and there 's really nothing I can do about that.

I consider that as I walk around the ship, trying to discover some means of escape, when [[suddenly, I come upon something I didn 't expect to find here...->An Unfortunate Discovery]]


:: An Unfortunate Discovery {"position":"1225,5725","size":"100,100"}
ï¿½It is the Metroid Mutant. The creature is feeding on a Pirate. 

That thing has also come aboard the Pirate ship.

The Metroid Mutant notices me. The creature seems a little taken aback as well at seeing me without my helmet, but then remembers that I am its arch-nemesis.

The creature approaches slowly.<<linkreplace "The creature approaches slowly.">>
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<goto "Bashed by the Mutant">><<else>><<goto "Battleus Interruptus">><</if>>
<</linkreplace>>


:: Bashed by the Mutant {"position":"100,5850","size":"100,100"}
<img src="assets/images/BashedbyMutant.webp">The Metroid Mutant flies at me in a frenzy, a beast that 's discovered its prey. Instantly I brace myself. However, I don 't have my helmet on, and ultimately, the Ice Beam proves ineffective. A thick tentacle slams into me like a log and the impact sends me dancing into the air.

I stop when my back crashes into the wall. If the Metroid Mutant could express emotions, it would almost certainly be grinning broadly right now. However, thanks to being thrown back, the distance between me and the creature has made it possible for me to [[run for it.->Suddenly...]]


:: Suddenly... {"position":"225,5850","size":"100,100"}
An alarm blares through the entire ship. Instantly, the Metroid Mutant and I stop in our tracks. What is the reason for this alarm? Perhaps it is due to my escape. Or perhaps it is because the Metroid Mutant has invaded the ship.

ï¿½I consider this this, but remember now is not the time for reflection.

Should I keep fighting the creature, or run?

[[Fight->Fight the Mutant Now]]
[[Run->Run from the Mutant]]


:: Battleus Interruptus {"position":"350,5850","size":"100,100"}
The Metroid Mutant flies at me. However, I feel now is not the time to fight it. When it comes time for me to have a showdown with the creature, that will be the ï¿½final battle.ï¿½

[[Suddenly...->Suddenly...]]


:: Fight the Mutant Now {"position":"475,5850","size":"100,100"}
Suddenly, I am spurred by the impulse to end this with the Metroid Mutant. Even though this impulse is reckless if left unchecked, I fire a Missile at the creature.<<linkreplace "I fire a Missile at the creature.">>
	<<set $random = random( 1,3)>>
	<<if $random == 2>><<goto "Rocket Jump Fail">><<else>><<goto "Pirates Investigate">><</if>>
<</linkreplace>>


:: Run from the Mutant {"position":"600,5850","size":"100,100"}
I think it best not to fight here and run. When the Metroid Mutant hears the blaring alarm, the creature also loses its desire to fight. At roughly the same time, the Metroid Mutant and I break off, [[retreating in opposite directions.->An Important Decision]]


:: Pirates Investigate {"position":"725,5850","size":"100,100"}
That alarm seems to be in response to the Metroid Mutant. Hearing the Missileï¿½s explosion, Pirates enter the room one after another. Then they see the Metroid Mutant and attack. However, the difference in their reflexes is too great, and they only fall victim to the creature. The Metroid Mutant grabs hold of the Pirates one by one, squeezes out their final drop of life energy, and repeats this bloodbath again. 

[[I turn pale at the sight and flee the scene at once.->An Important Decision]]


:: Rocket Jump Fail [GAME-OVER] {"position":"850,5850","size":"100,100"}
Well, I thought this might be a reckless way to settle things. Although this is an enormous spacecraft, the Missileï¿½s explosion blossoms suddenly within the narrow passage. And I don 't have my helmet on.

Although the force of the Missileï¿½s explosion doesn 't open a hole in the shipï¿½s outer hull, it is strong enough to produce a similar phenomenon to lighting gunpowder in a rifle barrel.

And so, having been engulfed in the explosion without a helmet, I am rendered immobile, with no means of opposing the Metroid Mutant.

Now I am just its victim.

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: An Important Decision {"position":"975,5850","size":"100,100"}
I flee, but consider what to do from here. As a means of fleeing the ship, my best bet is to locate a small spacecraft, steal it as quickly as possible, and escape. In that case, if I just move quickly, I 'll definitely make good time.

However, the Metroid capsule is still stolen. I still want to go back and get it. However, if I go, my chances of escaping will dwindle.

What should I do?

[[Go and recover the capsule]]
[[Escape Now]]


:: Go and recover the capsule {"position":"1100,5850","size":"100,100"}
<img src="assets/images/PirateBossSmoking.webp">Before anyone knew what hit them, the Metroid Mutant had annihilated almost all the Pirates. However, by the time I returned to the Control Room to retrieve the capsule, the Metroid Mutant had exhausted all its strength. Corpses lie strewn about in the center of the room. Beyond them is the capsule. In addition, there is a man who survived the battle and left his comrades all dead, smoking a cigarette. That man is the Pirate Boss.

I tell him, [[ï¿½I have come to take back the capsule.ï¿½->Grab Sword]]


:: Escape Now {"position":"1225,5850","size":"100,100"}
<img src="assets/images/MutantEscapeNow.webp">Already the interior of the ship has transformed into a hellish pandemonium. Wherever the Metroid Mutant passed by, not a single soul remains alive. I hurry to the shipï¿½s docking bay.

Arriving at the dock, I am surprised to find the Metroid Mutant waiting for me. The creature came here in its tenacious pursuit. No matter where I might flee, the thing will follow, even to the furthest reaches of hell. I am its nemesis.

Suddenly, that thought gives me an inspiration.

Should I fight or run?

Fight  <<linkreplace "Fight  ">>
	<<set $random = random( 1,3)>>
	<<if $random == 3>><<goto "Fend off the Metroid Mutant">><<else>><<goto "Fight Your Nemesis">><</if>>
<</linkreplace>>
[[Run->Flee the Ship]]


:: Flee the Ship {"position":"100,5975","size":"100,100"}
I run without stopping, thinking I can get aboard the small spacecraft and flee from this place.
	<<set $random = random( 1,2)>>
	<<if $random == 1>><<include "Bazooka Joe">><<else>><<include "Showdown">><</if>>


:: Bazooka Joe {"position":"225,5975","size":"100,100"}
I pretend to run away from the spacecraft, making a U-turn to go back to the docking bay entrance. However, when I get there, I discover this is where all my power suit equipment had been placedï¿½along with a Gravity Bazooka for use on a powered suit.

I load the bazooka with a speed that impresses even myself.

Then I aim and fire.

The recoil of a bazooka built for a power suit is incredible. It takes two sturdy men to hold one up and fire it. Even while wearing a space suit, lifting and firing it with just one arm would be completely impossible if I had not gotten cyborg implants.

The bazooka hits its target. The Metroid Mutant is blown away by the tremendous impact. There is a span of several seconds until the creature can recover. [[In that time, I successfully get aboard the small spacecraft.->Mission Complete - Bad Ending]]


:: Mission Complete - Bad Ending [GAME-OVER] {"position":"350,5975","size":"100,100"}
The small spacecraft pulls away from the Pirate ship. When I have gone some distance from the Pirate ship, I destroy it with a large missile.

The magnificent cosmic fireworks die down, and I consider what to do next. I canï¿½t recover the stolen capsule because it has been destroyed. As such, it is impossible to solve this mystery. At any rate, the incident over. Now I just have to report in...

*    *    *

<i >Outside the spacecraft, a planet floats into view. The ship approaches the planet with Samus on board.

But this isn 't what she expects.

The ship is dragging along something small. Though the object is tiny in comparison with the ship, it is actually about two meters in length.

It is the Metroid Mutant.

The creature is practically invincible.

The thing will keep chasing until its nemesis is completely annihilated.</i >MISSION COMPLETE - BAD ENDING <<linkreplace "MISSION COMPLETE - BAD ENDING ">><<goto "GAME OVER">><</linkreplace>>


:: Showdown {"position":"475,5975","size":"100,100"}
I try to circle around, but can 't get to the spaceship without a fight. Since there 's no way I can run, [[I have to fight.->Fight Your Nemesis]]


:: Fight Your Nemesis [GAME-OVER] {"position":"600,5975","size":"100,100"}
The final battle has come to an end sooner than expected.

...More to the point, I shouldnï¿½t have called it the final battle because we are interrupted. Who should appear but the Pirate Boss, his body encased in a powered suit. What 's more, the man is holding a large caliber beam cannon - a weapon made for a powered suit, and what 's more, it is a weapon of terrible destructive force with the ability to just about vaporize a single asteroid.

My final vision is of energy building up at the tip of the large barreled beam cannon. After that, I am flying through space...

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Fight the Metroid Mutant together {"position":"725,5975","size":"100,100"}
ï¿½I want to fight, too.ï¿½

Instantly, all the Pirates turn their eyes toward me.

And little wonder. I, their enemy, have offered to fight alongside them. And their dimwitted Boss, keeping his voice calm, says, ï¿½All right. Here, use this,ï¿½ and hands over the Ice Beam he had taken from me.

The moment I equip the Ice Beam, a loud bang suddenly fills the room. The Metroid Mutant has already reached the outside of the control room and is unleashing its attack on the door. The Pirates have also finished preparing for battle. The door is opened by remote.

On the other side of the open door is...the Metroid Mutant.

Instantly, flashes burst from the Piratesï¿½ laser guns.<<linkreplace "Instantly, flashes burst from the Piratesï¿½ laser guns.">>
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<goto "Metroid Massacre">><<else>><<goto "Blast the Mutant">><</if>>
<</linkreplace>>


:: Donï¿½t lend a hand {"position":"850,5975","size":"100,100"}
<img src="assets/images/MutantPirateDoor.webp">Cracks appear in the door. The Pirates quickly point all of their guns towards the portal.

ï¿½The Metroid Mutant is already on the other side of the door to this room.

The next time the creature slams into the door, it blows apart with a loud squeal. Instantly, interlaced beams of light flash from the Pirates 'guns.

However, the Piratesï¿½ resistance is pitiful. The power of lasers designed for use aboard a spaceship doesnï¿½t amount to much. Even the Ice Beam is ineffective, and the slight power of the laser beams is no match for their opponent.

[[In the midst of battle, I escape unnoticed.->An Important Decision]]


:: Metroid Massacre [GAME-OVER] {"position":"975,5975","size":"100,100"}
The guns the Pirates wield have to have a low laser output for use on-board a spacecraft. My Ice Beam doesn 't seem have any effect against our opponent, either. This battle can only end in a crushing defeat. In retrospect, everyone was just food gathered for the Metroid Mutant to take, whether I helped out or not. Even though the Pirates are brave men and veteran warriors, they are no match for this beast.

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Blast the Mutant {"position":"1100,5975","size":"100,100"}
The guns the Pirates wield donï¿½t have a very high output so they can be used on-board a spacecraft. Since my Ice Beam wasn 't effective against the creature, it doesn 't seem like these will be very effective, either. However, through the Pirates 'force of will and determination, or perhaps merely by sheer numbers and their vast quantity of guns, the lasers are definitely damaging the Metroid Mutant. However, the Pirates are also falling one by one.

I come up with of a strategy. If most of the Pirates die in the battle, it might be possible to safely escape after recovering the capsule. I steel myself and allow the Pirates to become the Metroid Mutantï¿½s victims...

Though most of the pirates have fallen, the Metroid Mutant is also taking considerable damage. So, to make doubly sure, I fire a Missile into the creature!

[[--KABOOM!->Duel to the Death]]


:: Duel to the Death {"position":"1225,5975","size":"100,100"}
The Metroid Mutant stops moving entirely. Although it 's possible the thing might revive, at any rate, it has been defeated. ...And the Pirates have also been completely annihilated.

ï¿½No, there is one person with some fight left in him. ...It 's that dimwitted Boss. He must be smarter than he looks. He knew what I was planningï¿½[[I fired a Missile to annihilate the Metroid Mutant along with the Pirates.->Grab Sword 2]]


:: Metroid Mutant Revives {"position":"100,6100","size":"100,100"}
I am losing to the Pirate Bossï¿½s zeal. However, when the Boss is just about to deliver his final thrust, something unexpected occurs.

The Metroid Mutant, which we had until now thought dead, has begun to stir. The creature is a true threat and seems to have been provided with some indescribable vitality. The Pirate Boss notices the Metroid Mutant and turns to face it.

I don 't let this chance escape.

I recover the capsule and flee without watching the outcome of their battle. [[I keep going and head for the small spacecraft left in the ship 's docking bay.->MISSION COMPLETE]]


:: MISSION COMPLETE [MISSION-COMPLETE] {"position":"225,6100","size":"100,100"}
<img src="assets/images/GoodEnd.webp">After arriving at the docking bay, I manage to get aboard the small spacecraft and immediately escape. After I have gone a considerable distance, I target the Pirate ship and launch the large missile equipped on my spacecraftï¿½destroying the Metroid Mutant, which I had left behind. 

The large missile launches without a sound. It seems to flow towards its target. Upon impact, a brilliant white light envelops the Pirate ship. The ring of light expands infinitely large and thin. The light cycles through the spectrum, then finally contracts like a withering flower. And with that, it is over.

I somehow managed to recovered the capsule, defeat the Metroid Mutant, and even annihilate the Pirates. I report my current status to Earth. In short, my mission is a success.

I have finished my work and become drowsy. I enter the time it will take to reach Earth into the ship 's computer and enter cold sleep.

I become an embryo submerged in the amniotic fluid of space...

[[MISSION COMPLETE!->Epilogue]]


:: Epilogue {"position":"350,6100","size":"100,100"}
==><==
##EPILOGUE
<==
The darkness of space. A jet-black darkness. The void of space, like jet black velvet inset with glass beads. It is the outer edge of a small solar system. A little while ago, a small asteroid had been here. Until recently, that is. Now, itï¿½s gone. It was annihilated by a large burst of uncontrollable energy. There isn 't even a trace left by this disturbance. Filling this space is only silence and darkness. 

No, not entirely. 

Something is worming its way within darkness. Something is there, moving stickily and persistently, creeping and squirming, seething with [[malice.->The Worm]]


:: Fighting Spirit {"position":"475,6100","size":"100,100"}
I possess a cyborg-enhanced body. My speed and power should surpass those of my opponent.

...However, the Pirate Boss is strong. I 'm lacking something. 

...Zeal I 'd have to call it.

At this point, I am clearly losing. From here on, it seems certain my chances of victory have dropped below 50%. It might be better to just abandon the capsule.

[[Abandon the capsule]]
[[Donï¿½t give it up->Donï¿½t abandon it]]


:: Abandon the capsule {"position":"600,6100","size":"100,100"}
I try to abandon the capsule and run, but the Pirate Boss won 't give me the opportunity. However, as luck would have it, my chance comes when my arch-nemesis, the Metroid Mutant, revives. Though the thing appeared to be dead, the Metroid Mutant stirs. The moment arises the instant the Boss notices it.

Now is my chance. In the space of that moment, I escape. I speed towards the shipï¿½s internal dock where a small [[spacecraft->Escape Now]] is stored.


:: A Desperate Fight {"position":"725,6100","size":"100,100"}
The Pirate Boss is strong. With my cyborg-enhanced body, my speed and power seem to exceed his, but I am lacking something. Zeal...that 's what I 'd call it.

At this moment, I am definitely losing. From here on, my chances of winning are just under 50%. It might be better to give up recovering the capsule and run for it.

[[Abandon the capsule]]
[[Donï¿½t abandon it]]


:: Donï¿½t abandon it {"position":"850,6100","size":"100,100"}
Nevertheless, I continue to fight, unwilling to give up the capsule.
	<<set $random = random( 1,3)>>
	<<if $random == 3>><<include "Metroid Mutant Revives">><<else>><<include "Skewered">><</if>>


:: Skewered [GAME-OVER] {"position":"975,6100","size":"100,100"}
<img src="assets/images/Skewered.webp">The Pirate Boss 's voice trembles with fatigue. ï¿½I canï¿½t bring myself to kill a woman...ï¿½

No ordinary person can continue fighting with me for such a long time. If he isnï¿½t tired already, he must not be human. However, if he 's a normal person, it 's possible he could be having a heart attack...

The Boss wields the sword with surprising skill, piercing my gut.

<i >Cough!</i >A gout of blood spills down my lips. 

I wasn 't able to beat him after all.

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: The Worm {"position":"1100,6100","size":"100,100"}
If there was an atmosphere here, that air would have the consistency of tar, and there would be permeated with dread. 

If this place were filled with water, that water would be instantly corrupted and filled with sludge, changing to a color of black and brown pus, an effect that would evoke every kind of physiological repulsion. 

And the thing is alive. Without question, it is alive. Nothing should exist in the void of space almost at absolute zero, but beyond a shadow of a doubt, this thing is [[alive.->Lurks in the Darkness]]


:: Seeking its Nemesis {"position":"1225,6100","size":"100,100"}
It is a strong life-form. It has a morbid obsession with life.

And, it wants things.

Blood.<<linkreplace "Blood.">>

Flesh.<<linkreplace "Flesh.">>

Life.<<linkreplace "Life.">>

Consciousness.<<linkreplace "Consciousness.">>

Space.<<linkreplace "Space.">>

Perhaps it even craves love.<<linkreplace "love.">>

But above all, it is seeking its [[nemesis.->Mysterious Object]]<</linkreplace>><</linkreplace>><</linkreplace>><</linkreplace>><</linkreplace>><</linkreplace>>


:: Mysterious Object {"position":"100,6225","size":"100,100"}
==><==
##The New York Times
<==
###Mysterious Object Falls into Austin, Nevada
<i >March 21, 100X, Cosmic Calendar </i >Yesterday, a meteorite fell in Austin, Nevada in the early hours of the morning. A considerably large meteor, it was observed over a very wide area. However, when the authorities came to investigate, although they discovered an enormous impact crater, in the end, the meteor itself was never found. 

The rumor from the scientific community is that it is a second incarnation of the Tunguska Meteorite. The Government of the Galactic Federation gave no comment regarding this incident, causing further [[suspicion.->Mysterious Corpse]]


:: Mysterious Corpse {"position":"225,6225","size":"100,100"}
###Mysterious Corpse Found in Area Surrounding Meteorite Impact
A mysterious corpse was discovered at yesterdayï¿½s meteorite impact in Austin, Nevada. It was found to be the body of Mr. Terry Gilliam, 45, the owner of a private ranch in Austin. The corpse, which had no external wounds, was wrinkled as all the fluids had been sucked out of it, and had been disfigured to resemble a frail old man.

That same day, Mr. Gilliam, an eyewitness to the meteorite impact, rushed out of his home screaming, ï¿½The meteor! The meteor!,ï¿½ and never returned. 

The authorities speculated whether an unknown pathogen had clung to the meteor, prompting criticism from the neighborhoodï¿½s residents.

[[Credits]]


:: Lurks in the Darkness {"position":"350,6225","size":"100,100"}
Furthermore, it is not a bacterium. This abnormal life-form leaves behind its offspring through asexual reproduction, but it is a fully developed higher order life-form. It possesses a definite consciousness.

But it is a thing of evil.

Before long, it impulsively inhales a deep breath. It absorbs the dust floating in the surrounding space. In that instant - whoosh! - it seems as though its body has been imbued with light. It may have actually glowed. This is a life-form that can rapidly convert to energy any material its body [[absorbs.->Seeking its Nemesis]]


:: Metroid Lunch [GAME-OVER] {"position":"475,6225","size":"100,100"}
I have no hope of ever escaping the Metroid 's grasp. It quickly sucks away my Energy, leaving my body a lifeless husk.<<set $energy = 0>>

GAME OVER <<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>>


:: Fend off the Metroid Mutant {"position":"600,6225","size":"100,100"}
I step forward deliberately, making it easy for the Metroid Mutant to grab me. It latches on with its usual energy sucking attack, and although I take an incredible amount of damage, I am ready for it.

<i >BWEEE!</i >I can tell how much of my energy is being drained by the shrill alarm. I am now firmly in the Metroid Mutant 's grasp. But I haven 't tried this strategy before. I attack with the Ice Beam while trapped inside the creature.

<i >GRRSKREEEeEEEeee!</i >The Metroid Mutant lets out a skreech of pain. I 've managed to damage it. I attack once more. The creature can no longer stand the pain and pulls away. In that instant, I fire a Missile right at the thing 's insides. A violent explosion blossoms from within the creature. The beast falls to the floor and stops moving.

It 's over. I took a large amount of damage, but defeated the Metroid Mutant.

However, I wonder if the creature is truly dead...

At any rate, I need to escape from this ship...

I hurry to the docking bay, deciding to escape the ship and then [[destroy it with a missile.->Mission Complete - Bad Ending]]


:: Tourian Gate Opened {"position":"725,6225","size":"100,100"}
With both Key Stones inserted, the large gate slowly begins to rise, shaking dust and small rocks from the walls. It finishes with a dull <i >BOOM </i >that echoes through the haunted chamber. The way to Mother Brain is open.<<set $GateOpen = 1>>

[[Go through the gate->11]]


:: Statue Room Description {"position":"850,6225","size":"100,100"}
The next chamber must lead to Mother Brain. However, this room has special Key Stones without which I cannot proceed further South. 

Based on information from the Intelligence Bureau, the Key Stones cannot be collected unless I defeat the bosses in Areas A and B. <<if $KraidGate == 1 && $RidleyGate == 0>>Kraid 's gate is open. I still need to insert <span style="color:purple ">Ridley 's Key Stone.</span><</if>><<if $RidleyGate == 1 && $KraidGate == 0>>Ridley 's gate is open. I still need to insert <span style="color:green ">Kraid 's Key Stone.</span><</if>>

At the base of the statues are slots where the stones can be inserted. These must have been used by Kraid and Ridley to enter Mother Brain 's lair. The gate could only open if both bosses were present, protecting her from intruders...

<<if $KraidGate == 0 && $items.includes("KraidStone ")>>Place Kraid 's Key Stone in his statue. <<linkreplace "Place Kraid 's Key Stone in his statue.">><span style="color:green ">Kraid 's Key Stone</span> clicks into place. With a loud rumble, Kraid 's statue shakes as it rises, shedding a cloud of dust. One of the locks on the gate opens with a <i >CLANG </i >. <<set $KraidGate = 1>><<if $RidleyGate == 1>><<include "Tourian Gate Opened">><</if>><</linkreplace>><</if>>

<<if $RidleyGate == 0 && $items.includes("RidleyStone ")>>Place Ridley 's Key Stone in his statue. <<linkreplace "Place Ridley 's Key Stone in his statue.">><span style="color:purple ">Ridley 's Key Stone</span> smoothly slides into place. Stone grinds on stone as Ridley 's statue rises, filling the room with a deep growl. The statue triggers a mechanism, and one of the locks squeels open. <<set $RidleyGate = 1>><<if $KraidGate == 1>><<include "Tourian Gate Opened">><</if>><</linkreplace>><</if>>


:: Metroid No Ice Fails 1 {"position":"975,6225","size":"100,100"}
I fail to escape. Again my energy is sucked away. <<if $items.includes("Varia ")>><span style="color:red">(-6 Energy)</span><<set $energy = $energy - 6>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

I struggle to escape again...  <<linkreplace "I struggle to escape again...  ">>...<hr >{
	<<set $random = random( 1,3)>>
	<<if $random == 2>><<include "Metroid No Ice Fails 2">><<else>><<include "Escape to Elevator">><</if>>
<</linkreplace>><</if>>


:: Metroid No Ice Fails 2 {"position":"1100,6225","size":"100,100"}
My escape fails again. My energy is draining steadily. <<if $items.includes("Varia ")>><span style="color:red">(-6 Energy)</span><<set $energy = $energy - 6>><<else>><span style="color:red">(-10 Energy)</span><<set $energy = $energy - 10>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

I struggle to escape again.  <<linkreplace "I struggle to escape again.  ">>again.<hr >{
	<<set $random = random( 1,3)>>
	<<if $random == 2>><<include "Metroid No Ice Fails 1">><<else>><<include "Escape to Elevator">><</if>>
<</linkreplace>><</if>>


:: Show Map {"position":"1225,6225","size":"100,100"}
|map >[<<include "Brinstar Map">>]


|modalhooks >[]

|map >[<<include "Brinstar Map">>]


:: Brinstar Map {"position":"100,6350","size":"100,100"}
<<set $Brinstar to [
		00,00,00,00,00,00,00,00,00,
		00,35,00,00,00,00,00,00,00,
		00,35,35,36,31,19,00,00,00,
		00,32,33,37,30,18,39,00,00,
		00,28,34,38,29,17,40,00,00,
		00,26,27,00,25,16,00,00,00,
		00,24,23,14,12,13,15,00,00,
		00,00,00,00,6,00,00,00,00,
		00,00,8,7,5,4,00,00,00,
		00,00,9,00,00,3,22,00,00,
		00,00,10,00,00,2,20,21,00,
		00,00,11,00,00,1,00,00,00,
		00,00,00,00,00,00,00,00,00]>>
<span style="font-family:Courier ">
<<set $lineBreak = 10>>	(for: each _y, ...(range: 1, $Brinstar's length))[		<<set $i = $i + 1>>		<<if $i == $lineBreak>><br ><<set $lineBreak = $lineBreak + 9>><</if>>		<<set $number = ($i) of $Brinstar>>	<<if $Brinstar's (_y) == 00>><big >?<big ><<elseif $Brinstar's (_y) <10>>0$number<<else>>$number<</if>>]</span>
<<set $i = 0>>


:: Game Start {"position":"225,6350","size":"100,100"}
<<set $maxEnergy = 30; $energy = $maxEnergy; $maxMissiles = 0; $missiles = $maxMissiles; $items = [ "Normal Beam "]; $missilePods = [ "0 "]; $energyPacks = [ "0 "]; $startRoom = "01"; $combat = 1; $Beam = "Normal Beam "; $Bombs = ""; $Varia = ""; $ScrewAttack = ""; $MotherBrainHealth = 10; $combat = 1; $displayStats = 1; $location = "Brinstar "; $displayMap = 1>>
	
<<goto "01">>


:: Debug Room Brinstar [DEBUG-ROOM] {"position":"350,6350","size":"100,100"}
Weclome to the Debug Room! Select your quest!

[[Brinstar Combat Test]]
[[Norfair Combat Test]]
[[Tourian Test]]
To seek the Holy Grail
Break Energy <<linkreplace "Break Energy ">><</linkreplace>>

<<set $energy = 30; $maxEnergy = 30; $missiles = 0; $items = [ "Normal Beam "]; $startRoom = "Debug Room "; $combat = 1; $MotherBrainHealth = 10>>
	<<set $maxEnergy = 30; $energy = $maxEnergy; $maxMissiles = 0; $missiles = $maxMissiles; $items = [ "Normal Beam "]; $missilePods = [ "0 "]; $energyPacks = [ "0 "]; $startRoom = "01"; $combat = 1; $Beam = "Normal Beam "; $Bombs = ""; $Varia = ""; $ScrewAttack = ""; $MotherBrainHealth = 10; $combat = 1; $displayStats = 1; $location = "Brinstar "; $displayMap = 1>>


:: DEBUG ROOM NORFAIR [DEBUG-ROOM] {"position":"475,6350","size":"100,100"}
Weclome to the Debug Room! Select your quest!

[[Brinstar Combat Test]]
[[Norfair Combat Test]]
[[Tourian Test]]
[[To seek the Holy Grail]]
Break Energy <<linkreplace "Break Energy ">><</linkreplace>>

<<set $energy = 30; $maxEnergy = 30; $missiles = 0; $items = [ "Normal Beam "]; $startRoom = "Debug Room "; $combat = 1; $MotherBrainHealth = 10>>
	<<set $maxEnergy = 30; $energy = $maxEnergy; $maxMissiles = 0; $missiles = $maxMissiles; $items = [ "Normal Beam "]; $missilePods = [ "0 "]; $energyPacks = [ "0 "]; $startRoom = "01"; $combat = 1; $Beam = "Normal Beam "; $Bombs = ""; $Varia = ""; $ScrewAttack = ""; $MotherBrainHealth = 10; $combat = 1; $displayStats = 1; $location = "Brinstar "; $displayMap = 1>>


:: Grab Sword {"position":"600,6350","size":"100,100"}
<img src="assets/images/SamusSword.webp">The Boss glances at me, raises an eyebrow in surprise, then stands slowly and takes two swords hanging on the wall. He tosses one of the swords to me. He wants to fight.

I get the drift and accept the sword, then remove the Ice Beam from my arm and toss it aside.

The Boss drops the cigarette he 'd been smoking and stamps it out with the sole of his boot. Then he mutters quietly, ï¿½Letï¿½s do this,ï¿½ and rushes at me.<<linkreplace "rushes at me.">>
	<<set $random = random( 1,3)>>
	<<if $random == 3>><<goto "Metroid Mutant Revives">><<else>><<goto "Fighting Spirit">><</if>>
<</linkreplace>>


:: Grab Sword 2 {"position":"725,6350","size":"100,100"}
<img src="assets/images/SamusSword.webp">The Boss tosses aside his gun, takes two swords hanging on the wall, and throws one of them to me. I catch the sword, and getting the gist of his actions, remove my Ice Beam.

ï¿½Prepare yourself, little girl. You wonï¿½t get out of here alive.ï¿½
 
The battle between me and the Boss begins.<<linkreplace "The battle between me and the Boss begins.">>
	<<set $random = random( 1,3)>>
	<<if $random == 2>><<goto "Metroid Mutant Revives">><<else>><<goto "A Desperate Fight">><</if>>
<</linkreplace>>


:: New Mapper {"position":"850,6350","size":"100,100"}
<<if $displayMap == 1>>		<<if $location == "Brinstar ">><<if $items.includes("BrinstarMap ")>><hr ><img src="assets/images/Brinstar2.webp"><</if>><</if>>	<<if $location == "Norfair ">><<if $items.includes("NorfairMap ")>><hr ><img src="assets/images/Norfair2.webp"><</if>><</if>><</if>>


:: 38 [Item-Room Missiles] {"position":"975,6350","size":"100,100"}
###Room A-38
My Missiles slam into the locked Red Door. After firing 2 rounds, the door collapses noisily. <span style="color:red">(-2 Missiles.)</span><<set $missiles = $missiles - 2>>

The door brings down a mass of rock with it, raising a thick shroud of dust. The room dims, but finally my field of vision into the next chamber clears. I enter the room.

A statue of a strange monster has been placed in the center of the room, and there is a plate at its feet. On the plate is a description of how to access the hidden rooms:
<<include "Secret Passage Instructions">>
The plate also shows a map of Brinstar. (Brinstar Map acquired. I can now view the map below the Navigation Options.)<<run setup.grantMapItem("BrinstarMap ")>>
The statue cradles a Missile Pod in its hands. (<span style="color:red">Missile Pod (2)</span> acquired.<<run setup.grantMissilePod("2 ", 2)>> Maximum Missiles increased to $maxMissiles.) 

I store the above information in my computer. There are no hidden rooms here. [[I retrace my steps.->37]]


:: 63 [Item-Room] {"position":"1100,6350","size":"100,100"}
###Room B-63
<<if hasVisited("63")>><<else>>I fire Missiles at the Red Door. The Red Door takes 2 Missiles, and <i ><span class="fx-rumble">KABOOM</span></i >, it opens. <<set $missiles = $missiles - 2>> I move forward and take a look.<</if>>

In the center of the room stands the figure of a strange creature fashioned from stone and perhaps modeled after one of the life-forms of this asteroid. An iron plate is embedded at its feet. On the plate is written information about the hidden rooms.

<b >Attention Crew: Reminders for Entering Secret Rooms
<i >Room B-61:</b >The Ice Beam can be used to reach high places.
<b >Room B-67:</b >I 've hidden the gate in the ceiling; check the <b >Room </b >.
<b >Room B-74:</b >The wall is too weak for a ladder, so create your own.</i >I store this information into my computer.

Beyond this, there is nothing else in the room. [[I go back South to Room B-58.->58]]


:: ME Mapper {"position":"1225,6350","size":"100,100"}
<<if $displayMap == 1>><hr >Map <<linkreplace "Map ">><<include "More Efficient Mapper">><</linkreplace>><</if>>


:: Instructions {"position":"100,6475","size":"100,100"}
###Instructions

* Explore the labyrinthine corridors of Zebes to find the Mother Brain and retrieve the Metroid Capsule.
* Fight your way through the monsters infesting the maze...but sometimes it is better to run than fight!
* Combat results are randomly generated. Different weapons will increase your odds of winning and change the types of power-ups enemies leave behind.
* Zebes is riddled with secret passages. Use your mouse to locate hidden links within the text. Some can be tricky to find!
* You can save your game in Elevator Rooms. The game will also automatically save your progress in other points.
The game tracks your progress. However, the Map may load a bit more slowly on some computers than others.

[[Back->Title Screen]]


:: Dessgeega Normal Beam Damage {"position":"225,6475","size":"100,100"}
I take a tremendous amount of damage. <<if $items.includes("Varia ")>><span style="color:red">(-6 Energy)</span><<set $energy = $energy - 6>><<else>><span style="color:red">(-8 Energy)</span><<set $energy = $energy - 8>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Without a chance to select another weapon, my only hope is to escape.
Run  <<linkreplace "Run  ">>Run<hr >{
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Escape Dessgeega">><<else>><<include "Escape Dessgeega Fails">><</if>>
<</linkreplace>><</if>>


:: Escape Dessgeega [Combat-Ended] {"position":"350,6475","size":"100,100"}
I somehow manage to escape the Dessgeega. I fake going to the right, but fire my boosters at the last minute and quickly dash behind it. However, in the process, I am dealt a parting blow. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

<<linkreplace "The battle is over.">><<set $combat = 0>><<goto $lastRoom>><<set $displayMap = 1>><</linkreplace>><</if>>


:: Escape Dessgeega Fails {"position":"475,6475","size":"100,100"}
My attempt to escape the Dessgeega fails. I try to fake a move to the left, and suddenly turn right, but the Dessgeega is too fast and blocks my way. I take damage. <<if $items.includes("Varia ")>><span style="color:red">(-3 Energy)</span><<set $energy = $energy - 3>><<else>><span style="color:red">(-4 Energy)</span><<set $energy = $energy - 4>><</if>><<if $energy <1>><<set $energy = 0>><hr >GAME OVER<<linkreplace "GAME OVER ">><<goto "GAME OVER">><</linkreplace>><<else>>

Without a chance to select another weapon, my only hope is to escape.
Run  <<linkreplace "Run  ">>Run<hr >{
	<<set $random = random( 1,3)>>
	<<if $random == 1>><<include "Escape Dessgeega">><<else>><<include "Escape Dessgeega Fails">><</if>>
<</linkreplace>><</if>>


:: Wave Beam Hits Sidehopper {"position":"600,6475","size":"100,100"}
Attack successful! The enemy 's movements are quick, and although it gives you some trouble, you are somehow able to beat it. The creature screams a single shriek through the air.
	<<set $random = random( 1,6)>>
	<<if $random == 2>><<include "Nothing">><<elseif $random == 1>><<include "Missile">><<elseif $random == 3>><<include "Missile">><<else>><<include "Medium Energy Ball">><</if>>


:: Start {"position":"725,6475","size":"100,100"}
<<goto "Title Screen">>


:: PassageHeader {"position":"850,6475","size":"100,100"}
<<run setup.updateHud && setup.updateHud()>>


:: StoryCaption {"position":"975,6475","size":"100,100"}
<div id="hud">
  <div class="hud-section" id="hud-stats">
    <div class="hud-row">Energy: <span id="samus-energy">0/0</span></div>
    <div class="hud-row" id="samus-missiles-row">Missiles: <span id="samus-missiles">0/0</span></div>
    <div class="hud-label">Items</div>
    <div id="samus-items">ï¿½</div>
  </div>
  <div class="hud-section" id="hud-map">
    <div class="hud-label" id="samus-map-label">Map</div>
    <div id="samus-map">Map data unavailable.</div>
    <div class="hud-row">
      <a href="#" id="map-marker-toggle">Mark Room</a>
      <a href="#" id="map-view-toggle">View Map</a>
    </div>
    <div class="hud-row" id="map-marker-list"></div>
  </div>
</div>
<a href="#" id="music-toggle" title="Music">?</a>





